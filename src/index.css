@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-neutral-100 text-neutral-700 font-sans;
    font-feature-settings: "liga" 1, "kern" 1;
  }
  .dark body {
    /* darker background similar to your example */
    background-color: #0b1220;
    color: #e6eef8;
  }
}

@layer components {
  /* Button base */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-md bg-amber-500 text-white font-medium shadow-sm;
  }
  .btn:focus-visible { @apply outline-none ring-2 ring-amber-400; }

  /* Card subtle elevation and app card standards */
  .card { @apply bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 shadow-sm; }
  .app-card { @apply card; box-shadow: 0 6px 18px rgba(2,6,23,0.06); }
  .card-title { @apply text-sm font-semibold mb-1; }
  .card-sub { @apply text-sm text-neutral-500 dark:text-neutral-400; }
  .card-footer { @apply mt-3 flex items-center justify-between gap-3 text-sm; }

  /* StatCard refinements */
  .stat-title { @apply text-xs uppercase tracking-wide text-neutral-400; }
  .stat-value { @apply mt-2 text-2xl font-extrabold; }

  /* Global motion variables */
  :root {
    --motion-duration: 180ms;
    --motion-ease: cubic-bezier(.2,.9,.2,1);
  }

  /* transitions */
  .card, .btn, .stat-value { transition: transform var(--motion-duration) var(--motion-ease), box-shadow var(--motion-duration) var(--motion-ease), opacity var(--motion-duration) var(--motion-ease); }
  .card:hover { transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,23,0.12); }

  /* entrance animations */
  @keyframes fadeUp { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
  .animate-fade-up { animation: fadeUp var(--motion-duration) var(--motion-ease) both; }

  /* modal open (subtle overshoot for a softer pop) */
  @keyframes modalOpen { 
    0% { opacity: 0; transform: translateY(8px) scale(.985); }
    70% { transform: translateY(-2px) scale(1.01); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }
  .animate-modal-open { animation: modalOpen calc(var(--motion-duration) * 1.4) var(--motion-ease) both; }

  /* slide up for mobile bottom-sheet (stronger motion) */
  @keyframes slideUpSheet { from { opacity: 0; transform: translateY(100%); } to { opacity: 1; transform: translateY(0); } }
  .animate-slide-up { animation: slideUpSheet calc(var(--motion-duration) * 1.8) var(--motion-ease) both; }
  /* slide down to close */
  @keyframes slideDownSheet { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(100%); } }
  .animate-slide-down { animation: slideDownSheet calc(var(--motion-duration) * 1.2) var(--motion-ease) both; }

  /* snap transition for max-height (used when expanding/collapsing modals and dropdowns) */
  .transition-max-h { transition: max-height calc(var(--motion-duration) * 1.4) var(--motion-ease); }
  /* subtle pop for dropdowns */
  @keyframes snapPop { from { transform: translateY(6px) scale(0.995); opacity: 0.0 } to { transform: translateY(0) scale(1); opacity: 1 } }
  .animate-snap-pop { animation: snapPop calc(var(--motion-duration) * 1.2) var(--motion-ease) both; }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-up, .animate-modal-open, .card, .btn, .interactive { animation: none; transition: none; transform: none !important; }
  }
}

html, body, #root {
  height: 100%;
}

/* Dark-mode form element fixes: ensure selects/options are readable */
@layer utilities {
  .dark select, .dark textarea, .dark input[type="text"], .dark input[type="date"], .dark input[type="number"], .dark input, .dark .select {
    @apply bg-neutral-800 text-neutral-100 border-neutral-700;
  }
  /* Browsers differ in styling of <option> â€” set explicit colors for dark mode */
  select option {
    background-color: white;
    color: black;
  }
  .dark select option {
    background-color: #0b1220; /* deep dark */
    color: #e5e7eb; /* neutral-100 */
  }

  /* Mobile touch optimization */
  .touch-manipulation {
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: -ms-autohiding-scrollbar;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
  }

  /* small helper to hide scrollbar on horizontal containers if needed */
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
}

/* Prevent accidental horizontal overflow on small screens (mobile) */
@media (max-width: 640px) {
  body { overflow-x: hidden; }
}

/* Micro-interactions and small helpers */
@layer components {
  .interactive { transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease; }
  .interactive:hover { transform: translateY(-3px); }
  .interactive:active { transform: translateY(0) scale(.995); }
  .press-scale:active { transform: scale(.98); }

  .table-hover tbody tr { transition: background-color .12s ease; }
  .table-hover tbody tr:hover { background-color: rgba(0,0,0,0.03); }
  .dark .table-hover tbody tr:hover { background-color: rgba(255,255,255,0.02); }

  .focus-ring:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(250,204,21,0.18); }
}
