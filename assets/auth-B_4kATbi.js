import{s as a}from"./index-BcQelPkh.js";import"./vendor-react-CLub8Mor.js";import"./vendor-DwskwR46.js";import"./vendor-charts-BCrMCkTm.js";let r=null;async function p(){var i;if(r)return r;try{const e=await a.auth.getUser(),n=(i=e==null?void 0:e.data)==null?void 0:i.user;if(!n)return r="admin",r;const{data:o,error:s}=await a.from("app_user").select("id").limit(1).maybeSingle();if(!s&&!o)return r="admin",r;const{data:t,error:m}=await a.from("app_user").select("role").eq("id",n.id).single();return m?(r="admin",r):(r=(t==null?void 0:t.role)??"admin",r)}catch{return r="admin",r}}export{p as getCurrentUserRole};
