var g0=Object.defineProperty;var m0=(t,e,n)=>e in t?g0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>m0(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function v0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jf={exports:{}},pa={},Xf={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ti=Symbol.for("react.element"),y0=Symbol.for("react.portal"),_0=Symbol.for("react.fragment"),w0=Symbol.for("react.strict_mode"),b0=Symbol.for("react.profiler"),x0=Symbol.for("react.provider"),k0=Symbol.for("react.context"),S0=Symbol.for("react.forward_ref"),E0=Symbol.for("react.suspense"),C0=Symbol.for("react.memo"),T0=Symbol.for("react.lazy"),id=Symbol.iterator;function O0(t){return t===null||typeof t!="object"?null:(t=id&&t[id]||t["@@iterator"],typeof t=="function"?t:null)}var Qf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zf=Object.assign,ep={};function os(t,e,n){this.props=t,this.context=e,this.refs=ep,this.updater=n||Qf}os.prototype.isReactComponent={};os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tp(){}tp.prototype=os.prototype;function Wu(t,e,n){this.props=t,this.context=e,this.refs=ep,this.updater=n||Qf}var Hu=Wu.prototype=new tp;Hu.constructor=Wu;Zf(Hu,os.prototype);Hu.isPureReactComponent=!0;var od=Array.isArray,np=Object.prototype.hasOwnProperty,Vu={current:null},rp={key:!0,ref:!0,__self:!0,__source:!0};function sp(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)np.call(e,r)&&!rp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ti,type:t,key:i,ref:o,props:s,_owner:Vu.current}}function j0(t,e){return{$$typeof:Ti,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ti}function P0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ad=/\/+/g;function La(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P0(""+t.key):e.toString(36)}function mo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ti:case y0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+La(o,0):r,od(s)?(n="",t!=null&&(n=t.replace(ad,"$&/")+"/"),mo(s,e,n,"",function(u){return u})):s!=null&&(qu(s)&&(s=j0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ad,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",od(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+La(i,a);o+=mo(i,e,n,l,s)}else if(l=O0(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+La(i,a++),o+=mo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mi(t,e,n){if(t==null)return t;var r=[],s=0;return mo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function R0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},vo={transition:null},N0={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:vo,ReactCurrentOwner:Vu};function ip(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Mi,forEach:function(t,e,n){Mi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mi(t,function(){e++}),e},toArray:function(t){return Mi(t,function(e){return e})||[]},only:function(t){if(!qu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=os;K.Fragment=_0;K.Profiler=b0;K.PureComponent=Wu;K.StrictMode=w0;K.Suspense=E0;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N0;K.act=ip;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zf({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Vu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)np.call(e,l)&&!rp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ti,type:t.type,key:s,ref:i,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:k0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x0,_context:t},t.Consumer=t};K.createElement=sp;K.createFactory=function(t){var e=sp.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:S0,render:t}};K.isValidElement=qu;K.lazy=function(t){return{$$typeof:T0,_payload:{_status:-1,_result:t},_init:R0}};K.memo=function(t,e){return{$$typeof:C0,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=vo.transition;vo.transition={};try{t()}finally{vo.transition=e}};K.unstable_act=ip;K.useCallback=function(t,e){return Ve.current.useCallback(t,e)};K.useContext=function(t){return Ve.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ve.current.useEffect(t,e)};K.useId=function(){return Ve.current.useId()};K.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ve.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};K.useRef=function(t){return Ve.current.useRef(t)};K.useState=function(t){return Ve.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Ve.current.useTransition()};K.version="18.3.1";Xf.exports=K;var I=Xf.exports;const Et=v0(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=I,I0=Symbol.for("react.element"),M0=Symbol.for("react.fragment"),D0=Object.prototype.hasOwnProperty,L0=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z0={key:!0,ref:!0,__self:!0,__source:!0};function op(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D0.call(e,r)&&!z0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:I0,type:t,key:i,ref:o,props:s,_owner:L0.current}}pa.Fragment=M0;pa.jsx=op;pa.jsxs=op;Jf.exports=pa;var p=Jf.exports,ap={exports:{}},ht={},lp={exports:{}},up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,k){var O=T.length;T.push(k);e:for(;0<O;){var A=O-1>>>1,M=T[A];if(0<s(M,k))T[A]=k,T[O]=M,O=A;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var k=T[0],O=T.pop();if(O!==k){T[0]=O;e:for(var A=0,M=T.length,B=M>>>1;A<B;){var q=2*(A+1)-1,ke=T[q],X=q+1,tt=T[X];if(0>s(ke,O))X<M&&0>s(tt,ke)?(T[A]=tt,T[X]=O,A=X):(T[A]=ke,T[q]=O,A=q);else if(X<M&&0>s(tt,O))T[A]=tt,T[X]=O,A=X;else break e}}return k}function s(T,k){var O=T.sortIndex-k.sortIndex;return O!==0?O:T.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(T){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=T)r(u),k.sortIndex=k.expirationTime,e(l,k);else break;k=n(u)}}function b(T){if(y=!1,_(T),!g)if(n(l)!==null)g=!0,V(x);else{var k=n(u);k!==null&&Y(b,k.startTime-T)}}function x(T,k){g=!1,y&&(y=!1,m(C),C=-1),f=!0;var O=d;try{for(_(k),h=n(l);h!==null&&(!(h.expirationTime>k)||T&&!L());){var A=h.callback;if(typeof A=="function"){h.callback=null,d=h.priorityLevel;var M=A(h.expirationTime<=k);k=t.unstable_now(),typeof M=="function"?h.callback=M:h===n(l)&&r(l),_(k)}else r(l);h=n(l)}if(h!==null)var B=!0;else{var q=n(u);q!==null&&Y(b,q.startTime-k),B=!1}return B}finally{h=null,d=O,f=!1}}var S=!1,E=null,C=-1,P=5,R=-1;function L(){return!(t.unstable_now()-R<P)}function W(){if(E!==null){var T=t.unstable_now();R=T;var k=!0;try{k=E(!0,T)}finally{k?J():(S=!1,E=null)}}else S=!1}var J;if(typeof v=="function")J=function(){v(W)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,H=se.port2;se.port1.onmessage=W,J=function(){H.postMessage(null)}}else J=function(){w(W,0)};function V(T){E=T,S||(S=!0,J())}function Y(T,k){C=w(function(){T(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,V(x))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(T){switch(d){case 1:case 2:case 3:var k=3;break;default:k=d}var O=d;d=k;try{return T()}finally{d=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,k){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var O=d;d=T;try{return k()}finally{d=O}},t.unstable_scheduleCallback=function(T,k,O){var A=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?A+O:A):O=A,T){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=O+M,T={id:c++,callback:k,priorityLevel:T,startTime:O,expirationTime:M,sortIndex:-1},O>A?(T.sortIndex=O,e(u,T),n(l)===null&&T===n(u)&&(y?(m(C),C=-1):y=!0,Y(b,O-A))):(T.sortIndex=M,e(l,T),g||f||(g=!0,V(x))),T},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(T){var k=d;return function(){var O=d;d=k;try{return T.apply(this,arguments)}finally{d=O}}}})(up);lp.exports=up;var $0=lp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=I,dt=$0;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cp=new Set,Xs={};function dr(t,e){Jr(t,e),Jr(t+"Capture",e)}function Jr(t,e){for(Xs[t]=e,t=0;t<e.length;t++)cp.add(e[t])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=Object.prototype.hasOwnProperty,U0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ld={},ud={};function B0(t){return Ol.call(ud,t)?!0:Ol.call(ld,t)?!1:U0.test(t)?ud[t]=!0:(ld[t]=!0,!1)}function W0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function H0(t,e,n,r){if(e===null||typeof e>"u"||W0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ku=/[\-:]([a-z])/g;function Gu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);De[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);De[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ku,Gu);De[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yu(t,e,n,r){var s=De.hasOwnProperty(e)?De[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(H0(e,n,s,r)&&(n=null),r||s===null?B0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var an=F0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Di=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),jl=Symbol.for("react.profiler"),dp=Symbol.for("react.provider"),hp=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),Pl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Qu=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),fp=Symbol.for("react.offscreen"),cd=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=cd&&t[cd]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,za;function Ss(t){if(za===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);za=e&&e[1]||""}return`
`+za+t}var $a=!1;function Fa(t,e){if(!t||$a)return"";$a=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$a=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ss(t):""}function V0(t){switch(t.tag){case 5:return Ss(t.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 2:case 15:return t=Fa(t.type,!1),t;case 11:return t=Fa(t.type.render,!1),t;case 1:return t=Fa(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tr:return"Fragment";case Cr:return"Portal";case jl:return"Profiler";case Ju:return"StrictMode";case Pl:return"Suspense";case Rl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hp:return(t.displayName||"Context")+".Consumer";case dp:return(t._context.displayName||"Context")+".Provider";case Xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qu:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case fn:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function q0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function An(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K0(t){var e=pp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Li(t){t._valueTracker||(t._valueTracker=K0(t))}function gp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function No(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Al(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=An(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mp(t,e){e=e.checked,e!=null&&Yu(t,"checked",e,!1)}function Il(t,e){mp(t,e);var n=An(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ml(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ml(t,e.type,An(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ml(t,e,n){(e!=="number"||No(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Es=Array.isArray;function Fr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+An(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Es(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:An(n)}}function vp(t,e){var n=An(e.value),r=An(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ll(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zi,_p=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G0=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(t){G0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ms[e]=Ms[t]})});function wp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ms.hasOwnProperty(t)&&Ms[t]?(""+e).trim():e+"px"}function bp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Y0=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(t,e){if(e){if(Y0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function $l(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=null;function Zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ul=null,Ur=null,Br=null;function gd(t){if(t=Pi(t)){if(typeof Ul!="function")throw Error(j(280));var e=t.stateNode;e&&(e=_a(e),Ul(t.stateNode,t.type,e))}}function xp(t){Ur?Br?Br.push(t):Br=[t]:Ur=t}function kp(){if(Ur){var t=Ur,e=Br;if(Br=Ur=null,gd(t),e)for(t=0;t<e.length;t++)gd(e[t])}}function Sp(t,e){return t(e)}function Ep(){}var Ua=!1;function Cp(t,e,n){if(Ua)return t(e,n);Ua=!0;try{return Sp(t,e,n)}finally{Ua=!1,(Ur!==null||Br!==null)&&(Ep(),kp())}}function Zs(t,e){var n=t.stateNode;if(n===null)return null;var r=_a(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Bl=!1;if(tn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Bl=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Bl=!1}function J0(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ds=!1,Ao=null,Io=!1,Wl=null,X0={onError:function(t){Ds=!0,Ao=t}};function Q0(t,e,n,r,s,i,o,a,l){Ds=!1,Ao=null,J0.apply(X0,arguments)}function Z0(t,e,n,r,s,i,o,a,l){if(Q0.apply(this,arguments),Ds){if(Ds){var u=Ao;Ds=!1,Ao=null}else throw Error(j(198));Io||(Io=!0,Wl=u)}}function hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function md(t){if(hr(t)!==t)throw Error(j(188))}function ev(t){var e=t.alternate;if(!e){if(e=hr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return md(s),t;if(i===r)return md(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Op(t){return t=ev(t),t!==null?jp(t):null}function jp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jp(t);if(e!==null)return e;t=t.sibling}return null}var Pp=dt.unstable_scheduleCallback,vd=dt.unstable_cancelCallback,tv=dt.unstable_shouldYield,nv=dt.unstable_requestPaint,_e=dt.unstable_now,rv=dt.unstable_getCurrentPriorityLevel,ec=dt.unstable_ImmediatePriority,Rp=dt.unstable_UserBlockingPriority,Mo=dt.unstable_NormalPriority,sv=dt.unstable_LowPriority,Np=dt.unstable_IdlePriority,ga=null,Bt=null;function iv(t){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(ga,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:lv,ov=Math.log,av=Math.LN2;function lv(t){return t>>>=0,t===0?32:31-(ov(t)/av|0)|0}var $i=64,Fi=4194304;function Cs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Do(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Cs(a):(i&=o,i!==0&&(r=Cs(i)))}else o=n&~s,o!==0?r=Cs(o):i!==0&&(r=Cs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nt(e),s=1<<n,r|=t[n],e&=~s;return r}function uv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Nt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=uv(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Hl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ap(){var t=$i;return $i<<=1,!($i&4194240)&&($i=64),t}function Ba(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function dv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ne=0;function Ip(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mp,nc,Dp,Lp,zp,Vl=!1,Ui=[],Sn=null,En=null,Cn=null,ei=new Map,ti=new Map,mn=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yd(t,e){switch(t){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":ei.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(e.pointerId)}}function hs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pi(e),e!==null&&nc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fv(t,e,n,r,s){switch(e){case"focusin":return Sn=hs(Sn,t,e,n,r,s),!0;case"dragenter":return En=hs(En,t,e,n,r,s),!0;case"mouseover":return Cn=hs(Cn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ei.set(i,hs(ei.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ti.set(i,hs(ti.get(i)||null,t,e,n,r,s)),!0}return!1}function $p(t){var e=Xn(t.target);if(e!==null){var n=hr(e);if(n!==null){if(e=n.tag,e===13){if(e=Tp(n),e!==null){t.blockedOn=e,zp(t.priority,function(){Dp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ql(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fl=r,n.target.dispatchEvent(r),Fl=null}else return e=Pi(n),e!==null&&nc(e),t.blockedOn=n,!1;e.shift()}return!0}function _d(t,e,n){yo(t)&&n.delete(e)}function pv(){Vl=!1,Sn!==null&&yo(Sn)&&(Sn=null),En!==null&&yo(En)&&(En=null),Cn!==null&&yo(Cn)&&(Cn=null),ei.forEach(_d),ti.forEach(_d)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Vl||(Vl=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,pv)))}function ni(t){function e(s){return fs(s,t)}if(0<Ui.length){fs(Ui[0],t);for(var n=1;n<Ui.length;n++){var r=Ui[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sn!==null&&fs(Sn,t),En!==null&&fs(En,t),Cn!==null&&fs(Cn,t),ei.forEach(e),ti.forEach(e),n=0;n<mn.length;n++)r=mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mn.length&&(n=mn[0],n.blockedOn===null);)$p(n),n.blockedOn===null&&mn.shift()}var Wr=an.ReactCurrentBatchConfig,Lo=!0;function gv(t,e,n,r){var s=ne,i=Wr.transition;Wr.transition=null;try{ne=1,rc(t,e,n,r)}finally{ne=s,Wr.transition=i}}function mv(t,e,n,r){var s=ne,i=Wr.transition;Wr.transition=null;try{ne=4,rc(t,e,n,r)}finally{ne=s,Wr.transition=i}}function rc(t,e,n,r){if(Lo){var s=ql(t,e,n,r);if(s===null)Qa(t,e,r,zo,n),yd(t,r);else if(fv(s,t,e,n,r))r.stopPropagation();else if(yd(t,r),e&4&&-1<hv.indexOf(t)){for(;s!==null;){var i=Pi(s);if(i!==null&&Mp(i),i=ql(t,e,n,r),i===null&&Qa(t,e,r,zo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qa(t,e,r,null,n)}}var zo=null;function ql(t,e,n,r){if(zo=null,t=Zu(r),t=Xn(t),t!==null)if(e=hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zo=t,null}function Fp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case ec:return 1;case Rp:return 4;case Mo:case sv:return 16;case Np:return 536870912;default:return 16}default:return 16}}var _n=null,sc=null,_o=null;function Up(){if(_o)return _o;var t,e=sc,n=e.length,r,s="value"in _n?_n.value:_n.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return _o=s.slice(t,1<r?1-r:void 0)}function wo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bi(){return!0}function wd(){return!1}function ft(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bi:wd,this.isPropagationStopped=wd,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),e}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=ft(as),ji=ge({},as,{view:0,detail:0}),vv=ft(ji),Wa,Ha,ps,ma=ge({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ps&&(ps&&t.type==="mousemove"?(Wa=t.screenX-ps.screenX,Ha=t.screenY-ps.screenY):Ha=Wa=0,ps=t),Wa)},movementY:function(t){return"movementY"in t?t.movementY:Ha}}),bd=ft(ma),yv=ge({},ma,{dataTransfer:0}),_v=ft(yv),wv=ge({},ji,{relatedTarget:0}),Va=ft(wv),bv=ge({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),xv=ft(bv),kv=ge({},as,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sv=ft(kv),Ev=ge({},as,{data:0}),xd=ft(Ev),Cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ov={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ov[t])?!!e[t]:!1}function oc(){return jv}var Pv=ge({},ji,{key:function(t){if(t.key){var e=Cv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rv=ft(Pv),Nv=ge({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=ft(Nv),Av=ge({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Iv=ft(Av),Mv=ge({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dv=ft(Mv),Lv=ge({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zv=ft(Lv),$v=[9,13,27,32],ac=tn&&"CompositionEvent"in window,Ls=null;tn&&"documentMode"in document&&(Ls=document.documentMode);var Fv=tn&&"TextEvent"in window&&!Ls,Bp=tn&&(!ac||Ls&&8<Ls&&11>=Ls),Sd=" ",Ed=!1;function Wp(t,e){switch(t){case"keyup":return $v.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Or=!1;function Uv(t,e){switch(t){case"compositionend":return Hp(e);case"keypress":return e.which!==32?null:(Ed=!0,Sd);case"textInput":return t=e.data,t===Sd&&Ed?null:t;default:return null}}function Bv(t,e){if(Or)return t==="compositionend"||!ac&&Wp(t,e)?(t=Up(),_o=sc=_n=null,Or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bp&&e.locale!=="ko"?null:e.data;default:return null}}var Wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wv[t.type]:e==="textarea"}function Vp(t,e,n,r){xp(r),e=$o(e,"onChange"),0<e.length&&(n=new ic("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zs=null,ri=null;function Hv(t){ng(t,0)}function va(t){var e=Rr(t);if(gp(e))return t}function Vv(t,e){if(t==="change")return e}var qp=!1;if(tn){var qa;if(tn){var Ka="oninput"in document;if(!Ka){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Ka=typeof Td.oninput=="function"}qa=Ka}else qa=!1;qp=qa&&(!document.documentMode||9<document.documentMode)}function Od(){zs&&(zs.detachEvent("onpropertychange",Kp),ri=zs=null)}function Kp(t){if(t.propertyName==="value"&&va(ri)){var e=[];Vp(e,ri,t,Zu(t)),Cp(Hv,e)}}function qv(t,e,n){t==="focusin"?(Od(),zs=e,ri=n,zs.attachEvent("onpropertychange",Kp)):t==="focusout"&&Od()}function Kv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return va(ri)}function Gv(t,e){if(t==="click")return va(e)}function Yv(t,e){if(t==="input"||t==="change")return va(e)}function Jv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:Jv;function si(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ol.call(e,s)||!It(t[s],e[s]))return!1}return!0}function jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pd(t,e){var n=jd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jd(n)}}function Gp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yp(){for(var t=window,e=No();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=No(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xv(t){var e=Yp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gp(n.ownerDocument.documentElement,n)){if(r!==null&&lc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Pd(n,i);var o=Pd(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qv=tn&&"documentMode"in document&&11>=document.documentMode,jr=null,Kl=null,$s=null,Gl=!1;function Rd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gl||jr==null||jr!==No(r)||(r=jr,"selectionStart"in r&&lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$s&&si($s,r)||($s=r,r=$o(Kl,"onSelect"),0<r.length&&(e=new ic("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jr)))}function Wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pr={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionend:Wi("Transition","TransitionEnd")},Ga={},Jp={};tn&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ya(t){if(Ga[t])return Ga[t];if(!Pr[t])return t;var e=Pr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jp)return Ga[t]=e[n];return t}var Xp=ya("animationend"),Qp=ya("animationiteration"),Zp=ya("animationstart"),eg=ya("transitionend"),tg=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){tg.set(t,e),dr(e,[t])}for(var Ya=0;Ya<Nd.length;Ya++){var Ja=Nd[Ya],Zv=Ja.toLowerCase(),ey=Ja[0].toUpperCase()+Ja.slice(1);Dn(Zv,"on"+ey)}Dn(Xp,"onAnimationEnd");Dn(Qp,"onAnimationIteration");Dn(Zp,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(eg,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function Ad(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z0(r,e,void 0,t),t.currentTarget=null}function ng(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ad(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ad(s,a,u),i=l}}}if(Io)throw t=Wl,Io=!1,Wl=null,t}function le(t,e){var n=e[Zl];n===void 0&&(n=e[Zl]=new Set);var r=t+"__bubble";n.has(r)||(rg(e,t,2,!1),n.add(r))}function Xa(t,e,n){var r=0;e&&(r|=4),rg(n,t,r,e)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function ii(t){if(!t[Hi]){t[Hi]=!0,cp.forEach(function(n){n!=="selectionchange"&&(ty.has(n)||Xa(n,!1,t),Xa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hi]||(e[Hi]=!0,Xa("selectionchange",!1,e))}}function rg(t,e,n,r){switch(Fp(e)){case 1:var s=gv;break;case 4:s=mv;break;default:s=rc}n=s.bind(null,e,n,t),s=void 0,!Bl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qa(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Cp(function(){var u=i,c=Zu(n),h=[];e:{var d=tg.get(t);if(d!==void 0){var f=ic,g=t;switch(t){case"keypress":if(wo(n)===0)break e;case"keydown":case"keyup":f=Rv;break;case"focusin":g="focus",f=Va;break;case"focusout":g="blur",f=Va;break;case"beforeblur":case"afterblur":f=Va;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=_v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Iv;break;case Xp:case Qp:case Zp:f=xv;break;case eg:f=Dv;break;case"scroll":f=vv;break;case"wheel":f=zv;break;case"copy":case"cut":case"paste":f=Sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=kd}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var v=u,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,m!==null&&(b=Zs(v,m),b!=null&&y.push(oi(v,b,_)))),w)break;v=v.return}0<y.length&&(d=new f(d,g,null,n,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Fl&&(g=n.relatedTarget||n.fromElement)&&(Xn(g)||g[nn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Xn(g):null,g!==null&&(w=hr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=bd,b="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=kd,b="onPointerLeave",m="onPointerEnter",v="pointer"),w=f==null?d:Rr(f),_=g==null?d:Rr(g),d=new y(b,v+"leave",f,n,c),d.target=w,d.relatedTarget=_,b=null,Xn(c)===u&&(y=new y(m,v+"enter",g,n,c),y.target=_,y.relatedTarget=w,b=y),w=b,f&&g)t:{for(y=f,m=g,v=0,_=y;_;_=pr(_))v++;for(_=0,b=m;b;b=pr(b))_++;for(;0<v-_;)y=pr(y),v--;for(;0<_-v;)m=pr(m),_--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break t;y=pr(y),m=pr(m)}y=null}else y=null;f!==null&&Id(h,d,f,y,!1),g!==null&&w!==null&&Id(h,w,g,y,!0)}}e:{if(d=u?Rr(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=Vv;else if(Cd(d))if(qp)x=Yv;else{x=Kv;var S=qv}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Gv);if(x&&(x=x(t,u))){Vp(h,x,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Ml(d,"number",d.value)}switch(S=u?Rr(u):window,t){case"focusin":(Cd(S)||S.contentEditable==="true")&&(jr=S,Kl=u,$s=null);break;case"focusout":$s=Kl=jr=null;break;case"mousedown":Gl=!0;break;case"contextmenu":case"mouseup":case"dragend":Gl=!1,Rd(h,n,c);break;case"selectionchange":if(Qv)break;case"keydown":case"keyup":Rd(h,n,c)}var E;if(ac)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Or?Wp(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Bp&&n.locale!=="ko"&&(Or||C!=="onCompositionStart"?C==="onCompositionEnd"&&Or&&(E=Up()):(_n=c,sc="value"in _n?_n.value:_n.textContent,Or=!0)),S=$o(u,C),0<S.length&&(C=new xd(C,t,null,n,c),h.push({event:C,listeners:S}),E?C.data=E:(E=Hp(n),E!==null&&(C.data=E)))),(E=Fv?Uv(t,n):Bv(t,n))&&(u=$o(u,"onBeforeInput"),0<u.length&&(c=new xd("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=E))}ng(h,e)})}function oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $o(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zs(t,n),i!=null&&r.unshift(oi(t,i,s)),i=Zs(t,e),i!=null&&r.push(oi(t,i,s))),t=t.return}return r}function pr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Id(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Zs(n,i),l!=null&&o.unshift(oi(n,l,a))):s||(l=Zs(n,i),l!=null&&o.push(oi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function Md(t){return(typeof t=="string"?t:""+t).replace(ny,`
`).replace(ry,"")}function Vi(t,e,n){if(e=Md(e),Md(t)!==e&&n)throw Error(j(425))}function Fo(){}var Yl=null,Jl=null;function Xl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,iy=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(t){return Dd.resolve(null).then(t).catch(oy)}:Ql;function oy(t){setTimeout(function(){throw t})}function Za(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ni(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ni(e)}function Tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ld(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ls=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ls,ai="__reactProps$"+ls,nn="__reactContainer$"+ls,Zl="__reactEvents$"+ls,ay="__reactListeners$"+ls,ly="__reactHandles$"+ls;function Xn(t){var e=t[Ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nn]||n[Ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ld(t);t!==null;){if(n=t[Ut])return n;t=Ld(t)}return e}t=n,n=t.parentNode}return null}function Pi(t){return t=t[Ut]||t[nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function _a(t){return t[ai]||null}var eu=[],Nr=-1;function Ln(t){return{current:t}}function ce(t){0>Nr||(t.current=eu[Nr],eu[Nr]=null,Nr--)}function oe(t,e){Nr++,eu[Nr]=t.current,t.current=e}var In={},Fe=Ln(In),Qe=Ln(!1),ir=In;function Xr(t,e){var n=t.type.contextTypes;if(!n)return In;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ze(t){return t=t.childContextTypes,t!=null}function Uo(){ce(Qe),ce(Fe)}function zd(t,e,n){if(Fe.current!==In)throw Error(j(168));oe(Fe,e),oe(Qe,n)}function sg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,q0(t)||"Unknown",s));return ge({},n,r)}function Bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,ir=Fe.current,oe(Fe,t),oe(Qe,Qe.current),!0}function $d(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=sg(t,e,ir),r.__reactInternalMemoizedMergedChildContext=t,ce(Qe),ce(Fe),oe(Fe,t)):ce(Qe),oe(Qe,n)}var Yt=null,wa=!1,el=!1;function ig(t){Yt===null?Yt=[t]:Yt.push(t)}function uy(t){wa=!0,ig(t)}function zn(){if(!el&&Yt!==null){el=!0;var t=0,e=ne;try{var n=Yt;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yt=null,wa=!1}catch(s){throw Yt!==null&&(Yt=Yt.slice(t+1)),Pp(ec,zn),s}finally{ne=e,el=!1}}return null}var Ar=[],Ir=0,Wo=null,Ho=0,mt=[],vt=0,or=null,Xt=1,Qt="";function Hn(t,e){Ar[Ir++]=Ho,Ar[Ir++]=Wo,Wo=t,Ho=e}function og(t,e,n){mt[vt++]=Xt,mt[vt++]=Qt,mt[vt++]=or,or=t;var r=Xt;t=Qt;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var i=32-Nt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xt=1<<32-Nt(e)+s|n<<s|r,Qt=i+t}else Xt=1<<i|n<<s|r,Qt=t}function uc(t){t.return!==null&&(Hn(t,1),og(t,1,0))}function cc(t){for(;t===Wo;)Wo=Ar[--Ir],Ar[Ir]=null,Ho=Ar[--Ir],Ar[Ir]=null;for(;t===or;)or=mt[--vt],mt[vt]=null,Qt=mt[--vt],mt[vt]=null,Xt=mt[--vt],mt[vt]=null}var ct=null,ut=null,de=!1,Rt=null;function ag(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ct=t,ut=Tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ct=t,ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=or!==null?{id:Xt,overflow:Qt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ct=t,ut=null,!0):!1;default:return!1}}function tu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nu(t){if(de){var e=ut;if(e){var n=e;if(!Fd(t,e)){if(tu(t))throw Error(j(418));e=Tn(n.nextSibling);var r=ct;e&&Fd(t,e)?ag(r,n):(t.flags=t.flags&-4097|2,de=!1,ct=t)}}else{if(tu(t))throw Error(j(418));t.flags=t.flags&-4097|2,de=!1,ct=t}}}function Ud(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ct=t}function qi(t){if(t!==ct)return!1;if(!de)return Ud(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xl(t.type,t.memoizedProps)),e&&(e=ut)){if(tu(t))throw lg(),Error(j(418));for(;e;)ag(t,e),e=Tn(e.nextSibling)}if(Ud(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ut=Tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ut=null}}else ut=ct?Tn(t.stateNode.nextSibling):null;return!0}function lg(){for(var t=ut;t;)t=Tn(t.nextSibling)}function Qr(){ut=ct=null,de=!1}function dc(t){Rt===null?Rt=[t]:Rt.push(t)}var cy=an.ReactCurrentBatchConfig;function gs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function Ki(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bd(t){var e=t._init;return e(t._payload)}function ug(t){function e(m,v){if(t){var _=m.deletions;_===null?(m.deletions=[v],m.flags|=16):_.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=Rn(m,v),m.index=0,m.sibling=null,m}function i(m,v,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<v?(m.flags|=2,v):_):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,_,b){return v===null||v.tag!==6?(v=al(_,m.mode,b),v.return=m,v):(v=s(v,_),v.return=m,v)}function l(m,v,_,b){var x=_.type;return x===Tr?c(m,v,_.props.children,b,_.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===fn&&Bd(x)===v.type)?(b=s(v,_.props),b.ref=gs(m,v,_),b.return=m,b):(b=To(_.type,_.key,_.props,null,m.mode,b),b.ref=gs(m,v,_),b.return=m,b)}function u(m,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=ll(_,m.mode,b),v.return=m,v):(v=s(v,_.children||[]),v.return=m,v)}function c(m,v,_,b,x){return v===null||v.tag!==7?(v=rr(_,m.mode,b,x),v.return=m,v):(v=s(v,_),v.return=m,v)}function h(m,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=al(""+v,m.mode,_),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Di:return _=To(v.type,v.key,v.props,null,m.mode,_),_.ref=gs(m,null,v),_.return=m,_;case Cr:return v=ll(v,m.mode,_),v.return=m,v;case fn:var b=v._init;return h(m,b(v._payload),_)}if(Es(v)||cs(v))return v=rr(v,m.mode,_,null),v.return=m,v;Ki(m,v)}return null}function d(m,v,_,b){var x=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(m,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Di:return _.key===x?l(m,v,_,b):null;case Cr:return _.key===x?u(m,v,_,b):null;case fn:return x=_._init,d(m,v,x(_._payload),b)}if(Es(_)||cs(_))return x!==null?null:c(m,v,_,b,null);Ki(m,_)}return null}function f(m,v,_,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(_)||null,a(v,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Di:return m=m.get(b.key===null?_:b.key)||null,l(v,m,b,x);case Cr:return m=m.get(b.key===null?_:b.key)||null,u(v,m,b,x);case fn:var S=b._init;return f(m,v,_,S(b._payload),x)}if(Es(b)||cs(b))return m=m.get(_)||null,c(v,m,b,x,null);Ki(v,b)}return null}function g(m,v,_,b){for(var x=null,S=null,E=v,C=v=0,P=null;E!==null&&C<_.length;C++){E.index>C?(P=E,E=null):P=E.sibling;var R=d(m,E,_[C],b);if(R===null){E===null&&(E=P);break}t&&E&&R.alternate===null&&e(m,E),v=i(R,v,C),S===null?x=R:S.sibling=R,S=R,E=P}if(C===_.length)return n(m,E),de&&Hn(m,C),x;if(E===null){for(;C<_.length;C++)E=h(m,_[C],b),E!==null&&(v=i(E,v,C),S===null?x=E:S.sibling=E,S=E);return de&&Hn(m,C),x}for(E=r(m,E);C<_.length;C++)P=f(E,m,C,_[C],b),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?C:P.key),v=i(P,v,C),S===null?x=P:S.sibling=P,S=P);return t&&E.forEach(function(L){return e(m,L)}),de&&Hn(m,C),x}function y(m,v,_,b){var x=cs(_);if(typeof x!="function")throw Error(j(150));if(_=x.call(_),_==null)throw Error(j(151));for(var S=x=null,E=v,C=v=0,P=null,R=_.next();E!==null&&!R.done;C++,R=_.next()){E.index>C?(P=E,E=null):P=E.sibling;var L=d(m,E,R.value,b);if(L===null){E===null&&(E=P);break}t&&E&&L.alternate===null&&e(m,E),v=i(L,v,C),S===null?x=L:S.sibling=L,S=L,E=P}if(R.done)return n(m,E),de&&Hn(m,C),x;if(E===null){for(;!R.done;C++,R=_.next())R=h(m,R.value,b),R!==null&&(v=i(R,v,C),S===null?x=R:S.sibling=R,S=R);return de&&Hn(m,C),x}for(E=r(m,E);!R.done;C++,R=_.next())R=f(E,m,C,R.value,b),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?C:R.key),v=i(R,v,C),S===null?x=R:S.sibling=R,S=R);return t&&E.forEach(function(W){return e(m,W)}),de&&Hn(m,C),x}function w(m,v,_,b){if(typeof _=="object"&&_!==null&&_.type===Tr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Di:e:{for(var x=_.key,S=v;S!==null;){if(S.key===x){if(x=_.type,x===Tr){if(S.tag===7){n(m,S.sibling),v=s(S,_.props.children),v.return=m,m=v;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===fn&&Bd(x)===S.type){n(m,S.sibling),v=s(S,_.props),v.ref=gs(m,S,_),v.return=m,m=v;break e}n(m,S);break}else e(m,S);S=S.sibling}_.type===Tr?(v=rr(_.props.children,m.mode,b,_.key),v.return=m,m=v):(b=To(_.type,_.key,_.props,null,m.mode,b),b.ref=gs(m,v,_),b.return=m,m=b)}return o(m);case Cr:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(m,v.sibling),v=s(v,_.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=ll(_,m.mode,b),v.return=m,m=v}return o(m);case fn:return S=_._init,w(m,v,S(_._payload),b)}if(Es(_))return g(m,v,_,b);if(cs(_))return y(m,v,_,b);Ki(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(m,v.sibling),v=s(v,_),v.return=m,m=v):(n(m,v),v=al(_,m.mode,b),v.return=m,m=v),o(m)):n(m,v)}return w}var Zr=ug(!0),cg=ug(!1),Vo=Ln(null),qo=null,Mr=null,hc=null;function fc(){hc=Mr=qo=null}function pc(t){var e=Vo.current;ce(Vo),t._currentValue=e}function ru(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hr(t,e){qo=t,hc=Mr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function wt(t){var e=t._currentValue;if(hc!==t)if(t={context:t,memoizedValue:e,next:null},Mr===null){if(qo===null)throw Error(j(308));Mr=t,qo.dependencies={lanes:0,firstContext:t}}else Mr=Mr.next=t;return e}var Qn=null;function gc(t){Qn===null?Qn=[t]:Qn.push(t)}function dg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gc(e)):(n.next=s.next,s.next=n),e.interleaved=n,rn(t,r)}function rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pn=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function en(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function On(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rn(t,n)}return s=r.interleaved,s===null?(e.next=e,gc(r)):(e.next=s.next,s.next=e),r.interleaved=e,rn(t,n)}function bo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tc(t,n)}}function Wd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ko(t,e,n,r){var s=t.updateQueue;pn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(d=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=ge({},h,d);break e;case 2:pn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);lr|=o,t.lanes=o,t.memoizedState=h}}function Hd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var Ri={},Wt=Ln(Ri),li=Ln(Ri),ui=Ln(Ri);function Zn(t){if(t===Ri)throw Error(j(174));return t}function vc(t,e){switch(oe(ui,e),oe(li,t),oe(Wt,Ri),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ll(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ll(e,t)}ce(Wt),oe(Wt,e)}function es(){ce(Wt),ce(li),ce(ui)}function fg(t){Zn(ui.current);var e=Zn(Wt.current),n=Ll(e,t.type);e!==n&&(oe(li,t),oe(Wt,n))}function yc(t){li.current===t&&(ce(Wt),ce(li))}var fe=Ln(0);function Go(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tl=[];function _c(){for(var t=0;t<tl.length;t++)tl[t]._workInProgressVersionPrimary=null;tl.length=0}var xo=an.ReactCurrentDispatcher,nl=an.ReactCurrentBatchConfig,ar=0,pe=null,Ee=null,Oe=null,Yo=!1,Fs=!1,ci=0,dy=0;function Le(){throw Error(j(321))}function wc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function bc(t,e,n,r,s,i){if(ar=i,pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xo.current=t===null||t.memoizedState===null?gy:my,t=n(r,s),Fs){i=0;do{if(Fs=!1,ci=0,25<=i)throw Error(j(301));i+=1,Oe=Ee=null,e.updateQueue=null,xo.current=vy,t=n(r,s)}while(Fs)}if(xo.current=Jo,e=Ee!==null&&Ee.next!==null,ar=0,Oe=Ee=pe=null,Yo=!1,e)throw Error(j(300));return t}function xc(){var t=ci!==0;return ci=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?pe.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function bt(){if(Ee===null){var t=pe.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Oe===null?pe.memoizedState:Oe.next;if(e!==null)Oe=e,Ee=t;else{if(t===null)throw Error(j(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Oe===null?pe.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function di(t,e){return typeof e=="function"?e(t):e}function rl(t){var e=bt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Ee,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((ar&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,pe.lanes|=c,lr|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,It(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pe.lanes|=i,lr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sl(t){var e=bt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);It(i,e.memoizedState)||(Je=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function pg(){}function gg(t,e){var n=pe,r=bt(),s=e(),i=!It(r.memoizedState,s);if(i&&(r.memoizedState=s,Je=!0),r=r.queue,kc(yg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,hi(9,vg.bind(null,n,r,s,e),void 0,null),je===null)throw Error(j(349));ar&30||mg(n,e,s)}return s}function mg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vg(t,e,n,r){e.value=n,e.getSnapshot=r,_g(e)&&wg(t)}function yg(t,e,n){return n(function(){_g(e)&&wg(t)})}function _g(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function wg(t){var e=rn(t,1);e!==null&&At(e,t,1,-1)}function Vd(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},e.queue=t,t=t.dispatch=py.bind(null,pe,t),[e.memoizedState,t]}function hi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pe.updateQueue,e===null?(e={lastEffect:null,stores:null},pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bg(){return bt().memoizedState}function ko(t,e,n,r){var s=$t();pe.flags|=t,s.memoizedState=hi(1|e,n,void 0,r===void 0?null:r)}function ba(t,e,n,r){var s=bt();r=r===void 0?null:r;var i=void 0;if(Ee!==null){var o=Ee.memoizedState;if(i=o.destroy,r!==null&&wc(r,o.deps)){s.memoizedState=hi(e,n,i,r);return}}pe.flags|=t,s.memoizedState=hi(1|e,n,i,r)}function qd(t,e){return ko(8390656,8,t,e)}function kc(t,e){return ba(2048,8,t,e)}function xg(t,e){return ba(4,2,t,e)}function kg(t,e){return ba(4,4,t,e)}function Sg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eg(t,e,n){return n=n!=null?n.concat([t]):null,ba(4,4,Sg.bind(null,e,t),n)}function Sc(){}function Cg(t,e){var n=bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tg(t,e){var n=bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Og(t,e,n){return ar&21?(It(n,e)||(n=Ap(),pe.lanes|=n,lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n)}function hy(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=nl.transition;nl.transition={};try{t(!1),e()}finally{ne=n,nl.transition=r}}function jg(){return bt().memoizedState}function fy(t,e,n){var r=Pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pg(t))Rg(e,n);else if(n=dg(t,e,n,r),n!==null){var s=He();At(n,t,r,s),Ng(n,e,r)}}function py(t,e,n){var r=Pn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pg(t))Rg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,It(a,o)){var l=e.interleaved;l===null?(s.next=s,gc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=dg(t,e,s,r),n!==null&&(s=He(),At(n,t,r,s),Ng(n,e,r))}}function Pg(t){var e=t.alternate;return t===pe||e!==null&&e===pe}function Rg(t,e){Fs=Yo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ng(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tc(t,n)}}var Jo={readContext:wt,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},gy={readContext:wt,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:wt,useEffect:qd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ko(4194308,4,Sg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var n=$t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fy.bind(null,pe,t),[r.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:Vd,useDebugValue:Sc,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=Vd(!1),e=t[0];return t=hy.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pe,s=$t();if(de){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),je===null)throw Error(j(349));ar&30||mg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qd(yg.bind(null,r,i,t),[t]),r.flags|=2048,hi(9,vg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$t(),e=je.identifierPrefix;if(de){var n=Qt,r=Xt;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ci++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},my={readContext:wt,useCallback:Cg,useContext:wt,useEffect:kc,useImperativeHandle:Eg,useInsertionEffect:xg,useLayoutEffect:kg,useMemo:Tg,useReducer:rl,useRef:bg,useState:function(){return rl(di)},useDebugValue:Sc,useDeferredValue:function(t){var e=bt();return Og(e,Ee.memoizedState,t)},useTransition:function(){var t=rl(di)[0],e=bt().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:jg,unstable_isNewReconciler:!1},vy={readContext:wt,useCallback:Cg,useContext:wt,useEffect:kc,useImperativeHandle:Eg,useInsertionEffect:xg,useLayoutEffect:kg,useMemo:Tg,useReducer:sl,useRef:bg,useState:function(){return sl(di)},useDebugValue:Sc,useDeferredValue:function(t){var e=bt();return Ee===null?e.memoizedState=t:Og(e,Ee.memoizedState,t)},useTransition:function(){var t=sl(di)[0],e=bt().memoizedState;return[t,e]},useMutableSource:pg,useSyncExternalStore:gg,useId:jg,unstable_isNewReconciler:!1};function Ct(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function su(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xa={isMounted:function(t){return(t=t._reactInternals)?hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=He(),s=Pn(t),i=en(r,s);i.payload=e,n!=null&&(i.callback=n),e=On(t,i,s),e!==null&&(At(e,t,s,r),bo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=He(),s=Pn(t),i=en(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=On(t,i,s),e!==null&&(At(e,t,s,r),bo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=He(),r=Pn(t),s=en(n,r);s.tag=2,e!=null&&(s.callback=e),e=On(t,s,r),e!==null&&(At(e,t,r,n),bo(e,t,r))}};function Kd(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!si(n,r)||!si(s,i):!0}function Ag(t,e,n){var r=!1,s=In,i=e.contextType;return typeof i=="object"&&i!==null?i=wt(i):(s=Ze(e)?ir:Fe.current,r=e.contextTypes,i=(r=r!=null)?Xr(t,s):In),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gd(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xa.enqueueReplaceState(e,e.state,null)}function iu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=wt(i):(i=Ze(e)?ir:Fe.current,s.context=Xr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(su(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xa.enqueueReplaceState(s,s.state,null),Ko(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ts(t,e){try{var n="",r=e;do n+=V0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function il(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ou(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yy=typeof WeakMap=="function"?WeakMap:Map;function Ig(t,e,n){n=en(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qo||(Qo=!0,mu=r),ou(t,e)},n}function Mg(t,e,n){n=en(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ou(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ou(t,e),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Yd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yy;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ny.bind(null,t,e,n),e.then(t,t))}function Jd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xd(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=en(-1,1),e.tag=2,On(n,e,1))),n.lanes|=1),t)}var _y=an.ReactCurrentOwner,Je=!1;function Be(t,e,n,r){e.child=t===null?cg(e,null,n,r):Zr(e,t.child,n,r)}function Qd(t,e,n,r,s){n=n.render;var i=e.ref;return Hr(e,s),r=bc(t,e,n,r,i,s),n=xc(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sn(t,e,s)):(de&&n&&uc(e),e.flags|=1,Be(t,e,r,s),e.child)}function Zd(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Nc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Dg(t,e,i,r,s)):(t=To(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:si,n(o,r)&&t.ref===e.ref)return sn(t,e,s)}return e.flags|=1,t=Rn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Dg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(si(i,r)&&t.ref===e.ref)if(Je=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,sn(t,e,s)}return au(t,e,n,r,s)}function Lg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Lr,it),it|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(Lr,it),it|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,oe(Lr,it),it|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,oe(Lr,it),it|=r;return Be(t,e,s,n),e.child}function zg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function au(t,e,n,r,s){var i=Ze(n)?ir:Fe.current;return i=Xr(e,i),Hr(e,s),n=bc(t,e,n,r,i,s),r=xc(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sn(t,e,s)):(de&&r&&uc(e),e.flags|=1,Be(t,e,n,s),e.child)}function eh(t,e,n,r,s){if(Ze(n)){var i=!0;Bo(e)}else i=!1;if(Hr(e,s),e.stateNode===null)So(t,e),Ag(e,n,r),iu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=Ze(n)?ir:Fe.current,u=Xr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Gd(e,o,r,u),pn=!1;var d=e.memoizedState;o.state=d,Ko(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Qe.current||pn?(typeof c=="function"&&(su(e,n,c,r),l=e.memoizedState),(a=pn||Kd(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ct(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wt(l):(l=Ze(n)?ir:Fe.current,l=Xr(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Gd(e,o,r,l),pn=!1,d=e.memoizedState,o.state=d,Ko(e,r,o,s);var g=e.memoizedState;a!==h||d!==g||Qe.current||pn?(typeof f=="function"&&(su(e,n,f,r),g=e.memoizedState),(u=pn||Kd(e,n,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return lu(t,e,n,r,i,s)}function lu(t,e,n,r,s,i){zg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&$d(e,n,!1),sn(t,e,i);r=e.stateNode,_y.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zr(e,t.child,null,i),e.child=Zr(e,null,a,i)):Be(t,e,a,i),e.memoizedState=r.state,s&&$d(e,n,!0),e.child}function $g(t){var e=t.stateNode;e.pendingContext?zd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zd(t,e.context,!1),vc(t,e.containerInfo)}function th(t,e,n,r,s){return Qr(),dc(s),e.flags|=256,Be(t,e,n,r),e.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function cu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fg(t,e,n){var r=e.pendingProps,s=fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),oe(fe,s&1),t===null)return nu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ea(o,r,0,null),t=rr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cu(n),e.memoizedState=uu,t):Ec(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return wy(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rn(a,i):(i=rr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=uu,r}return i=t.child,t=i.sibling,r=Rn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ec(t,e){return e=Ea({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gi(t,e,n,r){return r!==null&&dc(r),Zr(e,t.child,null,n),t=Ec(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wy(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=il(Error(j(422))),Gi(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ea({mode:"visible",children:r.children},s,0,null),i=rr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zr(e,t.child,null,o),e.child.memoizedState=cu(o),e.memoizedState=uu,i);if(!(e.mode&1))return Gi(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(j(419)),r=il(i,r,void 0),Gi(t,e,o,r)}if(a=(o&t.childLanes)!==0,Je||a){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rn(t,s),At(r,t,s,-1))}return Rc(),r=il(Error(j(421))),Gi(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ay.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ut=Tn(s.nextSibling),ct=e,de=!0,Rt=null,t!==null&&(mt[vt++]=Xt,mt[vt++]=Qt,mt[vt++]=or,Xt=t.id,Qt=t.overflow,or=e),e=Ec(e,r.children),e.flags|=4096,e)}function nh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ru(t.return,e,n)}function ol(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ug(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Be(t,e,r.children,n),r=fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nh(t,n,e);else if(t.tag===19)nh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Go(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ol(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Go(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ol(e,!0,n,null,i);break;case"together":ol(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function So(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function by(t,e,n){switch(e.tag){case 3:$g(e),Qr();break;case 5:fg(e);break;case 1:Ze(e.type)&&Bo(e);break;case 4:vc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;oe(Vo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(fe,fe.current&1),e.flags|=128,null):n&e.child.childLanes?Fg(t,e,n):(oe(fe,fe.current&1),t=sn(t,e,n),t!==null?t.sibling:null);oe(fe,fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ug(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(fe,fe.current),r)break;return null;case 22:case 23:return e.lanes=0,Lg(t,e,n)}return sn(t,e,n)}var Bg,du,Wg,Hg;Bg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};Wg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zn(Wt.current);var i=null;switch(n){case"input":s=Al(t,s),r=Al(t,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=Dl(t,s),r=Dl(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fo)}zl(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&le("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Hg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ms(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xy(t,e,n){var r=e.pendingProps;switch(cc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return Ze(e.type)&&Uo(),ze(e),null;case 3:return r=e.stateNode,es(),ce(Qe),ce(Fe),_c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(_u(Rt),Rt=null))),du(t,e),ze(e),null;case 5:yc(e);var s=Zn(ui.current);if(n=e.type,t!==null&&e.stateNode!=null)Wg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return ze(e),null}if(t=Zn(Wt.current),qi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ut]=e,r[ai]=i,t=(e.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(s=0;s<Ts.length;s++)le(Ts[s],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":dd(r,i),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},le("invalid",r);break;case"textarea":fd(r,i),le("invalid",r)}zl(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vi(r.textContent,a,t),s=["children",""+a]):Xs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",r)}switch(n){case"input":Li(r),hd(r,i,!0);break;case"textarea":Li(r),pd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ut]=e,t[ai]=r,Bg(t,e,!1,!1),e.stateNode=t;e:{switch(o=$l(n,r),n){case"dialog":le("cancel",t),le("close",t),s=r;break;case"iframe":case"object":case"embed":le("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ts.length;s++)le(Ts[s],t);s=r;break;case"source":le("error",t),s=r;break;case"img":case"image":case"link":le("error",t),le("load",t),s=r;break;case"details":le("toggle",t),s=r;break;case"input":dd(t,r),s=Al(t,r),le("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),le("invalid",t);break;case"textarea":fd(t,r),s=Dl(t,r),le("invalid",t);break;default:s=r}zl(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?bp(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_p(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qs(t,l):typeof l=="number"&&Qs(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xs.hasOwnProperty(i)?l!=null&&i==="onScroll"&&le("scroll",t):l!=null&&Yu(t,i,l,o))}switch(n){case"input":Li(t),hd(t,r,!1);break;case"textarea":Li(t),pd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+An(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)Hg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Zn(ui.current),Zn(Wt.current),qi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ut]=e,(i=r.nodeValue!==n)&&(t=ct,t!==null))switch(t.tag){case 3:Vi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ut]=e,e.stateNode=r}return ze(e),null;case 13:if(ce(fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&ut!==null&&e.mode&1&&!(e.flags&128))lg(),Qr(),e.flags|=98560,i=!1;else if(i=qi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[Ut]=e}else Qr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),i=!1}else Rt!==null&&(_u(Rt),Rt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||fe.current&1?Ce===0&&(Ce=3):Rc())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return es(),du(t,e),t===null&&ii(e.stateNode.containerInfo),ze(e),null;case 10:return pc(e.type._context),ze(e),null;case 17:return Ze(e.type)&&Uo(),ze(e),null;case 19:if(ce(fe),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ms(i,!1);else{if(Ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Go(t),o!==null){for(e.flags|=128,ms(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(fe,fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&_e()>ns&&(e.flags|=128,r=!0,ms(i,!1),e.lanes=4194304)}else{if(!r)if(t=Go(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!de)return ze(e),null}else 2*_e()-i.renderingStartTime>ns&&n!==1073741824&&(e.flags|=128,r=!0,ms(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_e(),e.sibling=null,n=fe.current,oe(fe,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return Pc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?it&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function ky(t,e){switch(cc(e),e.tag){case 1:return Ze(e.type)&&Uo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return es(),ce(Qe),ce(Fe),_c(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yc(e),null;case 13:if(ce(fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Qr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(fe),null;case 4:return es(),null;case 10:return pc(e.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var Yi=!1,$e=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,D=null;function Dr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function hu(t,e,n){try{n()}catch(r){ve(t,e,r)}}var rh=!1;function Ey(t,e){if(Yl=Lo,t=Yp(),lc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jl={focusedElem:t,selectionRange:n},Lo=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ct(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(b){ve(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return g=rh,rh=!1,g}function Us(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hu(e,n,i)}s=s.next}while(s!==r)}}function ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vg(t){var e=t.alternate;e!==null&&(t.alternate=null,Vg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ut],delete e[ai],delete e[Zl],delete e[ay],delete e[ly])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qg(t){return t.tag===5||t.tag===3||t.tag===4}function sh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fo));else if(r!==4&&(t=t.child,t!==null))for(pu(t,e,n),t=t.sibling;t!==null;)pu(t,e,n),t=t.sibling}function gu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gu(t,e,n),t=t.sibling;t!==null;)gu(t,e,n),t=t.sibling}var Ae=null,Ot=!1;function dn(t,e,n){for(n=n.child;n!==null;)Kg(t,e,n),n=n.sibling}function Kg(t,e,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:$e||Dr(n,e);case 6:var r=Ae,s=Ot;Ae=null,dn(t,e,n),Ae=r,Ot=s,Ae!==null&&(Ot?(t=Ae,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(Ot?(t=Ae,n=n.stateNode,t.nodeType===8?Za(t.parentNode,n):t.nodeType===1&&Za(t,n),ni(t)):Za(Ae,n.stateNode));break;case 4:r=Ae,s=Ot,Ae=n.stateNode.containerInfo,Ot=!0,dn(t,e,n),Ae=r,Ot=s;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hu(n,e,o),s=s.next}while(s!==r)}dn(t,e,n);break;case 1:if(!$e&&(Dr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ve(n,e,a)}dn(t,e,n);break;case 21:dn(t,e,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,dn(t,e,n),$e=r):dn(t,e,n);break;default:dn(t,e,n)}}function ih(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Sy),e.forEach(function(r){var s=Iy.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,Ot=!1;break e;case 3:Ae=a.stateNode.containerInfo,Ot=!0;break e;case 4:Ae=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if(Ae===null)throw Error(j(160));Kg(i,o,s),Ae=null,Ot=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ve(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gg(e,t),e=e.sibling}function Gg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Dt(t),r&4){try{Us(3,t,t.return),ka(3,t)}catch(y){ve(t,t.return,y)}try{Us(5,t,t.return)}catch(y){ve(t,t.return,y)}}break;case 1:kt(e,t),Dt(t),r&512&&n!==null&&Dr(n,n.return);break;case 5:if(kt(e,t),Dt(t),r&512&&n!==null&&Dr(n,n.return),t.flags&32){var s=t.stateNode;try{Qs(s,"")}catch(y){ve(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mp(s,i),$l(a,o);var u=$l(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?bp(s,h):c==="dangerouslySetInnerHTML"?_p(s,h):c==="children"?Qs(s,h):Yu(s,c,h,u)}switch(a){case"input":Il(s,i);break;case"textarea":vp(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Fr(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?Fr(s,!!i.multiple,i.defaultValue,!0):Fr(s,!!i.multiple,i.multiple?[]:"",!1))}s[ai]=i}catch(y){ve(t,t.return,y)}}break;case 6:if(kt(e,t),Dt(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){ve(t,t.return,y)}}break;case 3:if(kt(e,t),Dt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ni(e.containerInfo)}catch(y){ve(t,t.return,y)}break;case 4:kt(e,t),Dt(t);break;case 13:kt(e,t),Dt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Oc=_e())),r&4&&ih(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($e=(u=$e)||c,kt(e,t),$e=u):kt(e,t),Dt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(h=D=c;D!==null;){switch(d=D,f=d.child,d.tag){case 0:case 11:case 14:case 15:Us(4,d,d.return);break;case 1:Dr(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){ve(r,n,y)}}break;case 5:Dr(d,d.return);break;case 22:if(d.memoizedState!==null){ah(h);continue}}f!==null?(f.return=d,D=f):ah(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wp("display",o))}catch(y){ve(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){ve(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:kt(e,t),Dt(t),r&4&&ih(t);break;case 21:break;default:kt(e,t),Dt(t)}}function Dt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qg(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qs(s,""),r.flags&=-33);var i=sh(t);gu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=sh(t);pu(t,a,o);break;default:throw Error(j(161))}}catch(l){ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cy(t,e,n){D=t,Yg(t)}function Yg(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Yi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||$e;a=Yi;var u=$e;if(Yi=o,($e=l)&&!u)for(D=s;D!==null;)o=D,l=o.child,o.tag===22&&o.memoizedState!==null?lh(s):l!==null?(l.return=o,D=l):lh(s);for(;i!==null;)D=i,Yg(i),i=i.sibling;D=s,Yi=a,$e=u}oh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):oh(t)}}function oh(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||ka(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$e)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ct(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hd(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&ni(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}$e||e.flags&512&&fu(e)}catch(d){ve(e,e.return,d)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function ah(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function lh(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ka(4,e)}catch(l){ve(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ve(e,s,l)}}var i=e.return;try{fu(e)}catch(l){ve(e,i,l)}break;case 5:var o=e.return;try{fu(e)}catch(l){ve(e,o,l)}}}catch(l){ve(e,e.return,l)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var Ty=Math.ceil,Xo=an.ReactCurrentDispatcher,Cc=an.ReactCurrentOwner,_t=an.ReactCurrentBatchConfig,Q=0,je=null,xe=null,Me=0,it=0,Lr=Ln(0),Ce=0,fi=null,lr=0,Sa=0,Tc=0,Bs=null,Ge=null,Oc=0,ns=1/0,Kt=null,Qo=!1,mu=null,jn=null,Ji=!1,wn=null,Zo=0,Ws=0,vu=null,Eo=-1,Co=0;function He(){return Q&6?_e():Eo!==-1?Eo:Eo=_e()}function Pn(t){return t.mode&1?Q&2&&Me!==0?Me&-Me:cy.transition!==null?(Co===0&&(Co=Ap()),Co):(t=ne,t!==0||(t=window.event,t=t===void 0?16:Fp(t.type)),t):1}function At(t,e,n,r){if(50<Ws)throw Ws=0,vu=null,Error(j(185));Oi(t,n,r),(!(Q&2)||t!==je)&&(t===je&&(!(Q&2)&&(Sa|=n),Ce===4&&vn(t,Me)),et(t,r),n===1&&Q===0&&!(e.mode&1)&&(ns=_e()+500,wa&&zn()))}function et(t,e){var n=t.callbackNode;cv(t,e);var r=Do(t,t===je?Me:0);if(r===0)n!==null&&vd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vd(n),e===1)t.tag===0?uy(uh.bind(null,t)):ig(uh.bind(null,t)),iy(function(){!(Q&6)&&zn()}),n=null;else{switch(Ip(r)){case 1:n=ec;break;case 4:n=Rp;break;case 16:n=Mo;break;case 536870912:n=Np;break;default:n=Mo}n=rm(n,Jg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jg(t,e){if(Eo=-1,Co=0,Q&6)throw Error(j(327));var n=t.callbackNode;if(Vr()&&t.callbackNode!==n)return null;var r=Do(t,t===je?Me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ea(t,r);else{e=r;var s=Q;Q|=2;var i=Qg();(je!==t||Me!==e)&&(Kt=null,ns=_e()+500,nr(t,e));do try{Py();break}catch(a){Xg(t,a)}while(!0);fc(),Xo.current=i,Q=s,xe!==null?e=0:(je=null,Me=0,e=Ce)}if(e!==0){if(e===2&&(s=Hl(t),s!==0&&(r=s,e=yu(t,s))),e===1)throw n=fi,nr(t,0),vn(t,r),et(t,_e()),n;if(e===6)vn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Oy(s)&&(e=ea(t,r),e===2&&(i=Hl(t),i!==0&&(r=i,e=yu(t,i))),e===1))throw n=fi,nr(t,0),vn(t,r),et(t,_e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Vn(t,Ge,Kt);break;case 3:if(vn(t,r),(r&130023424)===r&&(e=Oc+500-_e(),10<e)){if(Do(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){He(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ql(Vn.bind(null,t,Ge,Kt),e);break}Vn(t,Ge,Kt);break;case 4:if(vn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Nt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ty(r/1960))-r,10<r){t.timeoutHandle=Ql(Vn.bind(null,t,Ge,Kt),r);break}Vn(t,Ge,Kt);break;case 5:Vn(t,Ge,Kt);break;default:throw Error(j(329))}}}return et(t,_e()),t.callbackNode===n?Jg.bind(null,t):null}function yu(t,e){var n=Bs;return t.current.memoizedState.isDehydrated&&(nr(t,e).flags|=256),t=ea(t,e),t!==2&&(e=Ge,Ge=n,e!==null&&_u(e)),t}function _u(t){Ge===null?Ge=t:Ge.push.apply(Ge,t)}function Oy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!It(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vn(t,e){for(e&=~Tc,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),r=1<<n;t[n]=-1,e&=~r}}function uh(t){if(Q&6)throw Error(j(327));Vr();var e=Do(t,0);if(!(e&1))return et(t,_e()),null;var n=ea(t,e);if(t.tag!==0&&n===2){var r=Hl(t);r!==0&&(e=r,n=yu(t,r))}if(n===1)throw n=fi,nr(t,0),vn(t,e),et(t,_e()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vn(t,Ge,Kt),et(t,_e()),null}function jc(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(ns=_e()+500,wa&&zn())}}function ur(t){wn!==null&&wn.tag===0&&!(Q&6)&&Vr();var e=Q;Q|=1;var n=_t.transition,r=ne;try{if(_t.transition=null,ne=1,t)return t()}finally{ne=r,_t.transition=n,Q=e,!(Q&6)&&zn()}}function Pc(){it=Lr.current,ce(Lr)}function nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sy(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(cc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uo();break;case 3:es(),ce(Qe),ce(Fe),_c();break;case 5:yc(r);break;case 4:es();break;case 13:ce(fe);break;case 19:ce(fe);break;case 10:pc(r.type._context);break;case 22:case 23:Pc()}n=n.return}if(je=t,xe=t=Rn(t.current,null),Me=it=e,Ce=0,fi=null,Tc=Sa=lr=0,Ge=Bs=null,Qn!==null){for(e=0;e<Qn.length;e++)if(n=Qn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qn=null}return t}function Xg(t,e){do{var n=xe;try{if(fc(),xo.current=Jo,Yo){for(var r=pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Yo=!1}if(ar=0,Oe=Ee=pe=null,Fs=!1,ci=0,Cc.current=null,n===null||n.return===null){Ce=1,fi=e,xe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Me,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Jd(o);if(f!==null){f.flags&=-257,Xd(f,o,a,i,e),f.mode&1&&Yd(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){Yd(i,u,e),Rc();break e}l=Error(j(426))}}else if(de&&a.mode&1){var w=Jd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Xd(w,o,a,i,e),dc(ts(l,a));break e}}i=l=ts(l,a),Ce!==4&&(Ce=2),Bs===null?Bs=[i]:Bs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Ig(i,l,e);Wd(i,m);break e;case 1:a=l;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jn===null||!jn.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Mg(i,a,e);Wd(i,b);break e}}i=i.return}while(i!==null)}em(n)}catch(x){e=x,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function Qg(){var t=Xo.current;return Xo.current=Jo,t===null?Jo:t}function Rc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),je===null||!(lr&268435455)&&!(Sa&268435455)||vn(je,Me)}function ea(t,e){var n=Q;Q|=2;var r=Qg();(je!==t||Me!==e)&&(Kt=null,nr(t,e));do try{jy();break}catch(s){Xg(t,s)}while(!0);if(fc(),Q=n,Xo.current=r,xe!==null)throw Error(j(261));return je=null,Me=0,Ce}function jy(){for(;xe!==null;)Zg(xe)}function Py(){for(;xe!==null&&!tv();)Zg(xe)}function Zg(t){var e=nm(t.alternate,t,it);t.memoizedProps=t.pendingProps,e===null?em(t):xe=e,Cc.current=null}function em(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ky(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ce=6,xe=null;return}}else if(n=xy(n,e,it),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Ce===0&&(Ce=5)}function Vn(t,e,n){var r=ne,s=_t.transition;try{_t.transition=null,ne=1,Ry(t,e,n,r)}finally{_t.transition=s,ne=r}return null}function Ry(t,e,n,r){do Vr();while(wn!==null);if(Q&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dv(t,i),t===je&&(xe=je=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ji||(Ji=!0,rm(Mo,function(){return Vr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_t.transition,_t.transition=null;var o=ne;ne=1;var a=Q;Q|=4,Cc.current=null,Ey(t,n),Gg(n,t),Xv(Jl),Lo=!!Yl,Jl=Yl=null,t.current=n,Cy(n),nv(),Q=a,ne=o,_t.transition=i}else t.current=n;if(Ji&&(Ji=!1,wn=t,Zo=s),i=t.pendingLanes,i===0&&(jn=null),iv(n.stateNode),et(t,_e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qo)throw Qo=!1,t=mu,mu=null,t;return Zo&1&&t.tag!==0&&Vr(),i=t.pendingLanes,i&1?t===vu?Ws++:(Ws=0,vu=t):Ws=0,zn(),null}function Vr(){if(wn!==null){var t=Ip(Zo),e=_t.transition,n=ne;try{if(_t.transition=null,ne=16>t?16:t,wn===null)var r=!1;else{if(t=wn,wn=null,Zo=0,Q&6)throw Error(j(331));var s=Q;for(Q|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(D=u;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:Us(8,c,i)}var h=c.child;if(h!==null)h.return=c,D=h;else for(;D!==null;){c=D;var d=c.sibling,f=c.return;if(Vg(c),c===u){D=null;break}if(d!==null){d.return=f,D=d;break}D=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Us(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,D=m;break e}D=i.return}}var v=t.current;for(D=v;D!==null;){o=D;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,D=_;else e:for(o=v;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ka(9,a)}}catch(x){ve(a,a.return,x)}if(a===o){D=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,D=b;break e}D=a.return}}if(Q=s,zn(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(ga,t)}catch{}r=!0}return r}finally{ne=n,_t.transition=e}}return!1}function ch(t,e,n){e=ts(n,e),e=Ig(t,e,1),t=On(t,e,1),e=He(),t!==null&&(Oi(t,1,e),et(t,e))}function ve(t,e,n){if(t.tag===3)ch(t,t,n);else for(;e!==null;){if(e.tag===3){ch(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){t=ts(n,t),t=Mg(e,t,1),e=On(e,t,1),t=He(),e!==null&&(Oi(e,1,t),et(e,t));break}}e=e.return}}function Ny(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Me&n)===n&&(Ce===4||Ce===3&&(Me&130023424)===Me&&500>_e()-Oc?nr(t,0):Tc|=n),et(t,e)}function tm(t,e){e===0&&(t.mode&1?(e=Fi,Fi<<=1,!(Fi&130023424)&&(Fi=4194304)):e=1);var n=He();t=rn(t,e),t!==null&&(Oi(t,e,n),et(t,n))}function Ay(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tm(t,n)}function Iy(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),tm(t,n)}var nm;nm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)Je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Je=!1,by(t,e,n);Je=!!(t.flags&131072)}else Je=!1,de&&e.flags&1048576&&og(e,Ho,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;So(t,e),t=e.pendingProps;var s=Xr(e,Fe.current);Hr(e,n),s=bc(null,e,r,t,s,n);var i=xc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ze(r)?(i=!0,Bo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mc(e),s.updater=xa,e.stateNode=s,s._reactInternals=e,iu(e,r,t,n),e=lu(null,e,r,!0,i,n)):(e.tag=0,de&&i&&uc(e),Be(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(So(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Dy(r),t=Ct(r,t),s){case 0:e=au(null,e,r,t,n);break e;case 1:e=eh(null,e,r,t,n);break e;case 11:e=Qd(null,e,r,t,n);break e;case 14:e=Zd(null,e,r,Ct(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ct(r,s),au(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ct(r,s),eh(t,e,r,s,n);case 3:e:{if($g(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,hg(t,e),Ko(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ts(Error(j(423)),e),e=th(t,e,r,n,s);break e}else if(r!==s){s=ts(Error(j(424)),e),e=th(t,e,r,n,s);break e}else for(ut=Tn(e.stateNode.containerInfo.firstChild),ct=e,de=!0,Rt=null,n=cg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===s){e=sn(t,e,n);break e}Be(t,e,r,n)}e=e.child}return e;case 5:return fg(e),t===null&&nu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xl(r,s)?o=null:i!==null&&Xl(r,i)&&(e.flags|=32),zg(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&nu(e),null;case 13:return Fg(t,e,n);case 4:return vc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zr(e,null,r,n):Be(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ct(r,s),Qd(t,e,r,s,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,oe(Vo,r._currentValue),r._currentValue=o,i!==null)if(It(i.value,o)){if(i.children===s.children&&!Qe.current){e=sn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=en(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ru(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ru(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Be(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hr(e,n),s=wt(s),r=r(s),e.flags|=1,Be(t,e,r,n),e.child;case 14:return r=e.type,s=Ct(r,e.pendingProps),s=Ct(r.type,s),Zd(t,e,r,s,n);case 15:return Dg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ct(r,s),So(t,e),e.tag=1,Ze(r)?(t=!0,Bo(e)):t=!1,Hr(e,n),Ag(e,r,s),iu(e,r,s,n),lu(null,e,r,!0,t,n);case 19:return Ug(t,e,n);case 22:return Lg(t,e,n)}throw Error(j(156,e.tag))};function rm(t,e){return Pp(t,e)}function My(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,r){return new My(t,e,n,r)}function Nc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Dy(t){if(typeof t=="function")return Nc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xu)return 11;if(t===Qu)return 14}return 2}function Rn(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function To(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Nc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tr:return rr(n.children,s,i,e);case Ju:o=8,s|=8;break;case jl:return t=yt(12,n,e,s|2),t.elementType=jl,t.lanes=i,t;case Pl:return t=yt(13,n,e,s),t.elementType=Pl,t.lanes=i,t;case Rl:return t=yt(19,n,e,s),t.elementType=Rl,t.lanes=i,t;case fp:return Ea(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dp:o=10;break e;case hp:o=9;break e;case Xu:o=11;break e;case Qu:o=14;break e;case fn:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function rr(t,e,n,r){return t=yt(7,t,r,e),t.lanes=n,t}function Ea(t,e,n,r){return t=yt(22,t,r,e),t.elementType=fp,t.lanes=n,t.stateNode={isHidden:!1},t}function al(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function ll(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ly(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ac(t,e,n,r,s,i,o,a,l){return t=new Ly(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(i),t}function zy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sm(t){if(!t)return In;t=t._reactInternals;e:{if(hr(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ze(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Ze(n))return sg(t,n,e)}return e}function im(t,e,n,r,s,i,o,a,l){return t=Ac(n,r,!0,t,s,i,o,a,l),t.context=sm(null),n=t.current,r=He(),s=Pn(n),i=en(r,s),i.callback=e??null,On(n,i,s),t.current.lanes=s,Oi(t,s,r),et(t,r),t}function Ca(t,e,n,r){var s=e.current,i=He(),o=Pn(s);return n=sm(n),e.context===null?e.context=n:e.pendingContext=n,e=en(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=On(s,e,o),t!==null&&(At(t,s,o,i),bo(t,s,o)),o}function ta(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ic(t,e){dh(t,e),(t=t.alternate)&&dh(t,e)}function $y(){return null}var om=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}Ta.prototype.render=Mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Ca(t,e,null,null)};Ta.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ur(function(){Ca(null,t,null,null)}),e[nn]=null}};function Ta(t){this._internalRoot=t}Ta.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mn.length&&e!==0&&e<mn[n].priority;n++);mn.splice(n,0,t),n===0&&$p(t)}};function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hh(){}function Fy(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ta(o);i.call(u)}}var o=im(e,r,t,0,null,!1,!1,"",hh);return t._reactRootContainer=o,t[nn]=o.current,ii(t.nodeType===8?t.parentNode:t),ur(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ta(l);a.call(u)}}var l=Ac(t,0,!1,null,null,!1,!1,"",hh);return t._reactRootContainer=l,t[nn]=l.current,ii(t.nodeType===8?t.parentNode:t),ur(function(){Ca(e,l,n,r)}),l}function ja(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ta(o);a.call(l)}}Ca(e,o,t,s)}else o=Fy(n,e,t,s,r);return ta(o)}Mp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cs(e.pendingLanes);n!==0&&(tc(e,n|1),et(e,_e()),!(Q&6)&&(ns=_e()+500,zn()))}break;case 13:ur(function(){var r=rn(t,1);if(r!==null){var s=He();At(r,t,1,s)}}),Ic(t,1)}};nc=function(t){if(t.tag===13){var e=rn(t,134217728);if(e!==null){var n=He();At(e,t,134217728,n)}Ic(t,134217728)}};Dp=function(t){if(t.tag===13){var e=Pn(t),n=rn(t,e);if(n!==null){var r=He();At(n,t,e,r)}Ic(t,e)}};Lp=function(){return ne};zp=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Ul=function(t,e,n){switch(e){case"input":if(Il(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_a(r);if(!s)throw Error(j(90));gp(r),Il(r,s)}}}break;case"textarea":vp(t,n);break;case"select":e=n.value,e!=null&&Fr(t,!!n.multiple,e,!1)}};Sp=jc;Ep=ur;var Uy={usingClientEntryPoint:!1,Events:[Pi,Rr,_a,xp,kp,jc]},vs={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},By={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Op(t),t===null?null:t.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||$y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xi.isDisabled&&Xi.supportsFiber)try{ga=Xi.inject(By),Bt=Xi}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(e))throw Error(j(200));return zy(t,e,null,n)};ht.createRoot=function(t,e){if(!Dc(t))throw Error(j(299));var n=!1,r="",s=om;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ac(t,1,!1,null,null,n,!1,r,s),t[nn]=e.current,ii(t.nodeType===8?t.parentNode:t),new Mc(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Op(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return ur(t)};ht.hydrate=function(t,e,n){if(!Oa(e))throw Error(j(200));return ja(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!Dc(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=om;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=im(e,null,t,1,n??null,s,!1,i,o),t[nn]=e.current,ii(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ta(e)};ht.render=function(t,e,n){if(!Oa(e))throw Error(j(200));return ja(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!Oa(t))throw Error(j(40));return t._reactRootContainer?(ur(function(){ja(null,null,t,!1,function(){t._reactRootContainer=null,t[nn]=null})}),!0):!1};ht.unstable_batchedUpdates=jc;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oa(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return ja(t,e,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(am)}catch(t){console.error(t)}}am(),ap.exports=ht;var Wy=ap.exports,lm,fh=Wy;lm=fh.createRoot,fh.hydrateRoot;const um=I.createContext({theme:"light",toggle:()=>{}});function Hy({children:t}){const[e,n]=I.useState(()=>{try{return localStorage.getItem("theme")||"light"}catch{return"light"}});return I.useEffect(()=>{const r=document.documentElement;e==="dark"?r.classList.add("dark"):r.classList.remove("dark");try{localStorage.setItem("theme",e)}catch{}},[e]),p.jsx(um.Provider,{value:{theme:e,toggle:()=>n(r=>r==="light"?"dark":"light")},children:t})}function Vy(){return I.useContext(um)}function qy({onNav:t,currentPage:e}){const{theme:n,toggle:r}=Vy(),[s,i]=Et.useState(!1),[o,a]=Et.useState(!1),l=Et.useRef(null),u=Et.useRef(null);Et.useEffect(()=>{if(!o||!u.current)return;const f=u.current.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])'),g=f[0],y=f[f.length-1];g==null||g.focus();const w=m=>{m.key==="Tab"&&(m.shiftKey?document.activeElement===g&&(m.preventDefault(),y==null||y.focus()):document.activeElement===y&&(m.preventDefault(),g==null||g.focus()))};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[o]),Et.useEffect(()=>{var d;o||(d=l.current)==null||d.focus()},[o]);const c=[{id:"equipment",label:"Attrezzatura"},{id:"bookings",label:"Prenotazioni"},{id:"packages",label:"Pacchetti"},{id:"reports",label:"Amministrazione e Report"},{id:"settings",label:"Impostazioni"}],h=({name:d})=>{switch(d){case"dashboard":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13h8V3H3v10zM13 21h8v-8h-8v8zM13 3v8h8V3h-8zM3 21h8v-8H3v8z"})});case"equipment":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M9 3h6v4H9V3zM4 8h16v13H4V8z"})});case"bookings":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h10M7 16h10M5 4h14v2H5V4z"})});case"packages":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l9 4.5v9L12 21 3 16.5v-9L12 3zM12 12v8"})});case"expenses":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-2 0-4 1-4 3s2 3 4 3 4-1 4-3-2-3-4-3zM4 19h16"})});case"reports":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v18h18"})});case"settings":return p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7zM19.4 15a1.98 1.98 0 0 0 .35 2.04l.04.04a2 2 0 0 1-2.83 2.83l-.04-.04a1.98 1.98 0 0 0-2.04-.35 2 2 0 0 1-1.17 1.17c-.7.28-1.47.28-2.17 0a2 2 0 0 1-1.17-1.17 1.98 1.98 0 0 0-2.04.35l-.04.04a2 2 0 0 1-2.83-2.83l.04-.04a1.98 1.98 0 0 0 .35-2.04 2 2 0 0 1-1.17-1.17c-.28-.7-.28-1.47 0-2.17A2 2 0 0 1 3 8.58 1.98 1.98 0 0 0 2.65 6.54L2.61 6.5A2 2 0 0 1 5.44 3.67l.04.04c.7.28 1.47.28 2.17 0a2 2 0 0 1 1.17-1.17c.7-.28 1.47-.28 2.17 0a2 2 0 0 1 1.17 1.17c.28.7.28 1.47 0 2.17A2 2 0 0 1 19.4 8.58c.35.35.7.7.99 1.06z"})});default:return null}};return Et.useEffect(()=>{const d=f=>{f.key==="Escape"&&a(!1)};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[]),Et.useEffect(()=>{o?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden")},[o]),p.jsxs(p.Fragment,{children:[p.jsx("button",{ref:l,onClick:()=>a(d=>!d),"aria-controls":"sidebar","aria-expanded":o,"aria-label":o?"Chiudi menu":"Apri menu",className:"fixed top-3 left-3 z-50 lg:hidden p-2 rounded-md bg-white/90 dark:bg-neutral-900/90 backdrop-blur shadow",children:o?p.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):p.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),p.jsx("div",{className:"fixed top-3 right-3 z-50 lg:hidden",children:p.jsx("button",{onClick:()=>r(),className:"px-3 py-1 rounded bg-sky-600 text-white",children:n==="light"?"Chiaro":"Scuro"})}),p.jsx("div",{onClick:()=>a(!1),className:`fixed inset-0 bg-black/40 z-40 transition-opacity lg:hidden ${o?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!o}),p.jsxs("aside",{id:"sidebar",ref:d=>u.current=d,className:`fixed z-50 top-0 left-0 h-full w-64 bg-neutral-50 dark:bg-neutral-900 border-r dark:border-neutral-800 p-4 transform transition-transform duration-200 ${o?"translate-x-0":"-translate-x-full"} lg:static lg:translate-x-0 lg:block`,"aria-hidden":!o,children:[p.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h1",{className:`text-lg font-bold ${s?"sr-only":""}`,children:"Sup Manager"}),!s&&p.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Gestione prenotazioni e contabilit"})]}),p.jsx("div",{className:"lg:hidden",children:p.jsx("button",{onClick:()=>a(!1),"aria-label":"Chiudi menu",className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),p.jsx("div",{className:"hidden lg:flex items-center gap-2",children:p.jsx("button",{onClick:()=>i(d=>!d),"aria-label":"Riduci sidebar",className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:p.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:p.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})})]}),p.jsx("nav",{className:"space-y-1","aria-label":"Main navigation",children:c.map(d=>{const f=e===d.id;return p.jsxs("button",{onClick:()=>{t==null||t(d.id),a(!1)},"aria-current":f?"page":void 0,className:`w-full flex items-center gap-3 px-3 py-2 rounded transition-colors ${f?"bg-brand-500 text-white":"hover:bg-neutral-100 dark:hover:bg-neutral-800"}`,children:[p.jsx("span",{className:"flex-shrink-0 text-current",children:p.jsx(h,{name:d.id})}),p.jsx("span",{className:`${s?"hidden":"block"}`,children:d.label})]},d.id)})}),p.jsx("div",{className:`mt-6 ${s?"text-center":""}`,children:p.jsx("button",{onClick:()=>r(),className:"px-3 py-2 bg-sky-600 text-white rounded w-full",children:s?n==="light"?"C":"S":`Tema: ${n==="light"?"Chiaro":"Scuro"}`})})]})]})}function Pa(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ky(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const Gy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Lc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Yy extends Lc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ph extends Lc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gh extends Lc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(wu||(wu={}));class Jy{constructor(e,{headers:n={},customFetch:r,region:s=wu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Gy(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ky(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:h}=r;let d={},{region:f}=r;f||(f=this.region);const g=new URL(`${this.url}/${n}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(d["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(d["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=c;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),c?(w=o.signal,c.addEventListener("abort",()=>o.abort())):w=o.signal);const m=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:y,signal:w}).catch(x=>{throw new Yy(x)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new ph(m);if(!m.ok)throw new gh(m);let _=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return _==="application/json"?b=yield m.json():_==="application/octet-stream"||_==="application/pdf"?b=yield m.blob():_==="text/event-stream"?b=m:_==="multipart/form-data"?b=yield m.formData():b=yield m.text(),{data:b,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof gh||a instanceof ph?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Xy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Qy=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var h,d;if(n.method!=="HEAD"){var f;const m=await i.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}const y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");y&&w&&w.length>1&&(l=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&y===""?(u=204,c="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new Xy(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,c,h,d;const g=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",y=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"Error"}: ${g}`,y&&(a+=` (${y})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=i==null?void 0:i.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},Zy=class extends Qy{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const mh=new RegExp("[,()]");var kr=class extends Zy{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&mh.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&mh.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},e_=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new kr({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new kr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new kr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new kr({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new kr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},t_=class cm{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new e_(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new cm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new kr({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class n_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const r_="2.89.0",s_=`realtime-js/${r_}`,dm="1.0.0",i_="2.0.0",vh=dm,bu=1e4,o_=1e3,a_=100;var gn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gn||(gn={}));var Se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Se||(Se={}));var jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jt||(jt={}));var xu;(function(t){t.websocket="websocket"})(xu||(xu={}));var Yn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Yn||(Yn={}));class l_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(f),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,l.length),g.setUint8(y++,a.length),g.setUint8(y++,o.length),g.setUint8(y++,u.length),g.setUint8(y++,h.length),g.setUint8(y++,n),Array.from(l,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(a,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(o,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(u,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(h,m=>g.setUint8(y++,m.charCodeAt(0)));var w=new Uint8Array(f.byteLength+r.byteLength);return w.set(new Uint8Array(f),0),w.set(new Uint8Array(r),f.byteLength),w.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,g={type:this.BROADCAST_EVENT,event:c,payload:f};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class hm{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ie||(ie={}));const yh=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=u_(o,t,e,s),i),{}):{}},u_=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?fm(i,o):ku(o)},fm=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return f_(e,n)}switch(t){case ie.bool:return c_(e);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return d_(e);case ie.json:case ie.jsonb:return h_(e);case ie.timestamp:return p_(e);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return ku(e);default:return ku(e)}},ku=t=>t,c_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},d_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},h_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},f_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>fm(e,a))}return t},p_=t=>typeof t=="string"?t.replace(" ","T"):t,pm=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ul{constructor(e,n,r={},s=bu){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _h;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_h||(_h={}));class Hs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Hs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const d=c.map(w=>w.presence_ref),f=h.map(w=>w.presence_ref),g=c.filter(w=>f.indexOf(w.presence_ref)<0),y=h.filter(w=>d.indexOf(w.presence_ref)<0);g.length>0&&(a[u]=g),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wh||(wh={}));var Vs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vs||(Vs={}));var Gt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gt||(Gt={}));class zr{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ul(this,jt.join,this.params,this.timeout),this.rejoinTimer=new hm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Hs(this),this.broadcastEndpointURL=pm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Vs.PRESENCE]&&this.bindings[Vs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Gt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Gt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(Gt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,m=[];for(let v=0;v<w;v++){const _=y[v],{filter:{event:b,schema:x,table:S,filter:E}}=_,C=f&&f[v];if(C&&C.event===b&&zr.isFilterValueEqual(C.schema,x)&&zr.isFilterValueEqual(C.table,S)&&zr.isFilterValueEqual(C.filter,E))m.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),this.state=Se.errored,e==null||e(Gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Gt.SUBSCRIBED);return}}).receive("error",f=>{this.state=Se.errored,e==null||e(Gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Se.joined&&e===Vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ul(this,jt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Se.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ul(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>a_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=jt;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,y,w;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=f.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,y,w,m,v,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const b=f.id,x=(g=f.filter)===null||g===void 0?void 0:g.event;return b&&((y=n.ids)===null||y===void 0?void 0:y.includes(b))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(v=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return b==="*"||b===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:y,table:w,commit_timestamp:m,type:v,errors:_}=g;d=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:m,eventType:v,new:{},old:{},errors:_}),this._getPayloadRecords(g))}f.callback(d,r)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&zr.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jt.close,{},e)}_onError(e){this._on(jt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yh(e.columns,e.old_record)),n}}const cl=()=>{},Qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g_=[1e3,2e3,5e3,1e4],m_=1e4,v_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bu,this.transport=null,this.heartbeatIntervalMs=Qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cl,this.ref=0,this.reconnectTimer=null,this.vsn=vh,this.logger=cl,this.conn=null,this.sendBuffer=[],this.serializer=new l_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=pm(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case gn.connecting:return Yn.Connecting;case gn.open:return Yn.Open;case gn.closing:return Yn.Closing;default:return Yn.Closed}}isConnected(){return this.connectionState()===Yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new zr(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(o_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===gn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===gn.open||this.conn.readyState===gn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(jt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([v_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:s_};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new hm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u,c,h,d,f;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:bu,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Qi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:cl,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:vh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:g=>g_[g-1]||m_,this.vsn){case dm:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(g,y)=>y(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case i_:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var pi=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function __(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function w_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function b_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=__(t.baseUrl,r,s),l=await w_(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),d=h&&c?JSON.parse(c):c;if(!u.ok){const f=h?d:void 0,g=f==null?void 0:f.error;throw new pi((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:f})}return{status:u.status,headers:u.headers,data:d}}}}function Zi(t){return t.join("")}var x_=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Zi(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zi(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zi(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zi(t.namespace)}`}),!0}catch(e){if(e instanceof pi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof pi&&n.status===409)return;throw n}}};function gr(t){return t.join("")}var k_=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof pi&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof pi&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},S_=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=b_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new x_(this.client,e),this.tableOps=new k_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ra=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var E_=class extends Ra{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Su=class extends Ra{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const zc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),C_=()=>Response,Eu=t=>{if(Array.isArray(t))return t.map(n=>Eu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Eu(r)}),e},T_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},O_=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function gi(t){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(t)}function j_(t,e){if(gi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P_(t){var e=j_(t,"string");return gi(e)=="symbol"?e:e+""}function R_(t,e,n){return(e=P_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bh(Object(n),!0).forEach(function(r){R_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const dl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},N_=async(t,e,n)=>{t instanceof await C_()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new E_(dl(r),s,i))}).catch(r=>{e(new Su(dl(r),r))}):e(new Su(dl(t),t))},A_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(T_(r)?(s.headers=U({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),U(U({},s),n))};async function Ni(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,A_(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>N_(l,a,r))})}async function mi(t,e,n,r){return Ni(t,"GET",e,n,r)}async function Tt(t,e,n,r,s){return Ni(t,"POST",e,r,s,n)}async function Cu(t,e,n,r,s){return Ni(t,"PUT",e,r,s,n)}async function I_(t,e,n,r){return Ni(t,"HEAD",e,U(U({},n),{},{noResolveJson:!0}),r)}async function $c(t,e,n,r,s){return Ni(t,"DELETE",e,r,s,n)}var M_=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}}};let gm;gm=Symbol.toStringTag;var D_=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[gm]="BlobDownloadBuilder",this.promise=null}asStream(){return new M_(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(he(e))return{data:null,error:e};throw e}}};const L_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var z_=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=zc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=U(U({},xh),r);let a=U(U({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=U(U({},a),r.headers));const u=s._removeEmptyFolders(e),c=s._getFinalPath(u),h=await(t=="PUT"?Cu:Tt)(s.fetch,`${s.url}/object/${c}`,i,U({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(he(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=U({upsert:xh.upsert},r),c=U(U({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:i,fullPath:(await Cu(s.fetch,a.toString(),l,{headers:c})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(he(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=U({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Tt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ra("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Tt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Tt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Tt(r.fetch,`${r.url}/object/sign/${s}`,U({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Tt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>U(U({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>mi(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new D_(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Eu(await mi(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await I_(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(he(r)&&r instanceof Su){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await $c(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=U(U(U({},L_),e),{},{prefix:t||""});return{data:await Tt(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(he(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=U({},t);return{data:await Tt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const mm="2.89.0",vm={"X-Client-Info":`storage-js/${mm}`};var $_=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=U(U({},vm),e),this.fetch=zc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await mi(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await mi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Tt(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Cu(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(he(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Tt(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await $c(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},F_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},vm),e),this.fetch=zc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Tt(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await mi(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await $c(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(he(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!O_(t))throw new Ra("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new S_({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Fc={"X-Client-Info":`storage-js/${mm}`,"Content-Type":"application/json"};var ym=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ot(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var hl=class extends ym{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},U_=class extends ym{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Uc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),B_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),W_=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new hl(kh(i),r,o))}).catch(()=>{const i=r+"";e(new hl(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new hl(s.statusText||`HTTP ${r} error`,r,i))}}else e(new U_(kh(t),t))},H_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(B_(r)?(s.headers=U({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,U(U({},s),n)):s};async function V_(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,H_(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>W_(l,a,r))})}async function at(t,e,n,r,s){return V_(t,"POST",e,r,s,n)}var q_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await at(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await at(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}},K_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await at(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await at(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await at(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},G_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=U(U({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await at(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await at(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},Y_=class extends G_{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new J_(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},J_=class extends q_{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new X_(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},X_=class extends K_{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,U(U({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Q_=class extends $_{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new z_(this.url,this.headers,t,this.fetch)}get vectors(){return new Y_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new F_(this.url+"/iceberg",this.headers,this.fetch)}};const _m="2.89.0",Sr=30*1e3,Tu=3,fl=Tu*Sr,Z_="http://localhost:9999",ew="supabase.auth.token",tw={"X-Client-Info":`gotrue-js/${_m}`},Ou="X-Supabase-Api-Version",wm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rw=10*60*1e3;class vi extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class sw extends vi{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function iw(t){return z(t)&&t.name==="AuthApiError"}class Jn extends vi{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ln extends vi{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class rt extends ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ow(t){return z(t)&&t.name==="AuthSessionMissingError"}class mr extends ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eo extends ln{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class to extends ln{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aw(t){return z(t)&&t.name==="AuthImplicitGrantRedirectError"}class Sh extends ln{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lw extends ln{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ju extends ln{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pl(t){return z(t)&&t.name==="AuthRetryableFetchError"}class Eh extends ln{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Pu extends ln{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ch=` 	
\r=`.split(""),uw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ch.length;e+=1)t[Ch[e].charCodeAt(0)]=-2;for(let e=0;e<na.length;e+=1)t[na[e].charCodeAt(0)]=e;return t})();function Th(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(na[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(na[r]),e.queuedBits-=6}}function bm(t,e,n){const r=uw[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Oh(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{hw(o,r,n)};for(let o=0;o<t.length;o+=1)bm(t.charCodeAt(o),s,i);return e.join("")}function cw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dw(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}cw(r,e)}}function hw(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function qr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)bm(t.charCodeAt(s),n,r);return new Uint8Array(e)}function fw(t){const e=[];return dw(t,n=>e.push(n)),new Uint8Array(e)}function er(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Th(s,n,r)),Th(null,n,r),e.join("")}function pw(t){return Math.round(Date.now()/1e3)+t}function gw(){return Symbol("auth-callback")}const Ne=()=>typeof window<"u"&&typeof document<"u",$n={tested:!1,writable:!1},xm=()=>{if(!Ne())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($n.tested)return $n.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),$n.tested=!0,$n.writable=!0}catch{$n.tested=!0,$n.writable=!1}return $n.writable};function mw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const km=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),vw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Er=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Re=async(t,e)=>{await t.removeItem(e)};class Na{constructor(){this.promise=new Na.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Na.promiseConstructor=Promise;function gl(t){const e=t.split(".");if(e.length!==3)throw new Pu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nw.test(e[r]))throw new Pu("JWT not in base64url format");return{header:JSON.parse(Oh(e[0])),payload:JSON.parse(Oh(e[1])),signature:qr(e[2]),raw:{header:e[0],payload:e[1]}}}async function yw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _w(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function ww(t){return("0"+t.toString(16)).substr(-2)}function bw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ww).join("")}async function xw(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function kw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await xw(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vr(t,e,n=!1){const r=bw();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Er(t,`${e}-code-verifier`,s);const i=await kw(r);return[i,r===i?"plain":"s256"]}const Sw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ew(t){const e=t.headers.get(Ou);if(!e||!e.match(Sw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Cw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Tw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ow=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yr(t){if(!Ow.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ml(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jw(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function jh(t){return JSON.parse(JSON.stringify(t))}const qn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pw=[502,503,504];async function Ph(t){var e;if(!vw(t))throw new ju(qn(t),0);if(Pw.includes(t.status))throw new ju(qn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Jn(qn(i),i)}let r;const s=Ew(t);if(s&&s.getTime()>=wm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Eh(qn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Eh(qn(n),t.status,n.weak_password.reasons);throw new sw(qn(n),t.status||500,r)}const Rw=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function F(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Ou]||(i[Ou]=wm["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Nw(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Nw(t,e,n,r,s,i){const o=Rw(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ju(qn(l),0)}if(a.ok||await Ph(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ph(l)}}function St(t){var e;let n=null;Mw(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=pw(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rh(t){const e=St(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Aw(t){return{data:t,error:null}}function Iw(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Pa(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Nh(t){return t}function Mw(t){return t.access_token&&t.refresh_token&&t.expires_in}const vl=["global","local","others"];class Dw{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=km(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=vl[0]){if(vl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vl.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:yn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Pa(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Iw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Nh});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){yr(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yr(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:yn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yr(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:yn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yr(e.userId);try{const{data:n,error:r}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yr(e.userId),yr(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Nh});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await F(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await F(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await F(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await F(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}}function Ah(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const _r={debug:!!(globalThis&&xm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Lw extends Sm{}async function zw(t,e,n){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Lw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(_r.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function $w(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Em(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Fw(t){return parseInt(t,16)}function Uw(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Bw(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:h,version:d}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=Em(t.address),g=c?`${c}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${g} wants you to sign in with your Ethereum account:
${f}

${y}`;let m=`URI: ${h}
Version: ${d}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),u){let v=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);v+=`
- ${_}`}m+=v}return`${w}
${m}`}class be extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class ra extends be{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Ww({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new be({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new be({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new be({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new be({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new be({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new be({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new be({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Cm(o)){if(i.rp.id!==o)return new be({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new be({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new be({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hw({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new be({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new be({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Cm(r)){if(n.rpId!==r)return new be({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new be({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Vw{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const qw=new Vw;function Kw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Pa(t,["challenge","user","excludeCredentials"]),i=qr(e).buffer,o=Object.assign(Object.assign({},n),{id:qr(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:qr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Gw(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Pa(t,["challenge","allowCredentials"]),s=qr(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:qr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Yw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:er(new Uint8Array(t.response.attestationObject)),clientDataJSON:er(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Jw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:er(new Uint8Array(s.authenticatorData)),clientDataJSON:er(new Uint8Array(s.clientDataJSON)),signature:er(new Uint8Array(s.signature)),userHandle:s.userHandle?er(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Cm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ih(){var t,e;return!!(Ne()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Xw(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ra("Browser returned unexpected credential type",e)}:{data:null,error:new ra("Empty credential response",e)}}catch(e){return{data:null,error:Ww({error:e,options:t})}}}async function Qw(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ra("Browser returned unexpected credential type",e)}:{data:null,error:new ra("Empty credential response",e)}}catch(e){return{data:null,error:Hw({error:e,options:t})}}}const Zw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},eb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function sa(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=sa(a,o):r[i]=sa(o)}else r[i]=o}return r}function tb(t,e){return sa(Zw,t,e||{})}function nb(t,e){return sa(eb,t,e||{})}class rb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??qw.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=tb(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:h}=await Xw({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=nb(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:h}=await Qw(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Jn("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new vi("rpId is required for WebAuthn authentication")};try{if(!Ih())return{data:null,error:new Jn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Jn("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new vi("rpId is required for WebAuthn registration")};try{if(!Ih())return{data:null,error:new Jn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return z(o)?{data:null,error:o}:{data:null,error:new Jn("Unexpected error in register",o)}}}}$w();const sb={url:Z_,storageKey:ew,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Mh(t,e,n){return await n()}const wr={};class yi{get jwks(){var e,n;return(n=(e=wr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=wr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wr[this.storageKey]=Object.assign(Object.assign({},wr[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},sb),e);if(this.storageKey=i.storageKey,this.instanceID=(n=yi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,yi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Ne()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Dw({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=km(i.fetch),this.lock=i.lock||Mh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Ne()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=zw:this.lock=Mh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:xm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ah(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ah(this.memoryStorage)),Ne()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_m}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ne()&&(n=mw(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ne()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),aw(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return z(n)?this._returnResult({error:n}):this._returnResult({error:new Jn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:St}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await vr(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:St})}else if("phone"in e){const{phone:c,password:h,options:d}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:St})}else throw new eo("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Re(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rh})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rh})}else throw new eo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new mr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,u,c,h,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:m,options:v}=e;let _;if(Ne())if(typeof w=="object")_=w;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")_=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const b=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),x=await _.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Em(x[0]);let E=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const P=await _.request({method:"eth_chainId"});E=Fw(P)}const C={domain:b.host,address:S,statement:m,uri:b.href,version:"1",chainId:E,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.resources};f=Bw(C),g=await _.request({method:"personal_sign",params:[Uw(f),S]})}try{const{data:y,error:w}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:St});if(w)throw w;if(!y||!y.session||!y.user){const m=new mr;return this._returnResult({data:{user:null,session:null},error:m})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(z(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,s,i,o,a,l,u,c,h,d,f;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:w,wallet:m,statement:v,options:_}=e;let b;if(Ne())if(typeof m=="object")b=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))b=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=m}const x=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in b&&b.signIn){const S=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),v?{statement:v}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${x.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:w,error:m}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:er(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:St});if(m)throw m;if(!w||!w.session||!w.user){const v=new mr;return this._returnResult({data:{user:null,session:null},error:v})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:m})}catch(w){if(z(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await Fn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new lw;const{data:i,error:o}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:St});if(await Re(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new mr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:St}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new mr;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await vr(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new eo("You must provide either an email or phone number.")}catch(a){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:St});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await vr(this.storage,this.storageKey));const u=await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Aw});return!((i=u.data)===null||i===void 0)&&i.url&&Ne()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new rt;const{error:s}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new eo("You must provide either an email or phone number and a type")}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Fn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ml()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=jw(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yn})})}catch(n){if(z(n))return ow(n)&&(await this._removeSession(),await Re(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new rt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vr(this.storage,this.storageKey));const{data:u,error:c}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yn});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=gl(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(z(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new rt;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ne())throw new to("No browser detected.");if(e.error||e.error_description||e.error_code)throw new to(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new to("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sh("No code detected.");const{data:v,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new to("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=Sr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,c);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(r){if(z(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(iw(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Re(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=gw(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await vr(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Ne()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(z(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,h=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:St}),{data:d,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new mr}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(s){if(await Re(this.storage,`${this.storageKey}-code-verifier`),z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _w(async s=>(s>0&&await yw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:St})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pl(i)&&Date.now()+o-r<Sr})}catch(r){if(this._debug(n,"error",r),z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ne()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Fn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Er(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ml()}else if(s&&!s.user&&!s.user){const o=await Fn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Re(this.storage,this.storageKey+"-user"),await Er(this.storage,this.storageKey,s)):s.user=ml()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${fl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),pl(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Na;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new rt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),z(i)){const o={data:null,error:i};return pl(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Re(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Er(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=jh(s);await Er(this.storage,this.storageKey,i)}else{const s=jh(n);await Er(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Re(this.storage,this.storageKey),await Re(this.storage,this.storageKey+"-code-verifier"),await Re(this.storage,this.storageKey+"-user"),this.userStorage&&await Re(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ne()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Sr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Sr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sr}ms, refresh threshold is ${Tu} ticks`),s<=Tu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ne()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await vr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Yw(e.webauthn.credential_response):Jw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Kw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Gw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gl(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await F(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new rt})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new rt});const o=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ne()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new rt});const o=await F(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Ne()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await F(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new rt})})}catch(e){if(z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await F(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new rt})})}catch(n){if(z(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+rw>s)return r;const{data:i,error:o}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=gl(r);n!=null&&n.allowExpired||Cw(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const c=Tw(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,fw(`${a}.${l}`)))throw new Pu("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(z(r))return this._returnResult({data:null,error:r});throw r}}}yi.nextInstanceID={};const ib=yi,ob="2.89.0";let Os="";typeof Deno<"u"?Os="deno":typeof document<"u"?Os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Os="react-native":Os="node";const ab={"X-Client-Info":`supabase-js-${Os}/${ob}`},lb={headers:ab},ub={schema:"public"},cb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},db={};function _i(t){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(t)}function hb(t,e){if(_i(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fb(t){var e=hb(t,"string");return _i(e)=="symbol"?e:e+""}function pb(t,e,n){return(e=fb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dh(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const gb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mb=()=>Headers,vb=(t,e,n)=>{const r=gb(n),s=mb();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,me(me({},o),{},{headers:u}))}};function yb(t){return t.endsWith("/")?t:t+"/"}function _b(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,d={db:me(me({},l),s),auth:me(me({},u),i),realtime:me(me({},c),o),storage:{},global:me(me(me({},h),a),{},{headers:me(me({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function wb(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var bb=class extends ib{constructor(t){super(t)}},xb=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=wb(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:ub,realtime:db,auth:me(me({},cb),{},{storageKey:o}),global:lb},l=_b(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=vb(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(me({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new t_(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Q_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Jy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bb({url:this.authUrl.href,headers:me(me({},d),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new y_(this.realtimeUrl.href,me(me({},t),{},{params:me(me({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const kb=(t,e,n)=>new xb(t,e,n);function Sb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Sb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Eb="https://kszkwdasxajzswkaoafc.supabase.co",Cb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtzemt3ZGFzeGFqenN3a2FvYWZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0ODQ3NDAsImV4cCI6MjA4MzA2MDc0MH0.01lkOQuwTz_Jt0g9xUs7Zg_ZsXB44NFEBS91ejrIXjQ",Z=kb(Eb,Cb,{auth:{persistSession:!0}});function lt({children:t,onClick:e,className:n=""}){return p.jsx("button",{onClick:e,className:`px-4 py-2 rounded-md bg-amber-500 hover:bg-amber-600 text-white ${n}`,children:t})}function Kr({children:t,className:e=""}){return p.jsx("div",{className:`bg-white dark:bg-neutral-800 border border-transparent dark:border-neutral-700 shadow-sm rounded-xl p-4 ${e}`,children:t})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ai(t){return t+.5|0}const bn=(t,e,n)=>Math.max(Math.min(t,n),e);function js(t){return bn(Ai(t*2.55),0,255)}function Nn(t){return bn(Ai(t*255),0,255)}function Jt(t){return bn(Ai(t/2.55)/100,0,1)}function Lh(t){return bn(Ai(t*100),0,100)}const gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ru=[..."0123456789ABCDEF"],Tb=t=>Ru[t&15],Ob=t=>Ru[(t&240)>>4]+Ru[t&15],no=t=>(t&240)>>4===(t&15),jb=t=>no(t.r)&&no(t.g)&&no(t.b)&&no(t.a);function Pb(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&gt[t[1]]*17,g:255&gt[t[2]]*17,b:255&gt[t[3]]*17,a:e===5?gt[t[4]]*17:255}:(e===7||e===9)&&(n={r:gt[t[1]]<<4|gt[t[2]],g:gt[t[3]]<<4|gt[t[4]],b:gt[t[5]]<<4|gt[t[6]],a:e===9?gt[t[7]]<<4|gt[t[8]]:255})),n}const Rb=(t,e)=>t<255?e(t):"";function Nb(t){var e=jb(t)?Tb:Ob;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Rb(t.a,e):void 0}const Ab=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Tm(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Ib(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Mb(t,e,n){const r=Tm(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function Db(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Bc(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,u,c;return i!==o&&(c=i-o,u=a>.5?c/(2-i-o):c/(i+o),l=Db(n,r,s,c,i),l=l*60+.5),[l|0,u||0,a]}function Wc(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Nn)}function Hc(t,e,n){return Wc(Tm,t,e,n)}function Lb(t,e,n){return Wc(Mb,t,e,n)}function zb(t,e,n){return Wc(Ib,t,e,n)}function Om(t){return(t%360+360)%360}function $b(t){const e=Ab.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?js(+e[5]):Nn(+e[5]));const s=Om(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Lb(s,i,o):e[1]==="hsv"?r=zb(s,i,o):r=Hc(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Fb(t,e){var n=Bc(t);n[0]=Om(n[0]+e),n=Hc(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Ub(t){if(!t)return;const e=Bc(t),n=e[0],r=Lh(e[1]),s=Lh(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Jt(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const zh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$h={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Bb(){const t={},e=Object.keys($h),n=Object.keys(zh);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,zh[i]);i=parseInt($h[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let ro;function Wb(t){ro||(ro=Bb(),ro.transparent=[0,0,0,0]);const e=ro[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Hb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Vb(t){const e=Hb.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?js(o):bn(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?js(r):bn(r,0,255)),s=255&(e[4]?js(s):bn(s,0,255)),i=255&(e[6]?js(i):bn(i,0,255)),{r,g:s,b:i,a:n}}}function qb(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Jt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,br=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Kb(t,e,n){const r=br(Jt(t.r)),s=br(Jt(t.g)),i=br(Jt(t.b));return{r:Nn(yl(r+n*(br(Jt(e.r))-r))),g:Nn(yl(s+n*(br(Jt(e.g))-s))),b:Nn(yl(i+n*(br(Jt(e.b))-i))),a:t.a+n*(e.a-t.a)}}function so(t,e,n){if(t){let r=Bc(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Hc(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function jm(t,e){return t&&Object.assign(e||{},t)}function Fh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Nn(t[3]))):(e=jm(t,{r:0,g:0,b:0,a:1}),e.a=Nn(e.a)),e}function Gb(t){return t.charAt(0)==="r"?Vb(t):$b(t)}class wi{constructor(e){if(e instanceof wi)return e;const n=typeof e;let r;n==="object"?r=Fh(e):n==="string"&&(r=Pb(e)||Wb(e)||Gb(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=jm(this._rgb);return e&&(e.a=Jt(e.a)),e}set rgb(e){this._rgb=Fh(e)}rgbString(){return this._valid?qb(this._rgb):void 0}hexString(){return this._valid?Nb(this._rgb):void 0}hslString(){return this._valid?Ub(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Kb(this._rgb,e._rgb,n)),this}clone(){return new wi(this.rgb)}alpha(e){return this._rgb.a=Nn(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ai(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return so(this._rgb,2,e),this}darken(e){return so(this._rgb,2,-e),this}saturate(e){return so(this._rgb,1,e),this}desaturate(e){return so(this._rgb,1,-e),this}rotate(e){return Fb(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ht(){}const Yb=(()=>{let t=0;return()=>t++})();function ae(t){return t==null}function Ie(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ee(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function xt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Lt(t,e){return xt(t)?t:e}function G(t,e){return typeof t>"u"?e:t}const Jb=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Pm=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ue(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function te(t,e,n,r){let s,i,o;if(Ie(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ee(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function ia(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function oa(t){if(Ie(t))return t.map(oa);if(ee(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=oa(t[n[s]]);return e}return t}function Rm(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Xb(t,e,n,r){if(!Rm(t))return;const s=e[t],i=n[t];ee(s)&&ee(i)?bi(s,i,r):e[t]=oa(i)}function bi(t,e,n){const r=Ie(e)?e:[e],s=r.length;if(!ee(t))return t;n=n||{};const i=n.merger||Xb;let o;for(let a=0;a<s;++a){if(o=r[a],!ee(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)i(l[u],t,o,n)}return t}function qs(t,e){return bi(t,e,{merger:Qb})}function Qb(t,e,n){if(!Rm(t))return;const r=e[t],s=n[t];ee(r)&&ee(s)?qs(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=oa(s))}const Uh={"":t=>t,x:t=>t.x,y:t=>t.y};function Zb(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function ex(t){const e=Zb(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function xi(t,e){return(Uh[e]||(Uh[e]=ex(e)))(t)}function Vc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const aa=t=>typeof t<"u",Mn=t=>typeof t=="function",Bh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function tx(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const re=Math.PI,ye=2*re,nx=ye+re,la=Number.POSITIVE_INFINITY,rx=re/180,Te=re/2,Un=re/4,Wh=re*2/3,Nm=Math.log10,rs=Math.sign;function Ks(t,e,n){return Math.abs(t-e)<n}function Hh(t){const e=Math.round(t);t=Ks(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Nm(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function sx(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function ix(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ki(t){return!ix(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ox(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ax(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Zt(t){return t*(re/180)}function lx(t){return t*(180/re)}function Vh(t){if(!xt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Am(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*re&&(i+=ye),{angle:i,distance:s}}function Nu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ux(t,e){return(t-e+nx)%ye-re}function Pt(t){return(t%ye+ye)%ye}function Si(t,e,n,r){const s=Pt(t),i=Pt(e),o=Pt(n),a=Pt(i-s),l=Pt(o-s),u=Pt(s-i),c=Pt(s-o);return s===i||s===o||r&&i===o||a>l&&u<c}function We(t,e,n){return Math.max(e,Math.min(n,t))}function cx(t){return We(t,-32768,32767)}function $r(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function qc(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const tr=(t,e,n,r)=>qc(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),dx=(t,e,n)=>qc(t,n,r=>t[r][e]>=n);function hx(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Im=["push","pop","shift","splice","unshift"];function fx(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Im.forEach(n=>{const r="_onData"+Vc(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function qh(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Im.forEach(i=>{delete t[i]}),delete t._chartjs)}function px(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Mm=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Dm(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Mm.call(window,()=>{r=!1,t.apply(e,n)}))}}function gx(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Lm=t=>t==="start"?"left":t==="end"?"right":"center",st=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,mx=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function vx(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:h,max:d,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(s=Math.min(tr(l,c,h).lo,n?r:tr(e,c,o.getPixelForValue(h)).lo),u){const y=l.slice(0,s+1).reverse().findIndex(w=>!ae(w[a.axis]));s-=Math.max(0,y)}s=We(s,0,r-1)}if(g){let y=Math.max(tr(l,o.axis,d,!0).hi+1,n?0:tr(e,c,o.getPixelForValue(d),!0).hi+1);if(u){const w=l.slice(y-1).findIndex(m=>!ae(m[a.axis]));y+=Math.max(0,w)}i=We(y,s,r)-s}else i=r-s}return{start:s,count:i}}function yx(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const io=t=>t===0||t===1,Kh=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ye/n)),Gh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ye/n)+1,Gs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Te)+1,easeOutSine:t=>Math.sin(t*Te),easeInOutSine:t=>-.5*(Math.cos(re*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>io(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>io(t)?t:Kh(t,.075,.3),easeOutElastic:t=>io(t)?t:Gh(t,.075,.3),easeInOutElastic(t){return io(t)?t:t<.5?.5*Kh(t*2,.1125,.45):.5+.5*Gh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Gs.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Gs.easeInBounce(t*2)*.5:Gs.easeOutBounce(t*2-1)*.5+.5};function Kc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Yh(t){return Kc(t)?t:new wi(t)}function _l(t){return Kc(t)?t:new wi(t).saturate(.5).darken(.1).hexString()}const _x=["x","y","borderWidth","radius","tension"],wx=["color","borderColor","backgroundColor"];function bx(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:wx},numbers:{type:"number",properties:_x}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xx(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Jh=new Map;function kx(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Jh.get(n);return r||(r=new Intl.NumberFormat(t,e),Jh.set(n,r)),r}function Gc(t,e,n){return kx(e,n).format(t)}const Sx={values(t){return Ie(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=Ex(t,n)}const o=Nm(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Gc(t,r,l)}};function Ex(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var zm={formatters:Sx};function Cx(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const cr=Object.create(null),Au=Object.create(null);function Ys(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function wl(t,e,n){return typeof e=="string"?bi(Ys(t,e),n):bi(Ys(t,""),e)}class Tx{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>_l(s.backgroundColor),this.hoverBorderColor=(r,s)=>_l(s.borderColor),this.hoverColor=(r,s)=>_l(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return wl(this,e,n)}get(e){return Ys(this,e)}describe(e,n){return wl(Au,e,n)}override(e,n){return wl(cr,e,n)}route(e,n,r,s){const i=Ys(this,e),o=Ys(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[s];return ee(l)?Object.assign({},u,l):G(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var we=new Tx({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[bx,xx,Cx]);function Ox(t){return!t||ae(t.size)||ae(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Xh(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Bn(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Qh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Iu(t,e,n,r){$m(t,e,n,r,null)}function $m(t,e,n,r,s){let i,o,a,l,u,c,h,d;const f=e.pointStyle,g=e.rotation,y=e.radius;let w=(g||0)*rx;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,y,0,0,ye):t.arc(n,r,y,0,ye),t.closePath();break;case"triangle":c=s?s/2:y,t.moveTo(n+Math.sin(w)*c,r-Math.cos(w)*y),w+=Wh,t.lineTo(n+Math.sin(w)*c,r-Math.cos(w)*y),w+=Wh,t.lineTo(n+Math.sin(w)*c,r-Math.cos(w)*y),t.closePath();break;case"rectRounded":u=y*.516,l=y-u,o=Math.cos(w+Un)*l,h=Math.cos(w+Un)*(s?s/2-u:l),a=Math.sin(w+Un)*l,d=Math.sin(w+Un)*(s?s/2-u:l),t.arc(n-h,r-a,u,w-re,w-Te),t.arc(n+d,r-o,u,w-Te,w),t.arc(n+h,r+a,u,w,w+Te),t.arc(n-d,r+o,u,w+Te,w+re),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,c=s?s/2:l,t.rect(n-c,r-l,2*c,2*l);break}w+=Un;case"rectRot":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":w+=Un;case"cross":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),w+=Un,h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=s?s/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(s?s/2:y),r+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ei(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jc(t){t.restore()}function jx(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Px(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Rx(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ae(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Nx(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,c=s.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,c),t.lineTo(a,c),t.stroke()}}function Ax(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ua(t,e,n,r,s,i={}){const o=Ie(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=s.string,Rx(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&Ax(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ae(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),Nx(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function Mu(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*re,re,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,re,Te,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Te,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Te,!0),t.lineTo(n+o.topLeft,r)}const Ix=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dx(t,e){const n=(""+t).match(Ix);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Lx=t=>+t||0;function Xc(t,e){const n={},r=ee(e),s=r?Object.keys(e):e,i=ee(t)?r?o=>G(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Lx(i(o));return n}function zx(t){return Xc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Js(t){return Xc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Mt(t){const e=zx(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xe(t,e){t=t||{},e=e||we.font;let n=G(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=G(t.style,e.style);r&&!(""+r).match(Mx)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:G(t.family,e.family),lineHeight:Dx(G(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:G(t.weight,e.weight),string:""};return s.string=Ox(s),s}function oo(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function $x(t,e,n){const{min:r,max:s}=t,i=Pm(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function fr(t,e){return Object.assign(Object.create(t),e)}function Qc(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Wm("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Qc([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Um(a,l,()=>Kx(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ef(a).includes(l)},ownKeys(a){return ef(a)},set(a,l,u){const c=a._storage||(a._storage=s());return a[l]=c[l]=u,delete a._keys,!0}})}function ss(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Fm(t,r),setContext:i=>ss(t,i,n,r),override:i=>ss(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return Um(i,o,()=>Ux(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Fm(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Mn(n)?n:()=>n,isIndexable:Mn(r)?r:()=>r}}const Fx=(t,e)=>t?t+Vc(e):e,Zc=(t,e)=>ee(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Um(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Ux(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Mn(a)&&o.isScriptable(e)&&(a=Bx(e,a,t,n)),Ie(a)&&a.length&&(a=Wx(e,a,t,o.isIndexable)),Zc(e,a)&&(a=ss(a,s,i&&i[e],o)),a}function Bx(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Zc(t,l)&&(l=ed(s._scopes,s,t,l)),l}function Wx(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ee(e[0])){const l=e,u=s._scopes.filter(c=>c!==l);e=[];for(const c of l){const h=ed(u,s,t,c);e.push(ss(h,i,o&&o[t],a))}}return e}function Bm(t,e,n){return Mn(t)?t(e,n):t}const Hx=(t,e)=>t===!0?e:typeof t=="string"?xi(e,t):void 0;function Vx(t,e,n,r,s){for(const i of e){const o=Hx(n,i);if(o){t.add(o);const a=Bm(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ed(t,e,n,r){const s=e._rootScopes,i=Bm(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Zh(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Zh(a,o,i,l,r),l===null)?!1:Qc(Array.from(a),[""],s,i,()=>qx(e,n,r))}function Zh(t,e,n,r,s){for(;n;)n=Vx(t,e,n,r,s);return n}function qx(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ie(s)&&ee(n)?n:s||{}}function Kx(t,e,n,r){let s;for(const i of e)if(s=Wm(Fx(i,t),n),typeof s<"u")return Zc(t,s)?ed(n,r,t,s):s}function Wm(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function ef(t){let e=t._keys;return e||(e=t._keys=Gx(t._scopes)),e}function Gx(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const Yx=Number.EPSILON||1e-14,is=(t,e)=>e<t.length&&!t[e].skip&&t[e],Hm=t=>t==="x"?"y":"x";function Jx(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Nu(i,s),l=Nu(o,i);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=r*u,d=r*c;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+d*(o.x-s.x),y:i.y+d*(o.y-s.y)}}}function Xx(t,e,n){const r=t.length;let s,i,o,a,l,u=is(t,0);for(let c=0;c<r-1;++c)if(l=u,u=is(t,c+1),!(!l||!u)){if(Ks(e[c],0,Yx)){n[c]=n[c+1]=0;continue}s=n[c]/e[c],i=n[c+1]/e[c],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[c]=s*o*e[c],n[c+1]=i*o*e[c])}}function Qx(t,e,n="x"){const r=Hm(n),s=t.length;let i,o,a,l=is(t,0);for(let u=0;u<s;++u){if(o=a,a=l,l=is(t,u+1),!a)continue;const c=a[n],h=a[r];o&&(i=(c-o[n])/3,a[`cp1${n}`]=c-i,a[`cp1${r}`]=h-i*e[u]),l&&(i=(l[n]-c)/3,a[`cp2${n}`]=c+i,a[`cp2${r}`]=h+i*e[u])}}function Zx(t,e="x"){const n=Hm(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,u=is(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=is(t,o+1),!!l){if(u){const c=u[e]-l[e];s[o]=c!==0?(u[n]-l[n])/c:0}i[o]=a?u?rs(s[o-1])!==rs(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Xx(t,s,i),Qx(t,i,e)}function ao(t,e,n){return Math.max(Math.min(t,n),e)}function ek(t,e){let n,r,s,i,o,a=Ei(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Ei(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=ao(s.cp1x,e.left,e.right),s.cp1y=ao(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=ao(s.cp2x,e.left,e.right),s.cp2y=ao(s.cp2y,e.top,e.bottom)))}function tk(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Zx(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=Jx(u,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&ek(t,n)}function td(){return typeof window<"u"&&typeof document<"u"}function nd(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ca(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Aa=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function nk(t,e){return Aa(t).getPropertyValue(e)}const rk=["top","right","bottom","left"];function sr(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=rk[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const sk=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ik(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(sk(s,i,t.target))a=s,l=i;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Kn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Aa(n),i=s.boxSizing==="border-box",o=sr(s,"padding"),a=sr(s,"border","width"),{x:l,y:u,box:c}=ik(t,n),h=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:g}=e;return i&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((u-d)/g*n.height/r)}}function ok(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&nd(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Aa(i),l=sr(a,"border","width"),u=sr(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=ca(a.maxWidth,i,"clientWidth"),s=ca(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||la,maxHeight:s||la}}const xn=t=>Math.round(t*10)/10;function ak(t,e,n,r){const s=Aa(t),i=sr(s,"margin"),o=ca(s.maxWidth,t,"clientWidth")||la,a=ca(s.maxHeight,t,"clientHeight")||la,l=ok(t,e,n);let{width:u,height:c}=l;if(s.boxSizing==="content-box"){const d=sr(s,"border","width"),f=sr(s,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-i.width),c=Math.max(0,r?u/r:c-i.height),u=xn(Math.min(u,o,l.maxWidth)),c=xn(Math.min(c,a,l.maxHeight)),u&&!c&&(c=xn(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,u=xn(Math.floor(c*r))),{width:u,height:c}}function tf(t,e,n){const r=e||1,s=xn(t.height*r),i=xn(t.width*r);t.height=xn(t.height),t.width=xn(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const lk=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};td()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function nf(t,e){const n=nk(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gn(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function uk(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ck(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Gn(t,s,n),a=Gn(s,i,n),l=Gn(i,e,n),u=Gn(o,a,n),c=Gn(a,l,n);return Gn(u,c,n)}const dk=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},hk=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Gr(t,e,n){return t?dk(e,n):hk()}function Vm(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function qm(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Km(t){return t==="angle"?{between:Si,compare:ux,normalize:Pt}:{between:$r,compare:(e,n)=>e-n,normalize:e=>e}}function rf({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function fk(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Km(r),l=e.length;let{start:u,end:c,loop:h}=t,d,f;if(h){for(u+=l,c+=l,d=0,f=l;d<f&&o(a(e[u%l][r]),s,i);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:t.style}}function pk(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:u}=Km(r),{start:c,end:h,loop:d,style:f}=fk(t,e,n),g=[];let y=!1,w=null,m,v,_;const b=()=>l(s,_,m)&&a(s,_)!==0,x=()=>a(i,m)===0||l(i,_,m),S=()=>y||b(),E=()=>!y||x();for(let C=c,P=c;C<=h;++C)v=e[C%o],!v.skip&&(m=u(v[r]),m!==_&&(y=l(m,s,i),w===null&&S()&&(w=a(m,s)===0?C:P),w!==null&&E()&&(g.push(rf({start:w,end:C,loop:d,count:o,style:f})),w=null),P=C,_=m));return w!==null&&g.push(rf({start:w,end:h,loop:d,count:o,style:f})),g}function gk(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=pk(r[s],t.points,e);i.length&&n.push(...i)}return n}function mk(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function vk(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%s];u.skip||u.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function yk(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=mk(n,s,i,r);if(r===!0)return sf(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return sf(t,vk(n,o,l,u),n,e)}function sf(t,e,n,r){return!r||!r.setContext||!n?e:_k(t,e,n,r)}function _k(t,e,n,r){const s=t._chart.getContext(),i=of(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let c=i,h=e[0].start,d=h;function f(g,y,w,m){const v=a?-1:1;if(g!==y){for(g+=l;n[g%l].skip;)g-=v;for(;n[y%l].skip;)y+=v;g%l!==y%l&&(u.push({start:g%l,end:y%l,loop:w,style:m}),c=m,h=y%l)}}for(const g of e){h=a?h:g.start;let y=n[h%l],w;for(d=h+1;d<=g.end;d++){const m=n[d%l];w=of(r.setContext(fr(s,{type:"segment",p0:y,p1:m,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),wk(w,c)&&f(h,d-1,g.loop,c),y=m,c=w}h<d-1&&f(h,d-1,g.loop,c)}return u}function of(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function wk(t,e){if(!e)return!1;const n=[],r=function(s,i){return Kc(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function lo(t,e,n){return t.options.clip?t[n]:e[n]}function bk(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:lo(n,e,"left"),right:lo(n,e,"right"),top:lo(r,e,"top"),bottom:lo(r,e,"bottom")}:e}function xk(t,e){const n=e._clip;if(n.disabled)return!1;const r=bk(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class kk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Mm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vt=new kk;const af="transparent",Sk={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Yh(t||af),s=r.valid&&Yh(e||af);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ek{constructor(e,n,r,s){const i=n[r];s=oo([e.to,s,i,e.from]);const o=oo([e.from,i,s]);this._active=!0,this._fn=e.fn||Sk[e.type||typeof o],this._easing=Gs[e.easing]||Gs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=oo([e.to,n,s,e.from]),this._from=oo([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Gm{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ee(e))return;const n=Object.keys(we.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ee(i))return;const o={};for(const a of n)o[a]=i[a];(Ie(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Tk(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Ck(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const c=n[u];let h=i[u];const d=r.get(u);if(h)if(d&&h.active()){h.update(d,c,a);continue}else h.cancel();if(!d||!d.duration){e[u]=c;continue}i[u]=h=new Ek(d,e,u,c),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Vt.add(this._chart,r),!0}}function Ck(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Tk(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lf(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function Ok(t,e,n){if(n===!1)return!1;const r=lf(t,n),s=lf(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function jk(t){let e,n,r,s;return ee(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Ym(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function uf(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,u;if(e===null)return;let c=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(c=!0,r.all)continue;break}u=t.values[l],xt(u)&&(i||e===0||rs(e)===rs(u))&&(e+=u)}return!c&&!r.all?0:e}function Pk(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[s]:c,[i]:t[c]};return a}function bl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Rk(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Nk(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Ak(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function cf(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function df(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,u=o.axis,c=Rk(i,o,r),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:y,[u]:w}=g,m=g._stacks||(g._stacks={});d=m[u]=Ak(s,c,y),d[a]=w,d._top=cf(d,o,!0,r.type),d._bottom=cf(d,o,!1,r.type);const v=d._visualValues||(d._visualValues={});v[a]=w}}function xl(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Ik(t,e){return fr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Mk(t,e,n){return fr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ys(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const kl=t=>t==="reset"||t==="none",hf=(t,e)=>e?t:Object.assign({},t),Dk=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ym(n,!0),values:null};class Yr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=bl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ys(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,i=n.xAxisID=G(r.xAxisID,xl(e,"x")),o=n.yAxisID=G(r.yAxisID,xl(e,"y")),a=n.rAxisID=G(r.rAxisID,xl(e,"r")),l=n.indexAxis,u=n.iAxisID=s(l,i,o,a),c=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&qh(this._data,this),e._stacked&&ys(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ee(n)){const s=this._cachedMeta;this._data=Pk(n,s)}else if(r!==n){if(r){qh(r,this);const s=this._cachedMeta;ys(s),s._parsed=[]}n&&Object.isExtensible(n)&&fx(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=bl(n.vScale,n),n.stack!==r.stack&&(s=!0,ys(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(df(this,n._parsed),n._stacked=bl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],c,h,d;if(this._parsing===!1)r._parsed=s,r._sorted=!0,d=s;else{Ie(s[e])?d=this.parseArrayData(r,s,e,n):ee(s[e])?d=this.parseObjectData(r,s,e,n):d=this.parsePrimitiveData(r,s,e,n);const f=()=>h[a]===null||u&&h[a]<u[a];for(c=0;c<n;++c)r._parsed[c+e]=h=d[c],l&&(f()&&(l=!1),u=h);r._sorted=l}o&&df(this,d)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),c=i===o,h=new Array(s);let d,f,g;for(d=0,f=s;d<f;++d)g=d+r,h[d]={[a]:c||i.parse(u[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,u,c,h;for(l=0,u=s;l<u;++l)c=l+r,h=n[c],a[l]={x:i.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let c,h,d,f;for(c=0,h=s;c<h;++c)d=c+r,f=n[d],u[c]={x:i.parse(xi(f,a),d),y:o.parse(xi(f,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Ym(s,!0),values:n._stacks[e.axis]._visualValues};return uf(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=uf(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Dk(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=Nk(a);let d,f;function g(){f=s[d];const y=f[a.axis];return!xt(f[e.axis])||c>y||h<y}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(u,e,f,l),i));++d);if(i){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(u,e,f,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],xt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=jk(G(this.options.clip,Ok(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,i,a,l),c=a;c<a+l;++c){const h=s[c];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(c=0;c<o.length;++c)o[c].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Mk(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Ik(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&aa(r);if(a)return hf(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),f=Object.keys(we.elements[e]),g=()=>this.getContext(r,s,n),y=u.resolveNamedOptions(d,f,g,h);return y.$shared&&(y.$shared=l,i[o]=Object.freeze(hf(y,l))),y}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,n),d=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(d,this.getContext(e,r,n))}const u=new Gm(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||kl(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){kl(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!kl(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&ys(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$(Yr,"defaults",{}),$(Yr,"datasetElementType",null),$(Yr,"dataElementType",null);function Lk(t,e,n){let r=1,s=1,i=0,o=0;if(e<ye){const a=t,l=a+e,u=Math.cos(a),c=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(_,b,x)=>Si(_,a,l,!0)?1:Math.max(b,b*n,x,x*n),g=(_,b,x)=>Si(_,a,l,!0)?-1:Math.min(b,b*n,x,x*n),y=f(0,u,h),w=f(Te,c,d),m=g(re,u,h),v=g(re+Te,c,d);r=(y-m)/2,s=(w-v)/2,i=-(y+m)/2,o=-(w+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class Ps extends Yr{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(ee(r[e])){const{key:l="value"}=this._parsing;i=u=>+xi(r[u],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Zt(this.options.rotation-90)}_getCircumference(){return Zt(this.options.circumference)}_getRotationExtents(){let e=ye,n=-ye;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Jb(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:y}=Lk(h,c,l),w=(r.width-o)/d,m=(r.height-o)/f,v=Math.max(Math.min(w,m)/2,0),_=Pm(this.options.radius,v),b=Math.max(_*l,0),x=(_-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=y*_,s.total=this.calculateTotal(),this.outerRadius=_-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/ye)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,c=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=i&&u.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(n,s);let m=this._getRotation(),v;for(v=0;v<n;++v)m+=this._circumference(v,i);for(v=n;v<n+r;++v){const _=this._circumference(v,i),b=e[v],x={x:c+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+_,circumference:_,outerRadius:g,innerRadius:f};w&&(x.options=y||this.resolveDataElementOptions(v,b.active?"active":s)),m+=_,this.updateElement(b,v,x,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ye*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=Gc(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(G(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$(Ps,"id","doughnut"),$(Ps,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$(Ps,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$(Ps,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const h=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:u}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Oo extends Yr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=vx(n,s,o);this._drawStart=a,this._drawCount=l,yx(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:g,segment:y}=this.options,w=ki(g)?g:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||s==="none",v=n+r,_=e.length;let b=n>0&&this.getParsed(n-1);for(let x=0;x<_;++x){const S=e[x],E=m?S:{};if(x<n||x>=v){E.skip=!0;continue}const C=this.getParsed(x),P=ae(C[f]),R=E[d]=o.getPixelForValue(C[d],x),L=E[f]=i||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[f],x);E.skip=isNaN(R)||isNaN(L)||P,E.stop=x>0&&Math.abs(C[d]-b[d])>w,y&&(E.parsed=C,E.raw=u.data[x]),h&&(E.options=c||this.resolveDataElementOptions(x,S.active?"active":s)),m||this.updateElement(S,x,E,s),b=C}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}$(Oo,"id","line"),$(Oo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$(Oo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Du extends Ps{}$(Du,"id","pie"),$(Du,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Wn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rd{constructor(e){$(this,"options");this.options=e||{}}static override(e){Object.assign(rd.prototype,e)}init(){}formats(){return Wn()}parse(){return Wn()}format(){return Wn()}add(){return Wn()}diff(){return Wn()}startOf(){return Wn()}endOf(){return Wn()}}var zk={_date:rd};function $k(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?dx:tr;if(r){if(s._sharedOptions){const c=i[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=u(i,e,n-h),f=u(i,e,n+h);return{lo:d.lo,hi:f.hi}}}}else{const c=u(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,c.lo+1).reverse().findIndex(y=>!ae(y[h.axis]));c.lo-=Math.max(0,f);const g=d.slice(c.hi).findIndex(y=>!ae(y[h.axis]));c.hi+=Math.max(0,g)}return c}}return{lo:0,hi:i.length-1}}function Ia(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:c}=i[a],{lo:h,hi:d}=$k(i[a],e,o,s);for(let f=h;f<=d;++f){const g=c[f];g.skip||r(g,u,f)}}}function Fk(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Sl(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Ia(t,n,e,function(a,l,u){!s&&!Ei(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function Uk(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:h}=Am(o,{x:e.x,y:e.y});Si(h,u,c)&&s.push({element:o,datasetIndex:a,index:l})}return Ia(t,n,e,i),s}function Bk(t,e,n,r,s,i){let o=[];const a=Fk(n);let l=Number.POSITIVE_INFINITY;function u(c,h,d){const f=c.inRange(e.x,e.y,s);if(r&&!f)return;const g=c.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!f)return;const w=a(e,g);w<l?(o=[{element:c,datasetIndex:h,index:d}],l=w):w===l&&o.push({element:c,datasetIndex:h,index:d})}return Ia(t,n,e,u),o}function El(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Uk(t,e,n,s):Bk(t,e,n,r,s,i)}function ff(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ia(t,n,e,(l,u,c)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Wk={modes:{index(t,e,n,r){const s=Kn(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Sl(t,s,i,r,o):El(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,n,r){const s=Kn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Sl(t,s,i,r,o):El(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(t,e,n,r){const s=Kn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Sl(t,s,i,r,o)},nearest(t,e,n,r){const s=Kn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return El(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Kn(e,t);return ff(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Kn(e,t);return ff(t,s,"y",n.intersect,r)}}};const Jm=["left","top","right","bottom"];function _s(t,e){return t.filter(n=>n.pos===e)}function pf(t,e){return t.filter(n=>Jm.indexOf(n.pos)===-1&&n.box.axis===e)}function ws(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Hk(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function Vk(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Jm.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function qk(t,e){const n=Vk(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=c?c*s:l&&e.availableHeight)}return n}function Kk(t){const e=Hk(t),n=ws(e.filter(u=>u.box.fullSize),!0),r=ws(_s(e,"left"),!0),s=ws(_s(e,"right")),i=ws(_s(e,"top"),!0),o=ws(_s(e,"bottom")),a=pf(e,"x"),l=pf(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:_s(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function gf(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Xm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Gk(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ee(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&Xm(o,i.getPadding());const a=Math.max(0,e.outerWidth-gf(o,t,"left","right")),l=Math.max(0,e.outerHeight-gf(o,t,"top","bottom")),u=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function Yk(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Jk(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Rs(t,e,n,r){const s=[];let i,o,a,l,u,c;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,Jk(a.horizontal,e));const{same:h,other:d}=Gk(e,n,a,r);u|=h&&s.length,c=c||d,l.fullSize||s.push(a)}return u&&Rs(s,e,n,r)||c}function uo(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function mf(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*c,d=u.size||l.height;aa(u.start)&&(o=u.start),l.fullSize?uo(l,s.left,o,n.outerWidth-s.right-s.left,d):uo(l,e.left+u.placed,o,h,d),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*c,d=u.size||l.width;aa(u.start)&&(i=u.start),l.fullSize?uo(l,i,s.top,d,n.outerHeight-s.bottom-s.top):uo(l,i,e.top+u.placed,d,h),u.start=i,u.placed+=h,i=l.right}}e.x=i,e.y=o}var kn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Mt(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=Kk(t.boxes),l=a.vertical,u=a.horizontal;te(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const c=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},s);Xm(d,Mt(r));const f=Object.assign({maxPadding:d,w:i,h:o,x:s.left,y:s.top},s),g=qk(l.concat(u),h);Rs(a.fullSize,f,h,g),Rs(l,f,h,g),Rs(u,f,h,g)&&Rs(l,f,h,g),Yk(f),mf(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,mf(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},te(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Qm{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Xk extends Qm{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const jo="$chartjs",Qk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vf=t=>t===null||t==="";function Zk(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[jo]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vf(s)){const i=nf(t,"width");i!==void 0&&(t.width=i)}if(vf(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=nf(t,"height");i!==void 0&&(t.height=i)}return t}const Zm=lk?{passive:!0}:!1;function eS(t,e,n){t&&t.addEventListener(e,n,Zm)}function tS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Zm)}function nS(t,e){const n=Qk[t.type]||t.type,{x:r,y:s}=Kn(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function da(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function rS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||da(a.addedNodes,r),o=o&&!da(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function sS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||da(a.removedNodes,r),o=o&&!da(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ci=new Map;let yf=0;function e0(){const t=window.devicePixelRatio;t!==yf&&(yf=t,Ci.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function iS(t,e){Ci.size||window.addEventListener("resize",e0),Ci.set(t,e)}function oS(t){Ci.delete(t),Ci.size||window.removeEventListener("resize",e0)}function aS(t,e,n){const r=t.canvas,s=r&&nd(r);if(!s)return;const i=Dm((a,l)=>{const u=s.clientWidth;n(a,l),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||i(u,c)});return o.observe(s),iS(t,i),o}function Cl(t,e,n){n&&n.disconnect(),e==="resize"&&oS(t)}function lS(t,e,n){const r=t.canvas,s=Dm(i=>{t.ctx!==null&&n(nS(i,t))},t);return eS(r,e,s),s}class uS extends Qm{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Zk(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[jo])return!1;const r=n[jo].initial;["height","width"].forEach(i=>{const o=r[i];ae(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[jo],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:rS,detach:sS,resize:aS}[n]||lS;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Cl,detach:Cl,resize:Cl}[n]||tS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return ak(e,n,r,s)}isAttached(e){const n=e&&nd(e);return!!(n&&n.isConnected)}}function cS(t){return!td()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Xk:uS}class on{constructor(){$(this,"x");$(this,"y");$(this,"active",!1);$(this,"options");$(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return ki(this.x)&&ki(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}$(on,"defaults",{}),$(on,"defaultRoutes");function dS(t,e){const n=t.options.ticks,r=hS(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?pS(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>s)return gS(e,u,i,o/s),u;const c=fS(i,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(co(e,u,c,ae(f)?0:a-f,a),h=0,d=o-1;h<d;h++)co(e,u,c,i[h],i[h+1]);return co(e,u,c,l,ae(f)?e.length:l+f),u}return co(e,u,c),u}function hS(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function fS(t,e,n){const r=mS(t),s=e.length/n;if(!r)return Math.max(s,1);const i=sx(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function pS(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function gS(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function co(t,e,n,r,s){const i=G(r,0),o=Math.min(G(s,t.length),t.length);let a=0,l,u,c;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),c=i;c<0;)a++,c=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===c&&(e.push(t[u]),a++,c=Math.round(i+a*n))}function mS(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const vS=t=>t==="left"?"right":t==="right"?"left":t,_f=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,wf=(t,e)=>Math.min(e||t,t);function bf(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function yS(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(s-1))/2,l+=s<e?u:-u,l<i-a||l>o+a)))return l}function _S(t,e){te(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function bs(t){return t.drawTicks?t.tickLength:0}function xf(t,e){if(!t.display)return 0;const n=Xe(t.font,e),r=Mt(t.padding);return(Ie(t.text)?t.text.length:1)*n.lineHeight+r.height}function wS(t,e){return fr(t,{scale:e,type:"scale"})}function bS(t,e,n){return fr(t,{tick:n,index:e,type:"tick"})}function xS(t,e,n){let r=Lm(t);return(n&&e!=="right"||!n&&e==="right")&&(r=vS(r)),r}function kS(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:c}=l;let h=0,d,f,g;const y=o-s,w=a-i;if(t.isHorizontal()){if(f=st(r,i,a),ee(n)){const m=Object.keys(n)[0],v=n[m];g=c[m].getPixelForValue(v)+y-e}else n==="center"?g=(u.bottom+u.top)/2+y-e:g=_f(t,n,e);d=a-i}else{if(ee(n)){const m=Object.keys(n)[0],v=n[m];f=c[m].getPixelForValue(v)-w+e}else n==="center"?f=(u.left+u.right)/2-w+e:f=_f(t,n,e);g=st(r,o,s),h=n==="left"?-Te:Te}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class us extends on{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Lt(e,Number.POSITIVE_INFINITY),n=Lt(n,Number.NEGATIVE_INFINITY),r=Lt(r,Number.POSITIVE_INFINITY),s=Lt(s,Number.NEGATIVE_INFINITY),{min:Lt(e,r),max:Lt(n,s),minDefined:xt(e),maxDefined:xt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Lt(n,Lt(r,n)),max:Lt(r,Lt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ue(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$x(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=dS(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ue(this.options.afterUpdate,[this])}beforeSetDimensions(){ue(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ue(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ue(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ue(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=ue(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){ue(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ue(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=wf(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,f=We(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-bs(e.grid)-n.padding-xf(e.title,this.chart.options.font),u=Math.sqrt(h*h+d*d),o=lx(Math.min(Math.asin(We((c.highest.height+6)/a,-1,1)),Math.asin(We(l/u,-1,1))-Math.asin(We(d/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ue(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ue(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=xf(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=bs(i)+l):(e.height=this.maxHeight,e.width=bs(i)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:h,highest:d}=this._getLabelSizes(),f=r.padding*2,g=Zt(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(a){const m=r.mirror?0:w*h.width+y*d.height;e.height=Math.min(this.maxHeight,e.height+m+f)}else{const m=r.mirror?0:y*h.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+m+f)}this._calculatePadding(u,c,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?u?(d=s*e.width,f=r*n.height):(d=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let c=n.height/2,h=e.height/2;i==="start"?(c=0,h=e.height):i==="end"&&(c=n.height,h=0),this.paddingTop=c+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ue(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)ae(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=bf(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/wf(n,r));let u=0,c=0,h,d,f,g,y,w,m,v,_,b,x;for(h=0;h<n;h+=l){if(g=e[h].label,y=this._resolveTickFontOptions(h),s.font=w=y.string,m=i[w]=i[w]||{data:{},gc:[]},v=y.lineHeight,_=b=0,!ae(g)&&!Ie(g))_=Xh(s,m.data,m.gc,_,g),b=v;else if(Ie(g))for(d=0,f=g.length;d<f;++d)x=g[d],!ae(x)&&!Ie(x)&&(_=Xh(s,m.data,m.gc,_,x),b+=v);o.push(_),a.push(b),u=Math.max(_,u),c=Math.max(b,c)}_S(i,n);const S=o.indexOf(u),E=a.indexOf(c),C=P=>({width:o[P]||0,height:a[P]||0});return{first:C(0),last:C(n-1),widest:C(S),highest:C(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return cx(this._alignToPixels?Bn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=bS(this.getContext(),e,r))}return this.$context||(this.$context=wS(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Zt(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=bs(i),f=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,m=function(V){return Bn(r,V,y)};let v,_,b,x,S,E,C,P,R,L,W,J;if(o==="top")v=m(this.bottom),E=this.bottom-d,P=v-w,L=m(e.top)+w,J=e.bottom;else if(o==="bottom")v=m(this.top),L=e.top,J=m(e.bottom)-w,E=v+w,P=this.top+d;else if(o==="left")v=m(this.right),S=this.right-d,C=v-w,R=m(e.left)+w,W=e.right;else if(o==="right")v=m(this.left),R=e.left,W=m(e.right)-w,S=v+w,C=this.left+d;else if(n==="x"){if(o==="center")v=m((e.top+e.bottom)/2+.5);else if(ee(o)){const V=Object.keys(o)[0],Y=o[V];v=m(this.chart.scales[V].getPixelForValue(Y))}L=e.top,J=e.bottom,E=v+w,P=E+d}else if(n==="y"){if(o==="center")v=m((e.left+e.right)/2);else if(ee(o)){const V=Object.keys(o)[0],Y=o[V];v=m(this.chart.scales[V].getPixelForValue(Y))}S=v-w,C=S-d,R=e.left,W=e.right}const se=G(s.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/se));for(_=0;_<h;_+=H){const V=this.getContext(_),Y=i.setContext(V),T=a.setContext(V),k=Y.lineWidth,O=Y.color,A=T.dash||[],M=T.dashOffset,B=Y.tickWidth,q=Y.tickColor,ke=Y.tickBorderDash||[],X=Y.tickBorderDashOffset;b=yS(this,_,l),b!==void 0&&(x=Bn(r,b,k),u?S=C=R=W=x:E=P=L=J=x,f.push({tx1:S,ty1:E,tx2:C,ty2:P,x1:R,y1:L,x2:W,y2:J,width:k,color:O,borderDash:A,borderDashOffset:M,tickWidth:B,tickColor:q,tickBorderDash:ke,tickBorderDashOffset:X}))}return this._ticksLength=h,this._borderValue=v,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=i,d=bs(r.grid),f=d+c,g=h?-c:f,y=-Zt(this.labelRotation),w=[];let m,v,_,b,x,S,E,C,P,R,L,W,J="middle";if(s==="top")S=this.bottom-g,E=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+g,E=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(d);E=H.textAlign,x=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(d);E=H.textAlign,x=H.x}else if(n==="x"){if(s==="center")S=(e.top+e.bottom)/2+f;else if(ee(s)){const H=Object.keys(s)[0],V=s[H];S=this.chart.scales[H].getPixelForValue(V)+f}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")x=(e.left+e.right)/2-f;else if(ee(s)){const H=Object.keys(s)[0],V=s[H];x=this.chart.scales[H].getPixelForValue(V)}E=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?J="top":l==="end"&&(J="bottom"));const se=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){_=a[m],b=_.label;const H=i.setContext(this.getContext(m));C=this.getPixelForTick(m)+i.labelOffset,P=this._resolveTickFontOptions(m),R=P.lineHeight,L=Ie(b)?b.length:1;const V=L/2,Y=H.color,T=H.textStrokeColor,k=H.textStrokeWidth;let O=E;o?(x=C,E==="inner"&&(m===v-1?O=this.options.reverse?"left":"right":m===0?O=this.options.reverse?"right":"left":O="center"),s==="top"?u==="near"||y!==0?W=-L*R+R/2:u==="center"?W=-se.highest.height/2-V*R+R:W=-se.highest.height+R/2:u==="near"||y!==0?W=R/2:u==="center"?W=se.highest.height/2-V*R:W=se.highest.height-L*R,h&&(W*=-1),y!==0&&!H.showLabelBackdrop&&(x+=R/2*Math.sin(y))):(S=C,W=(1-L)*R/2);let A;if(H.showLabelBackdrop){const M=Mt(H.backdropPadding),B=se.heights[m],q=se.widths[m];let ke=W-M.top,X=0-M.left;switch(J){case"middle":ke-=B/2;break;case"bottom":ke-=B;break}switch(E){case"center":X-=q/2;break;case"right":X-=q;break;case"inner":m===v-1?X-=q:m>0&&(X-=q/2);break}A={left:X,top:ke,width:q+M.width,height:B+M.height,color:H.backdropColor}}w.push({label:b,font:P,textOffset:W,options:{rotation:y,color:Y,strokeColor:T,strokeWidth:k,textAlign:O,textBaseline:J,translation:[x,S],backdrop:A}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Zt(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,c;return n==="left"?s?(c=this.right+i,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?s?(c=this.left+i,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,h,d;this.isHorizontal()?(u=Bn(e,this.left,o)-o/2,c=Bn(e,this.right,a)+a/2,h=d=l):(h=Bn(e,this.top,o)-o/2,d=Bn(e,this.bottom,a)+a/2,u=c=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(c,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Yc(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,c=o.textOffset;ua(r,u,0,c,l,a)}s&&Jc(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Xe(r.font),o=Mt(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ee(n)?(l+=o.bottom,Ie(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:h,rotation:d}=kS(this,l,n,a);ua(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:d,textAlign:xS(a,n,s),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=G(e.grid&&e.grid.z,-1),s=G(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==us.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Xe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ho{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;CS(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,SS(e,o,r),this.override&&we.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in we[s]&&(delete we[s][r],this.override&&delete cr[r])}}function SS(t,e,n){const r=bi(Object.create(null),[n?we.get(n):{},we.get(e),t.defaults]);we.set(e,r),t.defaultRoutes&&ES(e,t.defaultRoutes),t.descriptors&&we.describe(e,t.descriptors)}function ES(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");we.route(i,s,l,a)})}function CS(t){return"id"in t&&"defaults"in t}class TS{constructor(){this.controllers=new ho(Yr,"datasets",!0),this.elements=new ho(on,"elements"),this.plugins=new ho(Object,"plugins"),this.scales=new ho(us,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):te(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Vc(e);ue(r["before"+s],[],r),n[e](r),ue(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Ft=new TS;class OS{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(ue(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=G(r.options&&r.options.plugins,{}),i=jS(r);return s===!1&&!n?[]:RS(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function jS(t){const e={},n=[],r=Object.keys(Ft.plugins.items);for(let i=0;i<r.length;i++)n.push(Ft.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function PS(t,e){return!e&&t===!1?null:t===!0?{}:t}function RS(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=PS(r[l],s);u!==null&&i.push({plugin:a,options:NS(t.config,{plugin:a,local:n[l]},u,o)})}return i}function NS(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lu(t,e){const n=we.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AS(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function IS(t,e){return t===e?"_index_":"_value_"}function kf(t){if(t==="x"||t==="y"||t==="r")return t}function MS(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function zu(t,...e){if(kf(t))return t;for(const n of e){const r=n.axis||MS(n.position)||t.length>1&&kf(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Sf(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function DS(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Sf(t,"x",n[0])||Sf(t,"y",n[0])}return{}}function LS(t,e){const n=cr[t.type]||{scales:{}},r=e.scales||{},s=Lu(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=zu(o,a,DS(o,t),we.scales[a.type]),u=IS(l,s),c=n.scales||{};i[o]=qs(Object.create(null),[{axis:l},a,c[l],c[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Lu(a,e),c=(cr[a]||{}).scales||{};Object.keys(c).forEach(h=>{const d=AS(h,l),f=o[d+"AxisID"]||d;i[f]=i[f]||Object.create(null),qs(i[f],[{axis:d},r[f],c[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];qs(a,[we.scales[a.type],we.scale])}),i}function t0(t){const e=t.options||(t.options={});e.plugins=G(e.plugins,{}),e.scales=LS(t,e)}function n0(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function zS(t){return t=t||{},t.data=n0(t.data),t0(t),t}const Ef=new Map,r0=new Set;function fo(t,e){let n=Ef.get(t);return n||(n=e(),Ef.set(t,n),r0.add(n)),n}const xs=(t,e,n)=>{const r=xi(e,n);r!==void 0&&t.add(r)};class $S{constructor(e){this._config=zS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=n0(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),t0(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return fo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return fo(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return fo(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return fo(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(c=>{e&&(l.add(e),c.forEach(h=>xs(l,e,h))),c.forEach(h=>xs(l,s,h)),c.forEach(h=>xs(l,cr[i]||{},h)),c.forEach(h=>xs(l,we,h)),c.forEach(h=>xs(l,Au,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),r0.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,cr[n]||{},we.datasets[n]||{},{type:n},we,Au]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Cf(this._resolverCache,e,s);let l=o;if(US(o,n)){i.$shared=!1,r=Mn(r)?r():r;const u=this.createResolver(e,r,a);l=ss(o,r,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Cf(this._resolverCache,e,r);return ee(n)?ss(i,n,void 0,s):i}}function Cf(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Qc(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const FS=t=>ee(t)&&Object.getOwnPropertyNames(t).some(e=>Mn(t[e]));function US(t,e){const{isScriptable:n,isIndexable:r}=Fm(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Mn(a)||FS(a))||o&&Ie(a))return!0}return!1}var BS="4.5.1";const WS=["top","bottom","left","right","chartArea"];function Tf(t,e){return t==="top"||t==="bottom"||WS.indexOf(t)===-1&&e==="x"}function Of(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function jf(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ue(n&&n.onComplete,[t],e)}function HS(t){const e=t.chart,n=e.options.animation;ue(n&&n.onProgress,[t],e)}function s0(t){return td()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Po={},Pf=t=>{const e=s0(t);return Object.values(Po).filter(n=>n.canvas===e).pop()};function VS(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function qS(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var hn;let Ma=(hn=class{static register(...e){Ft.add(...e),Rf()}static unregister(...e){Ft.remove(...e),Rf()}constructor(e,n){const r=this.config=new $S(n),s=s0(e),i=Pf(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||cS(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=Yb(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gx(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Po[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Vt.listen(this,"complete",jf),Vt.listen(this,"progress",HS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return ae(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ft}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qh(this.canvas,this.ctx),this}stop(){return Vt.stop(this),this}resize(e,n){Vt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,tf(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ue(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};te(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=zu(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),te(i,o=>{const a=o.options,l=a.id,u=zu(l,a),c=G(a.type,o.dtype);(a.position===void 0||Tf(a.position,u)!==Tf(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===c)h=r[l];else{const d=Ft.getScale(c);h=new d({id:l,type:c,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),te(s,(o,a)=>{o||delete r[a]}),te(r,o=>{kn.configure(this,o,o.options),kn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Of("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Lu(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Ft.getController(a),{datasetElementType:u,dataElementType:c}=we.datasets[a];Object.assign(l,{dataElementType:Ft.getElement(c),datasetElementType:u&&Ft.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){te(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:h}=this.getDatasetMeta(u),d=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||te(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Of("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){te(this.scales,e=>{kn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Bh(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;VS(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Bh(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;kn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],te(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Mn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vt.has(this)?this.attached&&!Vt.running(this)&&Vt.start(this):(this.draw(),jf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=xk(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Yc(n,s),e.controller.draw(),s&&Jc(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ei(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Wk.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);aa(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Vt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Qh(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Po[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};te(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},s=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){te(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},te(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!ia(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=tx(e),u=qS(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ue(i.onHover,[e,a,this],this),l&&ue(i.onClick,[e,a,this],this));const c=!ia(a,s);return(c||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,c}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},$(hn,"defaults",we),$(hn,"instances",Po),$(hn,"overrides",cr),$(hn,"registry",Ft),$(hn,"version",BS),$(hn,"getChart",Pf),hn);function Rf(){return te(Ma.instances,t=>t._plugins.invalidate())}function KS(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:c}=l,h=Math.min(u/o,Pt(r-n));if(t.beginPath(),t.arc(s,i,o-u/2,r+h/2,n-h/2),a>0){const d=Math.min(u/a,Pt(r-n));t.arc(s,i,a+u/2,n-d/2,r+d/2,!0)}else{const d=Math.min(u/2,o*Pt(r-n));if(c==="round")t.arc(s,i,d,n-re/2,r+re/2,!0);else if(c==="bevel"){const f=2*d*d,g=-f*Math.cos(n+re/2)+s,y=-f*Math.sin(n+re/2)+i,w=f*Math.cos(r+re/2)+s,m=f*Math.sin(r+re/2)+i;t.lineTo(g,y),t.lineTo(w,m)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function GS(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let u=s/a;t.beginPath(),t.arc(i,o,a,r-u,n+u),l>s?(u=s/l,t.arc(i,o,l,n+u,r-u,!0)):t.arc(i,o,s,n+Te,r-Te),t.closePath(),t.clip()}function YS(t){return Xc(t,["outerStart","outerEnd","innerStart","innerEnd"])}function JS(t,e,n,r){const s=YS(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const u=(n-Math.min(i,l))*r/2;return We(l,0,Math.min(i,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:We(s.innerStart,0,o),innerEnd:We(s.innerEnd,0,o)}}function xr(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ha(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,h=Math.max(e.outerRadius+r+n-u,0),d=c>0?c+r+n+u:0;let f=0;const g=s-l;if(r){const H=c>0?c-r:0,V=h>0?h-r:0,Y=(H+V)/2,T=Y!==0?g*Y/(Y+r):g;f=(g-T)/2}const y=Math.max(.001,g*h-n/re)/h,w=(g-y)/2,m=l+w+f,v=s-w-f,{outerStart:_,outerEnd:b,innerStart:x,innerEnd:S}=JS(e,d,h,v-m),E=h-_,C=h-b,P=m+_/E,R=v-b/C,L=d+x,W=d+S,J=m+x/L,se=v-S/W;if(t.beginPath(),i){const H=(P+R)/2;if(t.arc(o,a,h,P,H),t.arc(o,a,h,H,R),b>0){const k=xr(C,R,o,a);t.arc(k.x,k.y,b,R,v+Te)}const V=xr(W,v,o,a);if(t.lineTo(V.x,V.y),S>0){const k=xr(W,se,o,a);t.arc(k.x,k.y,S,v+Te,se+Math.PI)}const Y=(v-S/d+(m+x/d))/2;if(t.arc(o,a,d,v-S/d,Y,!0),t.arc(o,a,d,Y,m+x/d,!0),x>0){const k=xr(L,J,o,a);t.arc(k.x,k.y,x,J+Math.PI,m-Te)}const T=xr(E,m,o,a);if(t.lineTo(T.x,T.y),_>0){const k=xr(E,P,o,a);t.arc(k.x,k.y,_,m-Te,P)}}else{t.moveTo(o,a);const H=Math.cos(P)*h+o,V=Math.sin(P)*h+a;t.lineTo(H,V);const Y=Math.cos(R)*h+o,T=Math.sin(R)*h+a;t.lineTo(Y,T)}t.closePath()}function XS(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){ha(t,e,n,r,l,s);for(let u=0;u<i;++u)t.fill();isNaN(a)||(l=o+(a%ye||ye))}return ha(t,e,n,r,l,s),t.fill(),l}function QS(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:h,borderDashOffset:d,borderRadius:f}=l,g=l.borderAlign==="inner";if(!u)return;t.setLineDash(h||[]),t.lineDashOffset=d,g?(t.lineWidth=u*2,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel");let y=e.endAngle;if(i){ha(t,e,n,r,y,s);for(let w=0;w<i;++w)t.stroke();isNaN(a)||(y=o+(a%ye||ye))}g&&GS(t,e,y),l.selfJoin&&y-o>=re&&f===0&&c!=="miter"&&KS(t,e,y),i||(ha(t,e,n,r,y,s),t.stroke())}class Ns extends on{constructor(n){super();$(this,"circumference");$(this,"endAngle");$(this,"fullCircles");$(this,"innerRadius");$(this,"outerRadius");$(this,"pixelMargin");$(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=Am(i,{x:n,y:r}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=G(d,u-l),y=Si(o,l,u)&&l!==u,w=g>=ye||y,m=$r(a,c+f,h+f);return w&&m}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:c}=this.options,h=(i+o)/2,d=(a+l+c+u)/2;return{x:r+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>ye?Math.floor(s/ye):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(re,s||0)),c=i*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,XS(n,this,c,o,a),QS(n,this,c,o,a),n.restore()}}$(Ns,"id","arc"),$(Ns,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),$(Ns,"defaultRoutes",{backgroundColor:"backgroundColor"}),$(Ns,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function i0(t,e,n=e){t.lineCap=G(n.borderCapStyle,e.borderCapStyle),t.setLineDash(G(n.borderDash,e.borderDash)),t.lineDashOffset=G(n.borderDashOffset,e.borderDashOffset),t.lineJoin=G(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=G(n.borderWidth,e.borderWidth),t.strokeStyle=G(n.borderColor,e.borderColor)}function ZS(t,e,n){t.lineTo(n.x,n.y)}function e1(t){return t.stepped?jx:t.tension||t.cubicInterpolationMode==="monotone"?Px:ZS}function o0(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),u=Math.min(i,a),c=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!c?r+u-l:u-l}}function t1(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:u}=o0(s,n,r),c=e1(i);let{move:h=!0,reverse:d}=r||{},f,g,y;for(f=0;f<=u;++f)g=s[(a+(d?u-f:f))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):c(t,y,g,d,i.stepped),y=g);return l&&(g=s[(a+(d?u:0))%o],c(t,y,g,d,i.stepped)),!!l}function n1(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=o0(s,n,r),{move:l=!0,reverse:u}=r||{};let c=0,h=0,d,f,g,y,w,m;const v=b=>(o+(u?a-b:b))%i,_=()=>{y!==w&&(t.lineTo(c,w),t.lineTo(c,y),t.lineTo(c,m))};for(l&&(f=s[v(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[v(d)],f.skip)continue;const b=f.x,x=f.y,S=b|0;S===g?(x<y?y=x:x>w&&(w=x),c=(h*c+b)/++h):(_(),t.lineTo(b,x),g=S,h=0,y=w=x),m=x}_()}function $u(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?n1:t1}function r1(t){return t.stepped?uk:t.tension||t.cubicInterpolationMode==="monotone"?ck:Gn}function s1(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),i0(t,e.options),t.stroke(s)}function i1(t,e,n,r){const{segments:s,options:i}=e,o=$u(e);for(const a of s)i0(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const o1=typeof Path2D=="function";function a1(t,e,n,r){o1&&!e.options.segment?s1(t,e,n,r):i1(t,e,n,r)}class As extends on{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;tk(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=yk(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=gk(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=r1(r);let u,c;for(u=0,c=o.length;u<c;++u){const{start:h,end:d}=o[u],f=i[h],g=i[d];if(f===g){a.push(f);continue}const y=Math.abs((s-f[n])/(g[n]-f[n])),w=l(f,g,y,r.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,r){return $u(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=$u(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),a1(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$(As,"id","line"),$(As,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$(As,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$(As,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Nf(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ro extends on{constructor(n){super();$(this,"parsed");$(this,"skip");$(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Nf(this,n,"x",r)}inYRange(n,r){return Nf(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Ei(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Iu(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}$(Ro,"id","point"),$(Ro,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$(Ro,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Af=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},l1=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class If extends on{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ue(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Xe(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Af(r,i);let u,c;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,i,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((g,y)=>{const w=r+n/2+i.measureText(g.text).width;(y===0||u[u.length-1]+w+2*a>o)&&(h+=c,u[u.length-(y>0?0:1)]=0,f+=c,d++),l[y]={left:0,top:f,row:d,width:w,height:s},u[u.length-1]+=w+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let h=a,d=0,f=0,g=0,y=0;return this.legendItems.forEach((w,m)=>{const{itemWidth:v,itemHeight:_}=u1(r,n,i,w,s);m>0&&f+_+2*a>c&&(h+=d+a,u.push({width:d,height:f}),g+=d+a,y++,d=f=0),l[m]={left:g,top:f,col:y,width:v,height:_},d=Math.max(d,v),f+=_+a}),h+=d,u.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Gr(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=st(r,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=st(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=st(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=st(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yc(e,this),this._draw(),Jc(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=we.color,l=Gr(e.rtl,this.left,this.width),u=Xe(o.font),{padding:c}=o,h=u.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=Af(o,h),m=function(S,E,C){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;s.save();const P=G(C.lineWidth,1);if(s.fillStyle=G(C.fillStyle,a),s.lineCap=G(C.lineCap,"butt"),s.lineDashOffset=G(C.lineDashOffset,0),s.lineJoin=G(C.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=G(C.strokeStyle,a),s.setLineDash(G(C.lineDash,[])),o.usePointStyle){const R={radius:y*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:P},L=l.xPlus(S,g/2),W=E+d;$m(s,R,L,W,o.pointStyleWidth&&g)}else{const R=E+Math.max((h-y)/2,0),L=l.leftForLtr(S,g),W=Js(C.borderRadius);s.beginPath(),Object.values(W).some(J=>J!==0)?Mu(s,{x:L,y:R,w:g,h:y,radius:W}):s.rect(L,R,g,y),s.fill(),P!==0&&s.stroke()}s.restore()},v=function(S,E,C){ua(s,C.text,S,E+w/2,u,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?f={x:st(i,this.left+c,this.right-r[0]),y:this.top+c+b,line:0}:f={x:this.left+c,y:st(i,this.top+b+c,this.bottom-n[0].height),line:0},Vm(this.ctx,e.textDirection);const x=w+c;this.legendItems.forEach((S,E)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const C=s.measureText(S.text).width,P=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),R=g+d+C;let L=f.x,W=f.y;l.setWidth(this.width),_?E>0&&L+R+c>this.right&&(W=f.y+=x,f.line++,L=f.x=st(i,this.left+c,this.right-r[f.line])):E>0&&W+x>this.bottom&&(L=f.x=L+n[f.line].width+c,f.line++,W=f.y=st(i,this.top+b+c,this.bottom-n[f.line].height));const J=l.x(L);if(m(J,W,S),L=mx(P,L+g+d,_?L+R:this.right,e.rtl),v(l.x(L),W,S),_)f.x+=R+c;else if(typeof S.text!="string"){const se=u.lineHeight;f.y+=a0(S,se)+c}else f.y+=x}),qm(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Xe(n.font),s=Mt(n.padding);if(!n.display)return;const i=Gr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=s.top+l;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,h=st(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);c=u+st(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=st(a,h,h+d);o.textAlign=i.textAlign(Lm(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ua(o,n.text,f,c,r)}_computeTitleHeight(){const e=this.options.title,n=Xe(e.font),r=Mt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if($r(e,this.left,this.right)&&$r(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],$r(e,s.left,s.left+s.width)&&$r(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!h1(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=l1(s,r);s&&!i&&ue(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&ue(n.onHover,[e,r,this],this)}else r&&ue(n.onClick,[e,r,this],this)}}function u1(t,e,n,r,s){const i=c1(r,t,e,n),o=d1(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function c1(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function d1(t,e,n){let r=t;return typeof e.text!="string"&&(r=a0(e,n)),r}function a0(t,e){const n=t.text?t.text.length:0;return e*n}function h1(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var f1={id:"legend",_element:If,start(t,e,n){const r=t.legend=new If({ctx:t.ctx,options:n,chart:t});kn.configure(t,r,n),kn.addBox(t,r)},stop(t){kn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;kn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),c=Mt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Is={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=Nu(e,u);c<s&&(s=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zt(t,e){return e&&(Ie(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function p1(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Mf(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Xe(e.bodyFont),u=Xe(e.titleFont),c=Xe(e.footerFont),h=i.length,d=s.length,f=r.length,g=Mt(e.padding);let y=g.height,w=0,m=r.reduce((b,x)=>b+x.before.length+x.lines.length+x.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),m){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*b+(m-f)*l.lineHeight+(m-1)*e.bodySpacing}d&&(y+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let v=0;const _=function(b){w=Math.max(w,n.measureText(b).width+v)};return n.save(),n.font=u.string,te(t.title,_),n.font=l.string,te(t.beforeBody.concat(t.afterBody),_),v=e.displayColors?o+2+e.boxPadding:0,te(r,b=>{te(b.before,_),te(b.lines,_),te(b.after,_)}),v=0,n.font=c.string,te(t.footer,_),n.restore(),w+=g.width,{width:w,height:y}}function g1(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function m1(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function v1(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=s<=(a+l)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),m1(u,t,e,n)&&(u="center"),u}function Df(t,e,n){const r=n.yAlign||e.yAlign||g1(t,n);return{xAlign:n.xAlign||e.xAlign||v1(t,e,n,r),yAlign:r}}function y1(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function _1(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Lf(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=s+i,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Js(o);let g=y1(e,a);const y=_1(e,l,u);return l==="center"?a==="left"?g+=u:a==="right"&&(g-=u):a==="left"?g-=Math.max(c,d)+s:a==="right"&&(g+=Math.max(h,f)+s),{x:We(g,0,r.width-e.width),y:We(y,0,r.height-e.height)}}function po(t,e,n){const r=Mt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function zf(t){return zt([],qt(t))}function w1(t,e,n){return fr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $f(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const l0={beforeTitle:Ht,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ht,beforeBody:Ht,beforeLabel:Ht,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ae(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ht,afterBody:Ht,beforeFooter:Ht,footer:Ht,afterFooter:Ht};function Ke(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?l0[e].call(n,r):s}class Fu extends on{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Gm(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=w1(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ke(r,"beforeTitle",this,e),i=Ke(r,"title",this,e),o=Ke(r,"afterTitle",this,e);let a=[];return a=zt(a,qt(s)),a=zt(a,qt(i)),a=zt(a,qt(o)),a}getBeforeBody(e,n){return zf(Ke(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return te(e,i=>{const o={before:[],lines:[],after:[]},a=$f(r,i);zt(o.before,qt(Ke(a,"beforeLabel",this,i))),zt(o.lines,Ke(a,"label",this,i)),zt(o.after,qt(Ke(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return zf(Ke(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ke(r,"beforeFooter",this,e),i=Ke(r,"footer",this,e),o=Ke(r,"afterFooter",this,e);let a=[];return a=zt(a,qt(s)),a=zt(a,qt(i)),a=zt(a,qt(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(p1(this.chart,n[l]));return e.filter&&(a=a.filter((c,h,d)=>e.filter(c,h,d,r))),e.itemSort&&(a=a.sort((c,h)=>e.itemSort(c,h,r))),te(a,c=>{const h=$f(e.callbacks,c);s.push(Ke(h,"labelColor",this,c)),i.push(Ke(h,"labelPointStyle",this,c)),o.push(Ke(h,"labelTextColor",this,c))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Is[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Mf(this,r),u=Object.assign({},a,l),c=Df(this.chart,r,u),h=Lf(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=Js(a),{x:d,y:f}=e,{width:g,height:y}=n;let w,m,v,_,b,x;return i==="center"?(b=f+y/2,s==="left"?(w=d,m=w-o,_=b+o,x=b-o):(w=d+g,m=w+o,_=b-o,x=b+o),v=w):(s==="left"?m=d+Math.max(l,c)+o:s==="right"?m=d+g-Math.max(u,h)-o:m=this.caretX,i==="top"?(_=f,b=_-o,w=m-o,v=m+o):(_=f+y,b=_+o,w=m+o,v=m-o),x=_),{x1:w,x2:m,x3:v,y1:_,y2:b,y3:x}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const u=Gr(r.rtl,this.x,this.width);for(e.x=po(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=Xe(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=i,c=Xe(i.bodyFont),h=po(this,"left",i),d=s.x(h),f=l<c.lineHeight?(c.lineHeight-l)/2:0,g=n.y+f;if(i.usePointStyle){const y={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=s.leftForLtr(d,u)+u/2,m=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Iu(e,y,w,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Iu(e,y,w,m)}else{e.lineWidth=ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(d,u),w=s.leftForLtr(s.xPlus(d,1),u-2),m=Js(o.borderRadius);Object.values(m).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mu(e,{x:y,y:g,w:u,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mu(e,{x:w,y:g+1,w:u-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,g,u,l),e.strokeRect(y,g,u,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=r,h=Xe(r.bodyFont);let d=h.lineHeight,f=0;const g=Gr(r.rtl,this.x,this.width),y=function(C){n.fillText(C,g.x(e.x+f),e.y+d/2),e.y+=d+i},w=g.textAlign(o);let m,v,_,b,x,S,E;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=po(this,w,r),n.fillStyle=r.bodyColor,te(this.beforeBody,y),f=a&&w!=="right"?o==="center"?u/2+c:u+2+c:0,b=0,S=s.length;b<S;++b){for(m=s[b],v=this.labelTextColors[b],n.fillStyle=v,te(m.before,y),_=m.lines,a&&_.length&&(this._drawColorBox(n,e,b,g,r),d=Math.max(h.lineHeight,l)),x=0,E=_.length;x<E;++x)y(_[x]),d=h.lineHeight;te(m.after,y)}f=0,d=h.lineHeight,te(this.afterBody,y),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Gr(r.rtl,this.x,this.width);for(e.x=po(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Xe(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:c}=r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Js(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+u-d,l),n.quadraticCurveTo(a+u,l,a+u,l+d),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+u,l+c-g),n.quadraticCurveTo(a+u,l+c,a+u-g,l+c),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+c),n.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Is[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Mf(this,e),l=Object.assign({},o,this._size),u=Df(n,e,l),c=Lf(e,l,u,n);(s._to!==c.x||i._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Mt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Vm(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),qm(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!ia(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!ia(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Is[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}$(Fu,"positioners",Is);var b1={id:"tooltip",_element:Fu,positioners:Is,afterInit(t,e,n){n&&(t.tooltip=new Fu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:l0},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const x1=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function k1(t,e,n,r){const s=t.indexOf(e);if(s===-1)return x1(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const S1=(t,e)=>t===null?null:We(Math.round(t),0,e);function Ff(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Uu extends us{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ae(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:k1(r,e,G(n,e),this._addedLabels),S1(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Ff.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$(Uu,"id","category"),$(Uu,"defaults",{ticks:{callback:Ff}});function E1(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:d}=t,f=i||1,g=c-1,{min:y,max:w}=e,m=!ae(o),v=!ae(a),_=!ae(u),b=(w-y)/(h+1);let x=Hh((w-y)/g/f)*f,S,E,C,P;if(x<1e-14&&!m&&!v)return[{value:y},{value:w}];P=Math.ceil(w/x)-Math.floor(y/x),P>g&&(x=Hh(P*x/g/f)*f),ae(l)||(S=Math.pow(10,l),x=Math.ceil(x*S)/S),s==="ticks"?(E=Math.floor(y/x)*x,C=Math.ceil(w/x)*x):(E=y,C=w),m&&v&&i&&ox((a-o)/i,x/1e3)?(P=Math.round(Math.min((a-o)/x,c)),x=(a-o)/P,E=o,C=a):_?(E=m?o:E,C=v?a:C,P=u-1,x=(C-E)/P):(P=(C-E)/x,Ks(P,Math.round(P),x/1e3)?P=Math.round(P):P=Math.ceil(P));const R=Math.max(Vh(x),Vh(E));S=Math.pow(10,ae(l)?R:l),E=Math.round(E*S)/S,C=Math.round(C*S)/S;let L=0;for(m&&(d&&E!==o?(n.push({value:o}),E<o&&L++,Ks(Math.round((E+L*x)*S)/S,o,Uf(o,b,t))&&L++):E<o&&L++);L<P;++L){const W=Math.round((E+L*x)*S)/S;if(v&&W>a)break;n.push({value:W})}return v&&d&&C!==a?n.length&&Ks(n[n.length-1].value,a,Uf(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!v||C===a)&&n.push({value:C}),n}function Uf(t,e,{horizontal:n,minRotation:r}){const s=Zt(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class C1 extends us{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ae(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=rs(s),u=rs(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=E1(s,i);return e.bounds==="ticks"&&ax(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Gc(e,this.chart.options.locale,this.options.ticks.format)}}class Bu extends C1{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=xt(e)?e:0,this.max=xt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Zt(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$(Bu,"id","linear"),$(Bu,"defaults",{ticks:{callback:zm.formatters.numeric}});const Da={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ye=Object.keys(Da);function Bf(t,e){return t-e}function Wf(t,e){if(ae(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),xt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(ki(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Hf(t,e,n,r){const s=Ye.length;for(let i=Ye.indexOf(t);i<s-1;++i){const o=Da[Ye[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ye[i]}return Ye[s-1]}function T1(t,e,n,r,s){for(let i=Ye.length-1;i>=Ye.indexOf(n);i--){const o=Ye[i];if(Da[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Ye[n?Ye.indexOf(n):0]}function O1(t){for(let e=Ye.indexOf(t)+1,n=Ye.length;e<n;++e)if(Da[Ye[e]].common)return Ye[e]}function Vf(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=qc(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function j1(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function qf(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:j1(t,r,s,n)}class fa extends us{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new zk._date(e.adapters.date);s.init(n),qs(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Wf(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=xt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=xt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=hx(s,i,o);return this._unit=n.unit||(r.autoSkip?Hf(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):T1(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:O1(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),qf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=We(n,0,o),r=We(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Hf(i.minUnit,n,r,this._getLabelCapacity(n)),a=G(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=ki(l)||l===!0,c={};let h=n,d,f;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<r;d=+e.add(d,a,o),f++)Vf(c,d,g);return(d===r||s.bounds==="ticks"||f===1)&&Vf(c,d,g),Object.keys(c).sort(Bf).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return ue(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],h=u&&a[u],d=r[n],f=u&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:c))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Zt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,qf(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Wf(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return px(e.sort(Bf))}}$(fa,"id","time"),$(fa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function go(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=tr(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=tr(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class Kf extends fa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=go(n,this.min),this._tableRange=go(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)c=s[o+1],l=s[o-1],u=s[o],Math.round((c+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(go(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return go(this._table,r*this._tableRange+this._minPos,!0)}}$(Kf,"id","timeseries"),$(Kf,"defaults",fa.defaults);const u0="label";function Gf(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function P1(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function c0(t,e){t.labels=e}function d0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u0;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function R1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u0;const n={labels:[],datasets:[]};return c0(n,t.labels),d0(n,t.datasets,e),n}function N1(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:u=[],fallbackContent:c,updateMode:h,...d}=t,f=I.useRef(null),g=I.useRef(),y=()=>{f.current&&(g.current=new Ma(f.current,{type:o,data:R1(a,i),options:l&&{...l},plugins:u}),Gf(e,g.current))},w=()=>{Gf(e,null),g.current&&(g.current.destroy(),g.current=null)};return I.useEffect(()=>{!s&&g.current&&l&&P1(g.current,l)},[s,l]),I.useEffect(()=>{!s&&g.current&&c0(g.current.config.data,a.labels)},[s,a.labels]),I.useEffect(()=>{!s&&g.current&&a.datasets&&d0(g.current.config.data,a.datasets,i)},[s,a.datasets]),I.useEffect(()=>{g.current&&(s?(w(),setTimeout(y)):g.current.update(h))},[s,l,a.labels,a.datasets,h]),I.useEffect(()=>{g.current&&(w(),setTimeout(y))},[o]),I.useEffect(()=>(y(),()=>w()),[]),Et.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:r},d),c)}const A1=I.forwardRef(N1);function h0(t,e){return Ma.register(e),I.forwardRef((n,r)=>Et.createElement(A1,Object.assign({},n,{ref:r,type:t})))}const I1=h0("line",Oo),M1=h0("pie",Du);function ks({title:t,value:e,className:n="",color:r="neutral"}){const s={neutral:"bg-neutral-800 text-white",success:"bg-emerald-700 text-white",warning:"bg-amber-600 text-white",accent:"bg-violet-700 text-white"};return p.jsxs("div",{className:`w-full sm:w-52 md:w-56 p-4 rounded-xl shadow-sm min-h-[72px] ${s[r]} ${n}`,children:[p.jsx("div",{className:"text-xs uppercase tracking-wide text-neutral-200",children:t}),p.jsx("div",{className:"mt-2 text-2xl font-bold truncate",children:e})]})}Ma.register(Uu,Bu,Ro,As,Ns,b1,f1);function D1(t,e){const n=s=>s==null?"":String(s).replace(/"/g,'""'),r=[e.join(",")];for(const s of t)r.push(e.map(i=>`"${n(s[i]??"")}"`).join(","));return r.join(`
`)}function Yf(){var X,tt,Ii;const[t,e]=I.useState("reports"),[n,r]=I.useState(()=>{const N=new Date;return N.setDate(N.getDate()-30),N.toISOString().slice(0,10)}),[s,i]=I.useState(()=>new Date().toISOString().slice(0,10)),[o,a]=I.useState([]),[l,u]=I.useState([]),[c,h]=I.useState([]),[d,f]=I.useState(!1),[g,y]=I.useState(22),[w,m]=I.useState(0),[v,_]=I.useState([]),[b,x]=I.useState([]),[S,E]=I.useState(""),[C,P]=I.useState(""),[R,L]=I.useState(""),[W,J]=I.useState(null);I.useEffect(()=>{se();const N=()=>se();return window.addEventListener("settings:changed",N),()=>window.removeEventListener("settings:changed",N)},[]);async function se(){var pt;f(!0);const{data:N}=await Z.rpc("report_revenue_by_equipment",{start_date:n,end_date:s});a(N??[]);const{data:Pe}=await Z.rpc("report_daily_revenue",{start_date:n,end_date:s});u(Pe??[]);const{data:un}=await Z.rpc("report_margin",{start_date:n,end_date:s});h(un??[]);const{data:Ue}=await Z.from("app_setting").select("value").eq("key","iva_percent").single(),cn=Ue!=null&&Ue.value?Number(Ue.value):22;y(Number.isFinite(cn)?cn:22);try{const{data:nt}=await Z.rpc("report_counts",{start_date:n,end_date:s}),f0=((pt=nt==null?void 0:nt.find(p0=>p0.metric==="bookings"))==null?void 0:pt.value)??0;m(Number(f0))}catch{m(0)}try{const{data:nt}=await Z.rpc("report_top_products",{start_date:n,end_date:s,p_limit:10});_(nt??[])}catch{_([])}f(!1)}async function H(){const{data:N}=await Z.from("expense").select("*").order("date",{ascending:!1}).limit(100);x(N??[])}async function V(N){N.preventDefault();let Pe=null;if(W)try{const Ue=`receipts/${Date.now()}_${W.name}`,{data:cn,error:pt}=await Z.storage.from("receipts").upload(Ue,W);if(pt)throw pt;const{data:nt}=Z.storage.from("receipts").getPublicUrl(Ue);Pe=nt.publicUrl}catch(Ue){alert("Errore upload ricevuta: "+(Ue.message||Ue));return}const{error:un}=await Z.from("expense").insert([{amount:Number(S),category:C,notes:R,date:new Date().toISOString().slice(0,10),receipt_url:Pe}]);if(un)return alert(un.message);E(""),P(""),L(""),J(null),H()}function Y(N,Pe){if(!N||N.length===0)return alert("Nessun dato");const un=Object.keys(N[0]),Ue=D1(N,un),cn=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),pt=URL.createObjectURL(cn),nt=document.createElement("a");nt.href=pt,nt.download=Pe,nt.click(),URL.revokeObjectURL(pt)}const T={labels:l.map(N=>N.day),datasets:[{label:"Entrate",data:l.map(N=>Number(N.revenue)),borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.2)"}]},k={labels:o.map(N=>N.equipment),datasets:[{data:o.map(N=>Number(N.revenue)),backgroundColor:o.map((N,Pe)=>["#60a5fa","#3b82f6","#2563eb","#1e3a8a","#93c5fd"][Pe%5])}]},O=typeof document<"u"&&document.documentElement.classList.contains("dark"),A=O?"#9CA3AF":"#374151",M=O?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",B=typeof window<"u"&&window.innerWidth<640,q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:A},position:B?"bottom":"top"}},scales:{x:{ticks:{color:A},grid:{color:M}},y:{ticks:{color:A},grid:{color:M}}}},ke={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:A},position:B?"bottom":"right"}}};return p.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-2xl font-semibold",children:"Amministrazione e Report"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{className:`px-3 py-1 rounded ${t==="reports"?"bg-brand-500 text-white":"border"}`,onClick:()=>e("reports"),children:"Reports"}),p.jsx("button",{className:`px-3 py-1 rounded ${t==="admin"?"bg-brand-500 text-white":"border"}`,onClick:()=>{e("admin"),H()},children:"Amministrazione"})]})]}),p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex flex-wrap gap-4 pb-2",children:[p.jsx(ks,{title:"Entrate",value:Number(((X=c.find(N=>N.metric==="revenue"))==null?void 0:X.value)??0).toFixed(2)+" ",color:"accent"}),p.jsx(ks,{title:"Ordini",value:w,color:"neutral"}),p.jsx(ks,{title:"Spese",value:Number(((tt=c.find(N=>N.metric==="expenses"))==null?void 0:tt.value)??0).toFixed(2)+" ",color:"warning"}),p.jsx(ks,{title:"IVA",value:(Number(((Ii=c.find(N=>N.metric==="revenue"))==null?void 0:Ii.value)??0)*g/100).toFixed(2)+" ",color:"neutral"}),p.jsx(ks,{title:"Profitto",value:(()=>{var Ue,cn;const N=Number(((Ue=c.find(pt=>pt.metric==="revenue"))==null?void 0:Ue.value)??0),Pe=Number(((cn=c.find(pt=>pt.metric==="expenses"))==null?void 0:cn.value)??0),un=N*g/100;return(N-Pe-un).toFixed(2)+" "})(),color:"success"})]})}),t==="reports"&&p.jsxs(p.Fragment,{children:[p.jsxs(Kr,{children:[p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[p.jsx("label",{children:"Da"}),p.jsx("input",{type:"date",value:n,onChange:N=>r(N.target.value),className:"border px-2 py-1 rounded"}),p.jsx("label",{children:"A"}),p.jsx("input",{type:"date",value:s,onChange:N=>i(N.target.value),className:"border px-2 py-1 rounded"}),p.jsx(lt,{onClick:se,children:"Aggiorna"}),p.jsx(lt,{onClick:()=>Y(o,"revenue-by-equipment.csv"),children:"Export CSV"})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"text-sm text-neutral-500",children:"Entrate giornaliere"}),p.jsx("div",{className:"h-40 sm:h-48",children:p.jsx("div",{className:"h-full",children:p.jsx(I1,{data:T,options:q})})})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-neutral-500",children:"Entrate per attrezzatura"}),p.jsx("div",{className:"hidden sm:block mt-2",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-left text-neutral-500",children:[p.jsx("th",{children:"Attrezzatura"}),p.jsx("th",{children:"Prenotazioni"}),p.jsx("th",{children:"Incasso"})]})}),p.jsx("tbody",{children:o.map(N=>p.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[p.jsx("td",{className:"py-2",children:N.equipment}),p.jsx("td",{className:"py-2",children:N.bookings_count}),p.jsxs("td",{className:"py-2",children:[Number(N.revenue).toFixed(2)," "]})]},N.equipment))})]})}),p.jsxs("div",{className:"sm:hidden mt-2 space-y-2",children:[o.map(N=>p.jsxs("div",{className:"p-3 rounded border bg-white/5 dark:bg-slate-800",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"font-medium",children:N.equipment}),p.jsxs("div",{className:"text-sm text-neutral-500",children:[Number(N.revenue).toFixed(2)," "]})]}),p.jsxs("div",{className:"text-xs text-neutral-400 mt-1",children:["Prenotazioni: ",N.bookings_count]})]},N.equipment)),o.length===0&&p.jsx("div",{className:"text-neutral-500",children:"Nessuna entrata"})]})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"text-sm text-neutral-500",children:"Ripartizione entrate"}),p.jsx("div",{className:"h-40 sm:h-48",children:p.jsx("div",{className:"h-full",children:p.jsx(M1,{data:k,options:ke})})})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-neutral-500",children:"Riepilogo"}),p.jsx("ul",{className:"mt-2",children:c.map(N=>p.jsxs("li",{className:"py-1",children:[p.jsx("strong",{children:N.metric}),": ",Number(N.value).toFixed(2)," "]},N.metric))})]})]})]})]}),p.jsxs(Kr,{children:[p.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[p.jsx("div",{className:"text-lg font-medium",children:"Prodotti pi richiesti"}),p.jsx("div",{children:p.jsx(lt,{onClick:()=>Y(v,"top-products.csv"),children:"Esporta CSV"})})]}),p.jsx("div",{className:"hidden sm:block",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-left text-neutral-500",children:[p.jsx("th",{children:"Prodotto"}),p.jsx("th",{children:"Prenotazioni"}),p.jsx("th",{children:"Incasso"})]})}),p.jsx("tbody",{children:v.map((N,Pe)=>p.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[p.jsx("td",{className:"py-2",children:N.name??""}),p.jsx("td",{children:N.bookings_count}),p.jsxs("td",{children:[Number(N.revenue).toFixed(2)," "]})]},N.name||Pe))})]})}),p.jsxs("div",{className:"sm:hidden space-y-2",children:[v.map((N,Pe)=>p.jsxs("div",{className:"p-3 rounded border bg-white/5 dark:bg-slate-800",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"font-medium",children:N.name??""}),p.jsxs("div",{className:"text-sm text-neutral-500",children:[" ",Number(N.revenue).toFixed(2)]})]}),p.jsxs("div",{className:"text-xs text-neutral-400 mt-1",children:["Prenotazioni: ",N.bookings_count]})]},N.name||Pe)),v.length===0&&p.jsx("div",{className:"text-neutral-500",children:"Nessun prodotto"})]})]})]}),t==="admin"&&p.jsxs(Kr,{children:[p.jsx("h3",{className:"text-lg font-medium mb-3",children:"Gestione Spese"}),p.jsxs("form",{onSubmit:V,className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[p.jsx("input",{value:S,onChange:N=>E(N.target.value),placeholder:"Importo",className:"border px-2 py-1 rounded"}),p.jsx("input",{value:C,onChange:N=>P(N.target.value),placeholder:"Categoria",className:"border px-2 py-1 rounded"}),p.jsx("input",{value:R,onChange:N=>L(N.target.value),placeholder:"Note",className:"border px-2 py-1 rounded"}),p.jsx("input",{type:"file",onChange:N=>{var Pe;return J(((Pe=N.target.files)==null?void 0:Pe[0])??null)},className:"col-span-1 md:col-span-3"}),p.jsxs("div",{className:"md:col-span-3 flex gap-2",children:[p.jsx(lt,{children:" Aggiungi spesa "}),p.jsx(lt,{onClick:H,className:"bg-gray-600",children:"Ricarica"})]})]}),p.jsx("div",{className:"mt-4",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-left text-neutral-500",children:[p.jsx("th",{children:"Data"}),p.jsx("th",{children:"Categoria"}),p.jsx("th",{children:"Importo"}),p.jsx("th",{children:"Ricevuta"})]})}),p.jsx("tbody",{children:b.map(N=>p.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[p.jsx("td",{className:"py-2",children:N.date}),p.jsx("td",{children:N.category}),p.jsxs("td",{children:[Number(N.amount).toFixed(2)," "]}),p.jsx("td",{children:N.receipt_url?p.jsx("a",{href:N.receipt_url,target:"_blank",rel:"noreferrer",children:"Ricevuta"}):""})]},N.id))})]})})]})]})}function L1(){const[t,e]=I.useState(null),[n,r]=I.useState(!1);I.useEffect(()=>{s()},[]);async function s(){const{data:o}=await Z.from("app_setting").select("value").eq("key","iva_percent").single(),a=o!=null&&o.value?Number(o.value):22;e(Number.isFinite(a)?a:22)}async function i(o){if(o.preventDefault(),t===null)return;r(!0);const{error:a}=await Z.from("app_setting").upsert({key:"iva_percent",value:String(t)});if(r(!1),a)return alert(a.message);window.dispatchEvent(new CustomEvent("settings:changed",{detail:{key:"iva_percent",value:t}})),alert("Impostazioni salvate")}return p.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Impostazioni"}),p.jsx(Kr,{children:p.jsxs("form",{onSubmit:i,className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"text-sm block mb-1",children:"IVA (%)"}),p.jsx("input",{type:"number",value:t??"",onChange:o=>e(Number(o.target.value)),className:"border px-2 py-1 rounded w-32"}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Valore IVA applicato alle statistiche e al calcolo del profitto."})]}),p.jsx("div",{children:p.jsx(lt,{type:"submit",children:n?"Salvo...":"Salva"})})]})})]})}function Tl({options:t,value:e,onChange:n,placeholder:r="Seleziona",className:s=""}){const[i,o]=I.useState(!1),a=I.useRef(null);I.useEffect(()=>{const u=c=>{a.current&&(a.current.contains(c.target)||o(!1))};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const l=t.find(u=>u.value===e);return p.jsxs("div",{className:`relative inline-block text-left ${s}`,ref:a,children:[p.jsxs("button",{type:"button",onClick:()=>o(u=>!u),className:"w-full flex items-center justify-between px-3 py-3 sm:py-2 border rounded bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-100 touch-manipulation",children:[p.jsx("span",{children:l?l.label:p.jsx("span",{className:"text-neutral-400",children:r})}),p.jsx("svg",{className:"w-4 h-4 ml-2 text-neutral-400",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:p.jsx("path",{d:"M6 8l4 4 4-4",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})]}),i&&p.jsxs("ul",{className:"absolute z-50 mt-1 w-full bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded shadow-lg max-h-56 overflow-auto p-1 touch-manipulation",children:[t.map(u=>p.jsx("li",{children:p.jsx("button",{type:"button",onClick:()=>{n(u.value),o(!1)},className:`w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded ${e===u.value?"font-medium":"text-neutral-600 dark:text-neutral-300"}`,children:u.label})},u.value)),p.jsx("li",{children:p.jsx("button",{type:"button",onClick:()=>{n(null),o(!1)},className:"w-full text-left px-3 py-2 text-sm text-neutral-500 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded",children:"Rimuovi selezione"})})]})]})}function sd({isOpen:t,onClose:e,title:n,children:r}){return t?p.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 bg-black/50",onClick:e,children:p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl sm:rounded-lg shadow-xl w-full sm:max-w-2xl max-h-[100vh] sm:max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[p.jsx("div",{className:"sm:hidden flex justify-center pt-3",children:p.jsx("div",{className:"w-12 h-1.5 bg-neutral-200 dark:bg-neutral-700 rounded-full"})}),p.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-neutral-200 dark:border-neutral-700 px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[p.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:n}),p.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 p-2 rounded",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsx("div",{className:"p-4 sm:p-6",children:r})]})}):null}function z1(){const[t,e]=I.useState([]),[n,r]=I.useState(""),[s,i]=I.useState("SUP"),[o,a]=I.useState(1),[l,u]=I.useState(""),[c,h]=I.useState(null),[d,f]=I.useState(""),[g,y]=I.useState(""),[w,m]=I.useState(1),[v,_]=I.useState(""),[b,x]=I.useState("available"),[S,E]=I.useState("");I.useEffect(()=>{C()},[]);async function C(){const{data:T,error:k}=await Z.from("equipment").select("*").order("created_at",{ascending:!1});k?console.error(k):e(T||[])}async function P(T){if(T.preventDefault(),!n.trim())return;const k=parseFloat(l)||0,{data:O,error:A}=await Z.from("equipment").insert([{name:n.trim(),type:s,quantity:o,price_per_hour:k}]);if(A){console.error(A);return}const M=(O||[])[0];if(M&&s==="SUP"&&Number(o)>0)try{const B=Array.from({length:Number(o)},(ke,X)=>({name:`${M.name} #${X+1}`,equipment_id:M.id})),{error:q}=await Z.from("sup").insert(B);q?console.error("Error creating sup records:",q):window.dispatchEvent(new CustomEvent("sups:changed"))}catch(B){console.error(B)}r(""),a(1),i("SUP"),C()}async function R(T){if(!confirm("Sei sicuro di eliminare questo elemento?"))return;try{await Z.from("sup").delete().eq("equipment_id",T),window.dispatchEvent(new CustomEvent("sups:changed"))}catch(O){console.error(O)}const{error:k}=await Z.from("equipment").delete().eq("id",T);k&&console.error(k),C()}function L(T){h(T.id),f(T.name),y(T.type),m(T.quantity),_(T.price_per_hour?String(T.price_per_hour):""),x(T.status||"available"),E(T.notes||"")}async function W(){if(!c)return;const T=parseFloat(v)||0,{error:k}=await Z.from("equipment").update({name:d.trim(),type:g,quantity:w,price_per_hour:T,status:b,notes:S}).eq("id",c);k&&console.error(k);try{const{data:O}=await Z.from("sup").select("id").eq("equipment_id",c),A=(O||[]).length;if(g==="SUP"){if(A<w){const M=Array.from({length:w-A},(B,q)=>({name:`${d} #${A+q+1}`,equipment_id:c}));await Z.from("sup").insert(M),window.dispatchEvent(new CustomEvent("sups:changed"))}else if(A>w){const{data:M}=await Z.from("sup").select("id").eq("equipment_id",c).order("created_at",{ascending:!0}).limit(A-w),B=(M||[]).map(q=>q.id);B.length&&await Z.from("sup").delete().in("id",B),window.dispatchEvent(new CustomEvent("sups:changed"))}}else A>0&&(await Z.from("sup").delete().eq("equipment_id",c),window.dispatchEvent(new CustomEvent("sups:changed")))}catch(O){console.error(O)}h(null),C()}function J(){h(null)}const[se,H]=I.useState(!1);function V(){H(!0)}function Y(){H(!1),r(""),a(1),i("SUP"),u("")}return p.jsxs("div",{className:"mt-6",children:[p.jsxs(Kr,{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Attrezzatura"}),p.jsx("div",{className:"flex gap-2",children:p.jsx(lt,{onClick:V,children:"Aggiungi attrezzatura"})})]}),t.length===0&&p.jsx("p",{className:"text-sm text-neutral-500",children:"Nessun elemento"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.map(T=>p.jsx(Kr,{className:"flex flex-col justify-between",children:c===T.id?p.jsxs("div",{children:[p.jsxs("div",{className:"mb-2",children:[p.jsx("input",{className:"w-full border px-2 py-1 rounded mb-2 dark:bg-neutral-800",value:d,onChange:k=>f(k.target.value)}),p.jsx(Tl,{options:[{value:"SUP",label:"SUP"},{value:"Barca",label:"Barca"},{value:"Remo",label:"Remo"},{value:"Salvagente",label:"Salvagente"},{value:"Altro",label:"Altro"}],value:g,onChange:k=>y(k??"SUP")}),p.jsx("input",{type:"number",min:1,className:"w-24 border px-2 py-1 rounded mb-2",value:w,onChange:k=>m(Number(k.target.value))}),p.jsx("input",{type:"number",step:"0.01",className:"w-36 border px-2 py-1 rounded mb-2",placeholder:"Prezzo / ora ()",value:v,onChange:k=>_(k.target.value)}),p.jsx(Tl,{options:[{value:"available",label:"available"},{value:"maintenance",label:"maintenance"},{value:"retired",label:"retired"}],value:b,onChange:k=>x(k??"available")}),p.jsx("textarea",{className:"w-full border px-2 py-1 rounded",rows:3,value:S,onChange:k=>E(k.target.value)})]}),p.jsxs("div",{className:"flex gap-2 mt-3",children:[p.jsx(lt,{onClick:W,className:"bg-green-600",children:"Salva"}),p.jsx("button",{onClick:J,type:"button",className:"px-3 py-1 rounded border",children:"Annulla"})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-lg",children:T.name}),p.jsxs("div",{className:"text-sm text-neutral-500",children:[T.type,"  Quantit: ",T.quantity]}),p.jsxs("div",{className:"text-sm text-amber-500 font-semibold",children:["Prezzo:  ",T.price_per_hour?Number(T.price_per_hour).toFixed(2):"0.00"," / ora"]}),T.notes&&p.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:T.notes}),p.jsx("div",{className:`mt-3 inline-block px-2 py-1 text-xs rounded ${T.status==="available"?"bg-green-100 text-green-800":T.status==="maintenance"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.status})]}),p.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[p.jsx("button",{onClick:()=>L(T),className:"px-3 py-1 border rounded",children:"Modifica"}),p.jsx("button",{onClick:()=>R(T.id),className:"px-3 py-1 rounded text-red-600",children:"Elimina"})]})]})},T.id))})]}),p.jsx(sd,{isOpen:se,onClose:Y,title:"Aggiungi attrezzatura",children:p.jsxs("form",{onSubmit:T=>{P(T),Y()},className:"flex flex-col sm:flex-row gap-2 mb-4",children:[p.jsx("input",{className:"border px-2 py-1 rounded flex-1 dark:bg-neutral-800",placeholder:"Nome",value:n,onChange:T=>r(T.target.value),required:!0}),p.jsx(Tl,{options:[{value:"SUP",label:"SUP"},{value:"Barca",label:"Barca"},{value:"Remo",label:"Remo"},{value:"Salvagente",label:"Salvagente"},{value:"Altro",label:"Altro"}],value:s,onChange:T=>i(T??"SUP")}),p.jsx("input",{type:"number",min:1,className:"w-20 border px-2 py-1 rounded",value:o,onChange:T=>a(Number(T.target.value))}),p.jsx("input",{type:"number",step:"0.01",className:"w-36 border px-2 py-1 rounded",placeholder:"Prezzo / ora ()",value:l,onChange:T=>u(T.target.value)}),p.jsx(lt,{children:" Aggiungi "})]})})]})}function $1(){const[t,e]=I.useState([]),[n,r]=I.useState([]),[s,i]=I.useState([]),[o,a]=I.useState("week"),[l,u]=I.useState(new Date),[c,h]=I.useState(!1),[d,f]=I.useState([]),[g,y]=I.useState(null),[w,m]=I.useState(""),[v,_]=I.useState(""),[b,x]=I.useState(60),[S,E]=I.useState(null);async function C(){const{data:k}=await Z.from("equipment").select("*").order("name"),{data:O}=await Z.from("package").select("*"),{data:A}=await Z.from("booking").select("*").order("start_time",{ascending:!0});e(k||[]),r(O||[]),i(A||[])}I.useEffect(()=>{C();const k=()=>C();return window.addEventListener("sups:changed",k),()=>window.removeEventListener("sups:changed",k)},[]),I.useEffect(()=>{L()},[d,g,b]);function P(){f([]),y(null),m(""),_(""),x(60),E(null)}function R(k,O){if(O<=0)f(d.filter(A=>A.id!==k));else{const A=d.find(M=>M.id===k);f(A?d.map(M=>M.id===k?{...M,quantity:O}:M):[...d,{id:k,quantity:O}])}}async function L(){if(g){const A=n.find(M=>M.id===g);E(A&&A.price||0);return}if(d.length===0){E(null);return}const k=Math.max(.01,b/60);let O=0;for(const A of d){const M=t.find(q=>q.id===A.id),B=M!=null&&M.price_per_hour?Number(M.price_per_hour):0;O+=B*(A.quantity||1)*k}E(Math.round((O+Number.EPSILON)*100)/100)}async function W(){if(!v)return alert("Seleziona data e ora");if(d.length===0&&!g)return alert("Seleziona almeno un'attrezzatura o un pacchetto");let k=b||60,O=0;if(g){const q=n.find(ke=>ke.id===g);q&&(k=q.duration||k,O=q.price||0)}else{const q=Math.max(.01,k/60);for(const ke of d){const X=t.find(Ii=>Ii.id===ke.id),tt=X!=null&&X.price_per_hour?Number(X.price_per_hour):0;O+=tt*(ke.quantity||1)*q}O=Math.round((O+Number.EPSILON)*100)/100}const A=new Date(v);A.setMinutes(A.getMinutes()+k);const M={customer_name:w,start_time:v,end_time:A.toISOString(),price:O,package_id:g,equipment_items:d},{error:B}=await Z.from("booking").insert(M);if(B){B.message&&B.message.includes("Could not find")?alert("Errore: la colonna 'equipment_items' non  riconosciuta dal server. Assicurati di aver eseguito le migrazioni su Supabase e poi ricarica la pagina (F5). Se l'errore persiste, riavvia il progetto Supabase dal pannello Settings  Database  Restart e riprova."):alert(B.message);return}P(),h(!1),C()}async function J(k){if(!confirm("Eliminare questa prenotazione?"))return;const{error:O}=await Z.from("booking").delete().eq("id",k);if(O)return alert(O.message);C()}function se(k){const O=new Date(k);return O.setDate(O.getDate()-O.getDay()+1),Array.from({length:7},(A,M)=>{const B=new Date(O);return B.setDate(O.getDate()+M),B})}function H(k){const O=k.getFullYear(),A=k.getMonth(),M=new Date(O,A,1),B=new Date(O,A+1,0),q=[],ke=M.getDay()===0?6:M.getDay()-1;for(let X=ke;X>0;X--){const tt=new Date(M);tt.setDate(tt.getDate()-X),q.push(tt)}for(let X=1;X<=B.getDate();X++)q.push(new Date(O,A,X));return q}function V(k){const O=new Date(k);O.setHours(0,0,0,0);const A=new Date(k);return A.setHours(23,59,59,999),s.filter(M=>{const B=new Date(M.start_time);return B>=O&&B<=A})}function Y(k){const O=new Date(l);o==="day"?O.setDate(O.getDate()+(k==="next"?1:-1)):o==="week"?O.setDate(O.getDate()+(k==="next"?7:-7)):O.setMonth(O.getMonth()+(k==="next"?1:-1)),u(O)}function T(){if(o==="day")return l.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(o==="week"){const k=se(l);return`${k[0].toLocaleDateString("it-IT",{day:"numeric",month:"short"})} - ${k[6].toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"})}`}else return l.toLocaleDateString("it-IT",{month:"long",year:"numeric"})}return p.jsxs("section",{className:"mt-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium text-lg",children:"Calendario Prenotazioni"}),p.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Gestisci le prenotazioni della tua attrezzatura"})]}),p.jsx(lt,{onClick:()=>h(!0),children:"+ Nuova Prenotazione"})]}),p.jsxs("div",{className:"mb-4 flex items-center justify-between flex-wrap gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>Y("prev"),className:"p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsx("div",{className:"text-sm font-medium min-w-[120px] sm:min-w-[200px] text-center",children:T()}),p.jsx("button",{onClick:()=>Y("next"),className:"p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),p.jsx("button",{onClick:()=>u(new Date),className:"ml-2 px-3 py-1 text-sm rounded border border-neutral-300 dark:border-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:"Oggi"})]}),p.jsxs("div",{className:"flex gap-1 bg-neutral-100 dark:bg-neutral-800 rounded p-1",children:[p.jsx("button",{onClick:()=>a("day"),className:`px-3 py-1 text-sm rounded ${o==="day"?"bg-white dark:bg-neutral-700 shadow":""}`,children:"Giorno"}),p.jsx("button",{onClick:()=>a("week"),className:`px-3 py-1 text-sm rounded ${o==="week"?"bg-white dark:bg-neutral-700 shadow":""}`,children:"Settimana"}),p.jsx("button",{onClick:()=>a("month"),className:`px-3 py-1 text-sm rounded ${o==="month"?"bg-white dark:bg-neutral-700 shadow":""}`,children:"Mese"})]})]}),p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700",children:[o==="day"&&p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"space-y-2",children:[V(l).map(k=>p.jsx("div",{className:"p-3 rounded border border-neutral-200 dark:border-neutral-700 bg-amber-50 dark:bg-amber-900/20",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:k.customer_name||"Cliente"}),p.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[new Date(k.start_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})," - ",new Date(k.end_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]}),k.price&&p.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:[" ",k.price]})]}),p.jsx("button",{onClick:()=>J(k.id),className:"text-red-500 hover:text-red-600 p-1",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},k.id)),V(l).length===0&&p.jsx("div",{className:"text-center py-12 text-neutral-500 dark:text-neutral-400",children:"Nessuna prenotazione per questa giornata"})]})}),o==="week"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"hidden sm:block",children:p.jsxs("div",{className:"grid grid-cols-7",children:[["Lun","Mar","Mer","Gio","Ven","Sab","Dom"].map((k,O)=>p.jsx("div",{className:"p-2 text-center text-sm font-medium border-b border-neutral-200 dark:border-neutral-700",children:k},O)),se(l).map((k,O)=>{const A=V(k),M=k.toDateString()===new Date().toDateString();return p.jsxs("div",{className:`p-2 border-r border-b border-neutral-200 dark:border-neutral-700 min-h-[150px] ${M?"bg-amber-50 dark:bg-amber-900/10":""}`,children:[p.jsx("div",{className:`text-sm font-medium mb-2 ${M?"text-amber-600 dark:text-amber-400":""}`,children:k.getDate()}),p.jsx("div",{className:"space-y-1",children:A.map(B=>p.jsxs("div",{className:"text-xs p-1 rounded bg-amber-100 dark:bg-amber-900/30 truncate cursor-pointer",onClick:()=>J(B.id),children:[p.jsx("div",{className:"font-medium truncate",children:new Date(B.start_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}),p.jsx("div",{className:"truncate",children:B.customer_name||"Cliente"})]},B.id))})]},O)})]})}),p.jsx("div",{className:"sm:hidden p-2",children:se(l).map(k=>{const O=V(k),A=k.toDateString()===new Date().toDateString();return p.jsxs("div",{className:`mb-3 p-3 rounded border ${A?"bg-amber-50 dark:bg-amber-900/10 border-amber-200":"border-neutral-200 dark:border-neutral-700"}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("div",{className:"font-medium",children:k.toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"short"})}),p.jsxs("div",{className:"text-sm text-neutral-500",children:[O.length," prenotazioni"]})]}),p.jsxs("div",{className:"space-y-2",children:[O.length===0&&p.jsx("div",{className:"text-neutral-500 text-sm",children:"Nessuna prenotazione"}),O.map(M=>p.jsxs("div",{className:"p-3 rounded bg-amber-100 dark:bg-amber-900/30 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-sm",children:M.customer_name||"Cliente"}),p.jsxs("div",{className:"text-xs text-neutral-600",children:[new Date(M.start_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),"  ",new Date(M.end_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]}),p.jsx("button",{onClick:()=>J(M.id),className:"text-red-500 ml-3",children:"Elimina"})]},M.id))]})]},k.toDateString())})})]}),o==="month"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"hidden sm:block",children:p.jsxs("div",{className:"grid grid-cols-7",children:[["Lun","Mar","Mer","Gio","Ven","Sab","Dom"].map((k,O)=>p.jsx("div",{className:"p-2 text-center text-sm font-medium border-b border-neutral-200 dark:border-neutral-700",children:k},O)),H(l).map((k,O)=>{const A=V(k),M=k.toDateString()===new Date().toDateString(),B=k.getMonth()===l.getMonth();return p.jsxs("div",{className:`p-2 border-r border-b border-neutral-200 dark:border-neutral-700 min-h-[100px] ${M?"bg-amber-50 dark:bg-amber-900/10":""} ${B?"":"opacity-30"}`,children:[p.jsx("div",{className:`text-sm font-medium mb-1 ${M?"text-amber-600 dark:text-amber-400":""}`,children:k.getDate()}),p.jsxs("div",{className:"space-y-1",children:[A.slice(0,2).map(q=>p.jsx("div",{className:"text-xs p-1 rounded bg-amber-100 dark:bg-amber-900/30 truncate",children:q.customer_name||"Cliente"},q.id)),A.length>2&&p.jsxs("div",{className:"text-xs text-neutral-500",children:["+",A.length-2]})]})]},O)})]})}),p.jsx("div",{className:"sm:hidden p-2",children:H(l).map(k=>{const O=V(k),A=k.toDateString()===new Date().toDateString(),M=k.getMonth()===l.getMonth();return p.jsxs("div",{className:`mb-3 p-3 rounded border ${A?"bg-amber-50 dark:bg-amber-900/10 border-amber-200":"border-neutral-200 dark:border-neutral-700"} ${M?"":"opacity-50"}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("div",{className:"font-medium",children:k.toLocaleDateString("it-IT",{weekday:"short",day:"numeric",month:"short"})}),p.jsxs("div",{className:"text-sm text-neutral-500",children:[O.length," prenotazioni"]})]}),p.jsxs("div",{className:"space-y-2",children:[O.length===0&&p.jsx("div",{className:"text-neutral-500 text-sm",children:"Nessuna prenotazione"}),O.map(B=>p.jsxs("div",{className:"p-3 rounded bg-amber-100 dark:bg-amber-900/30 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-sm",children:B.customer_name||"Cliente"}),p.jsxs("div",{className:"text-xs text-neutral-600",children:[new Date(B.start_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),"  ",new Date(B.end_time).toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]}),p.jsx("button",{onClick:()=>J(B.id),className:"text-red-500 ml-3",children:"Elimina"})]},B.id))]})]},k.toDateString())})})]})]}),p.jsx(sd,{isOpen:c,onClose:()=>{h(!1),P()},title:"Nuova Prenotazione",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Cliente"}),p.jsx("input",{value:w,onChange:k=>m(k.target.value),placeholder:"Nome cliente",className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data e Ora"}),p.jsx("input",{type:"datetime-local",value:v,onChange:k=>_(k.target.value),className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"Durata (minuti)"}),p.jsx("input",{type:"number",value:b,onChange:k=>{x(Number(k.target.value))},className:"w-full border px-2 py-2 rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pacchetto (opzionale)"}),p.jsxs("select",{value:g||"",onChange:k=>y(k.target.value||null),className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500",children:[p.jsx("option",{value:"",children:"Nessun pacchetto"}),n.map(k=>p.jsxs("option",{value:k.id,children:[k.name," - ",k.price]},k.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"Attrezzatura"}),p.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700 rounded p-3",children:[t.map(k=>{const O=d.find(A=>A.id===k.id);return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium",children:k.name}),p.jsxs("div",{className:"text-xs text-neutral-400",children:[" ",k.price_per_hour??0," / ora"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>R(k.id,((O==null?void 0:O.quantity)||0)-1),className:"w-6 h-6 rounded bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600",children:"-"}),p.jsx("span",{className:"w-8 text-center text-sm font-medium",children:(O==null?void 0:O.quantity)||0}),p.jsx("button",{onClick:()=>R(k.id,((O==null?void 0:O.quantity)||0)+1),className:"w-6 h-6 rounded bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600",children:"+"})]})]},k.id)}),t.length===0&&p.jsx("div",{className:"text-sm text-neutral-500 text-center py-4",children:"Nessuna attrezzatura disponibile"})]})]}),p.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-sm text-neutral-500",children:"Prezzo stimato"}),p.jsxs("div",{className:"text-xl font-bold",children:[S!==null?S.toFixed(2)+" ":"-"," "]})]}),p.jsx(lt,{onClick:W,className:"flex-1",children:"Crea Prenotazione"}),p.jsx("button",{onClick:()=>{h(!1),P()},className:"px-4 py-2 rounded border border-neutral-300 dark:border-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Annulla"})]})]})})]})}function F1(){const[t,e]=I.useState([]),[n,r]=I.useState([]),[s,i]=I.useState(!1),[o,a]=I.useState(""),[l,u]=I.useState(""),[c,h]=I.useState("60"),[d,f]=I.useState([]);async function g(){const{data:b}=await Z.from("package").select("*").order("created_at",{ascending:!1});e(b||[])}async function y(){const{data:b}=await Z.from("equipment").select("*").order("name");r(b||[])}I.useEffect(()=>{g(),y()},[]);async function w(){if(!o.trim())return alert("Inserisci un nome per il pacchetto");const b=parseFloat(l)||0,x=parseInt(c)||60,S={name:o.trim(),price:b,duration:x,equipment_items:d},{error:E}=await Z.from("package").insert(S);if(E)return alert(E.message);v(),i(!1),g()}async function m(b){if(!confirm("Eliminare questo pacchetto?"))return;const{error:x}=await Z.from("package").delete().eq("id",b);if(x)return alert(x.message);g()}function v(){a(""),u(""),h("60"),f([])}function _(b,x){if(x<=0)f(d.filter(S=>S.id!==b));else{const S=d.find(E=>E.id===b);f(S?d.map(E=>E.id===b?{...E,quantity:x}:E):[...d,{id:b,quantity:x}])}}return p.jsxs("section",{className:"mt-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-medium text-lg",children:"I tuoi pacchetti"}),p.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Crea pacchetti preimpostati per velocizzare le prenotazioni"})]}),p.jsx(lt,{onClick:()=>i(!0),children:"+ Nuovo Pacchetto"})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(b=>p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-neutral-200 dark:border-neutral-700 p-4",children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsx("div",{className:"font-semibold text-lg",children:b.name}),p.jsx("button",{onClick:()=>m(b.id),className:"text-red-500 hover:text-red-600 text-sm",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),p.jsxs("div",{className:"text-2xl font-bold text-amber-500 mb-2",children:[" ",b.price]}),b.duration&&p.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Durata: ",b.duration," min"]}),b.equipment_items&&Array.isArray(b.equipment_items)&&b.equipment_items.length>0&&p.jsxs("div",{className:"mt-3 text-sm",children:[p.jsx("div",{className:"font-medium text-neutral-600 dark:text-neutral-300 mb-1",children:"Include:"}),p.jsxs("ul",{className:"space-y-1",children:[b.equipment_items.slice(0,3).map((x,S)=>{const E=n.find(C=>C.id===x.id);return p.jsxs("li",{className:"text-neutral-500 dark:text-neutral-400",children:[" ",x.quantity,"x ",(E==null?void 0:E.name)||"Attrezzatura"]},S)}),b.equipment_items.length>3&&p.jsxs("li",{className:"text-neutral-400",children:[" e ",b.equipment_items.length-3," altri"]})]})]})]},b.id)),t.length===0&&p.jsx("div",{className:"col-span-full text-center py-12 text-neutral-500 dark:text-neutral-400",children:'Nessun pacchetto creato. Clicca su "Nuovo Pacchetto" per iniziare.'})]}),p.jsx(sd,{isOpen:s,onClose:()=>{i(!1),v()},title:"Nuovo Pacchetto",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nome Pacchetto"}),p.jsx("input",{value:o,onChange:b=>a(b.target.value),placeholder:"es. Escursione Famiglia",className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prezzo ()"}),p.jsx("input",{type:"number",value:l,onChange:b=>u(b.target.value),placeholder:"0.00",className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Durata (minuti)"}),p.jsx("input",{type:"number",value:c,onChange:b=>h(b.target.value),placeholder:"60",className:"w-full border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-slate-700 px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-2",children:"Attrezzatura Inclusa"}),p.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-neutral-200 dark:border-neutral-700 rounded p-3",children:[n.map(b=>{const x=d.find(S=>S.id===b.id);return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm",children:b.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>_(b.id,((x==null?void 0:x.quantity)||0)-1),className:"w-6 h-6 rounded bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600",children:"-"}),p.jsx("span",{className:"w-8 text-center text-sm font-medium",children:(x==null?void 0:x.quantity)||0}),p.jsx("button",{onClick:()=>_(b.id,((x==null?void 0:x.quantity)||0)+1),className:"w-6 h-6 rounded bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600",children:"+"})]})]},b.id)}),n.length===0&&p.jsx("div",{className:"text-sm text-neutral-500 text-center py-4",children:"Nessuna attrezzatura disponibile"})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx(lt,{onClick:w,className:"flex-1",children:"Crea Pacchetto"}),p.jsx("button",{onClick:()=>{i(!1),v()},className:"px-4 py-2 rounded border border-neutral-300 dark:border-neutral-600 hover:bg-neutral-100 dark:hover:bg-neutral-700",children:"Annulla"})]})]})})]})}function U1(){const[t,e]=I.useState("reports"),n=I.useCallback(r=>e(r),[]);return p.jsxs("div",{className:"min-h-screen bg-sky-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 flex",children:[p.jsx(qy,{onNav:n,currentPage:t}),p.jsxs("main",{className:"flex-1 p-4 w-full sm:max-w-6xl sm:mx-auto",children:[t==="equipment"&&p.jsx(z1,{}),t==="bookings"&&p.jsx($1,{}),t==="packages"&&p.jsx(F1,{}),t==="reports"&&p.jsx(Yf,{}),t==="settings"&&p.jsx(L1,{}),!["equipment","bookings","packages","reports","settings"].includes(t)&&p.jsx(Yf,{})]})]})}lm(document.getElementById("root")).render(p.jsx(Et.StrictMode,{children:p.jsx(Hy,{children:p.jsx(U1,{})})}));
