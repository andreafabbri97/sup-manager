var gy=Object.defineProperty;var my=(t,e,n)=>e in t?gy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var F=(t,e,n)=>my(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gf={exports:{}},ya={},Yf={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=Symbol.for("react.element"),vy=Symbol.for("react.portal"),_y=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),ky=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Cy=Symbol.for("react.memo"),Ty=Symbol.for("react.lazy"),sh=Symbol.iterator;function Oy(t){return t===null||typeof t!="object"?null:(t=sh&&t[sh]||t["@@iterator"],typeof t=="function"?t:null)}var Jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xf=Object.assign,Qf={};function ls(t,e,n){this.props=t,this.context=e,this.refs=Qf,this.updater=n||Jf}ls.prototype.isReactComponent={};ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zf(){}Zf.prototype=ls.prototype;function Wu(t,e,n){this.props=t,this.context=e,this.refs=Qf,this.updater=n||Jf}var Hu=Wu.prototype=new Zf;Hu.constructor=Wu;Xf(Hu,ls.prototype);Hu.isPureReactComponent=!0;var ih=Array.isArray,ep=Object.prototype.hasOwnProperty,Vu={current:null},tp={key:!0,ref:!0,__self:!0,__source:!0};function np(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ep.call(e,r)&&!tp.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Pi,type:t,key:i,ref:o,props:s,_owner:Vu.current}}function Py(t,e){return{$$typeof:Pi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pi}function Ry(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oh=/\/+/g;function za(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ry(""+t.key):e.toString(36)}function vo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pi:case vy:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+za(o,0):r,ih(s)?(n="",t!=null&&(n=t.replace(oh,"$&/")+"/"),vo(s,e,n,"",function(u){return u})):s!=null&&(qu(s)&&(s=Py(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(oh,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ih(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+za(i,a);o+=vo(i,e,n,l,s)}else if(l=Oy(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+za(i,a++),o+=vo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Li(t,e,n){if(t==null)return t;var r=[],s=0;return vo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var We={current:null},_o={transition:null},Ay={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:_o,ReactCurrentOwner:Vu};function rp(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Li,forEach:function(t,e,n){Li(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Li(t,function(){e++}),e},toArray:function(t){return Li(t,function(e){return e})||[]},only:function(t){if(!qu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=ls;G.Fragment=_y;G.Profiler=by;G.PureComponent=Wu;G.StrictMode=wy;G.Suspense=Ey;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ay;G.act=rp;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xf({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Vu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ep.call(e,l)&&!tp.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pi,type:t.type,key:s,ref:i,props:r,_owner:o}};G.createContext=function(t){return t={$$typeof:ky,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xy,_context:t},t.Consumer=t};G.createElement=np;G.createFactory=function(t){var e=np.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:Sy,render:t}};G.isValidElement=qu;G.lazy=function(t){return{$$typeof:Ty,_payload:{_status:-1,_result:t},_init:jy}};G.memo=function(t,e){return{$$typeof:Cy,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=_o.transition;_o.transition={};try{t()}finally{_o.transition=e}};G.unstable_act=rp;G.useCallback=function(t,e){return We.current.useCallback(t,e)};G.useContext=function(t){return We.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return We.current.useDeferredValue(t)};G.useEffect=function(t,e){return We.current.useEffect(t,e)};G.useId=function(){return We.current.useId()};G.useImperativeHandle=function(t,e,n){return We.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return We.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return We.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return We.current.useMemo(t,e)};G.useReducer=function(t,e,n){return We.current.useReducer(t,e,n)};G.useRef=function(t){return We.current.useRef(t)};G.useState=function(t){return We.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return We.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return We.current.useTransition()};G.version="18.3.1";Yf.exports=G;var R=Yf.exports;const Qs=yy(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny=R,Iy=Symbol.for("react.element"),My=Symbol.for("react.fragment"),Dy=Object.prototype.hasOwnProperty,Ly=Ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$y={key:!0,ref:!0,__self:!0,__source:!0};function sp(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Dy.call(e,r)&&!$y.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Iy,type:t,key:i,ref:o,props:s,_owner:Ly.current}}ya.Fragment=My;ya.jsx=sp;ya.jsxs=sp;Gf.exports=ya;var v=Gf.exports,ip={exports:{}},lt={},op={exports:{}},ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,L){var N=A.length;A.push(L);e:for(;0<N;){var q=N-1>>>1,ee=A[q];if(0<s(ee,L))A[q]=L,A[N]=ee,N=q;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],N=A.pop();if(N!==L){A[0]=N;e:for(var q=0,ee=A.length,ct=ee>>>1;q<ct;){var Te=2*(q+1)-1,ht=A[Te],Se=Te+1,zn=A[Se];if(0>s(ht,N))Se<ee&&0>s(zn,ht)?(A[q]=zn,A[Se]=N,q=Se):(A[q]=ht,A[Te]=N,q=Te);else if(Se<ee&&0>s(zn,N))A[q]=zn,A[Se]=N,q=Se;else break e}}return L}function s(A,L){var N=A.sortIndex-L.sortIndex;return N!==0?N:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(A){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=A)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(u)}}function b(A){if(y=!1,_(A),!g)if(n(l)!==null)g=!0,V(x);else{var L=n(u);L!==null&&K(b,L.startTime-A)}}function x(A,L){g=!1,y&&(y=!1,p(E),E=-1),f=!0;var N=d;try{for(_(L),h=n(l);h!==null&&(!(h.expirationTime>L)||A&&!T());){var q=h.callback;if(typeof q=="function"){h.callback=null,d=h.priorityLevel;var ee=q(h.expirationTime<=L);L=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(l)&&r(l),_(L)}else r(l);h=n(l)}if(h!==null)var ct=!0;else{var Te=n(u);Te!==null&&K(b,Te.startTime-L),ct=!1}return ct}finally{h=null,d=N,f=!1}}var k=!1,S=null,E=-1,P=5,C=-1;function T(){return!(t.unstable_now()-C<P)}function D(){if(S!==null){var A=t.unstable_now();C=A;var L=!0;try{L=S(!0,A)}finally{L?j():(k=!1,S=null)}}else k=!1}var j;if(typeof m=="function")j=function(){m(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,U=z.port2;z.port1.onmessage=D,j=function(){U.postMessage(null)}}else j=function(){w(D,0)};function V(A){S=A,k||(k=!0,j())}function K(A,L){E=w(function(){A(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,V(x))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var N=d;d=L;try{return A()}finally{d=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var N=d;d=A;try{return L()}finally{d=N}},t.unstable_scheduleCallback=function(A,L,N){var q=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?q+N:q):N=q,A){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=N+ee,A={id:c++,callback:L,priorityLevel:A,startTime:N,expirationTime:ee,sortIndex:-1},N>q?(A.sortIndex=N,e(u,A),n(l)===null&&A===n(u)&&(y?(p(E),E=-1):y=!0,K(b,N-q))):(A.sortIndex=ee,e(l,A),g||f||(g=!0,V(x))),A},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(A){var L=d;return function(){var N=d;d=L;try{return A.apply(this,arguments)}finally{d=N}}}})(ap);op.exports=ap;var zy=op.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy=R,at=zy;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lp=new Set,Zs={};function dr(t,e){Qr(t,e),Qr(t+"Capture",e)}function Qr(t,e){for(Zs[t]=e,t=0;t<e.length;t++)lp.add(e[t])}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=Object.prototype.hasOwnProperty,Uy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ah={},lh={};function By(t){return Pl.call(lh,t)?!0:Pl.call(ah,t)?!1:Uy.test(t)?lh[t]=!0:(ah[t]=!0,!1)}function Wy(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hy(t,e,n,r){if(e===null||typeof e>"u"||Wy(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function He(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new He(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new He(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new He(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new He(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new He(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new He(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new He(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new He(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new He(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ku=/[\-:]([a-z])/g;function Gu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);Ne[e]=new He(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);Ne[e]=new He(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ku,Gu);Ne[e]=new He(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new He(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new He(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yu(t,e,n,r){var s=Ne.hasOwnProperty(e)?Ne[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hy(e,n,s,r)&&(n=null),r||s===null?By(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var on=Fy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$i=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Or=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),Rl=Symbol.for("react.profiler"),up=Symbol.for("react.provider"),cp=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),jl=Symbol.for("react.suspense"),Al=Symbol.for("react.suspense_list"),Qu=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),hp=Symbol.for("react.offscreen"),uh=Symbol.iterator;function ds(t){return t===null||typeof t!="object"?null:(t=uh&&t[uh]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,Fa;function Es(t){if(Fa===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fa=e&&e[1]||""}return`
`+Fa+t}var Ua=!1;function Ba(t,e){if(!t||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Es(t):""}function Vy(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=Ba(t.type,!1),t;case 11:return t=Ba(t.type.render,!1),t;case 1:return t=Ba(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Or:return"Fragment";case Tr:return"Portal";case Rl:return"Profiler";case Ju:return"StrictMode";case jl:return"Suspense";case Al:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cp:return(t.displayName||"Context")+".Consumer";case up:return(t._context.displayName||"Context")+".Provider";case Xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qu:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case dn:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function qy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ky(t){var e=dp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zi(t){t._valueTracker||(t._valueTracker=Ky(t))}function fp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function No(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Il(t,e){var n=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ch(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pp(t,e){e=e.checked,e!=null&&Yu(t,"checked",e,!1)}function Ml(t,e){pp(t,e);var n=Nn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dl(t,e.type,Nn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dl(t,e,n){(e!=="number"||No(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cs=Array.isArray;function Br(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ll(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Cs(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nn(n)}}function gp(t,e){var n=Nn(e.value),r=Nn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fi,yp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fi=Fi||document.createElement("div"),Fi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ei(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gy=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(t){Gy.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ms[e]=Ms[t]})});function vp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ms.hasOwnProperty(t)&&Ms[t]?(""+e).trim():e+"px"}function _p(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Yy=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(t,e){if(e){if(Yy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Fl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=null;function Zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bl=null,Wr=null,Hr=null;function ph(t){if(t=Ai(t)){if(typeof Bl!="function")throw Error(O(280));var e=t.stateNode;e&&(e=xa(e),Bl(t.stateNode,t.type,e))}}function wp(t){Wr?Hr?Hr.push(t):Hr=[t]:Wr=t}function bp(){if(Wr){var t=Wr,e=Hr;if(Hr=Wr=null,ph(t),e)for(t=0;t<e.length;t++)ph(e[t])}}function xp(t,e){return t(e)}function kp(){}var Wa=!1;function Sp(t,e,n){if(Wa)return t(e,n);Wa=!0;try{return xp(t,e,n)}finally{Wa=!1,(Wr!==null||Hr!==null)&&(kp(),bp())}}function ti(t,e){var n=t.stateNode;if(n===null)return null;var r=xa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Wl=!1;if(en)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{Wl=!1}function Jy(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ds=!1,Io=null,Mo=!1,Hl=null,Xy={onError:function(t){Ds=!0,Io=t}};function Qy(t,e,n,r,s,i,o,a,l){Ds=!1,Io=null,Jy.apply(Xy,arguments)}function Zy(t,e,n,r,s,i,o,a,l){if(Qy.apply(this,arguments),Ds){if(Ds){var u=Io;Ds=!1,Io=null}else throw Error(O(198));Mo||(Mo=!0,Hl=u)}}function fr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ep(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gh(t){if(fr(t)!==t)throw Error(O(188))}function ev(t){var e=t.alternate;if(!e){if(e=fr(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gh(s),t;if(i===r)return gh(s),e;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Cp(t){return t=ev(t),t!==null?Tp(t):null}function Tp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tp(t);if(e!==null)return e;t=t.sibling}return null}var Op=at.unstable_scheduleCallback,mh=at.unstable_cancelCallback,tv=at.unstable_shouldYield,nv=at.unstable_requestPaint,me=at.unstable_now,rv=at.unstable_getCurrentPriorityLevel,ec=at.unstable_ImmediatePriority,Pp=at.unstable_UserBlockingPriority,Do=at.unstable_NormalPriority,sv=at.unstable_LowPriority,Rp=at.unstable_IdlePriority,va=null,Ut=null;function iv(t){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(va,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:lv,ov=Math.log,av=Math.LN2;function lv(t){return t>>>=0,t===0?32:31-(ov(t)/av|0)|0}var Ui=64,Bi=4194304;function Ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ts(a):(i&=o,i!==0&&(r=Ts(i)))}else o=n&~s,o!==0?r=Ts(o):i!==0&&(r=Ts(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pt(e),s=1<<n,r|=t[n],e&=~s;return r}function uv(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Pt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=uv(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Vl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jp(){var t=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),t}function Ha(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ri(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=n}function hv(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Pt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Z=0;function Ap(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Np,nc,Ip,Mp,Dp,ql=!1,Wi=[],kn=null,Sn=null,En=null,ni=new Map,ri=new Map,gn=[],dv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yh(t,e){switch(t){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":ni.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ri.delete(e.pointerId)}}function ps(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ai(e),e!==null&&nc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fv(t,e,n,r,s){switch(e){case"focusin":return kn=ps(kn,t,e,n,r,s),!0;case"dragenter":return Sn=ps(Sn,t,e,n,r,s),!0;case"mouseover":return En=ps(En,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ni.set(i,ps(ni.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ri.set(i,ps(ri.get(i)||null,t,e,n,r,s)),!0}return!1}function Lp(t){var e=Qn(t.target);if(e!==null){var n=fr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ep(n),e!==null){t.blockedOn=e,Dp(t.priority,function(){Ip(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ul=r,n.target.dispatchEvent(r),Ul=null}else return e=Ai(n),e!==null&&nc(e),t.blockedOn=n,!1;e.shift()}return!0}function vh(t,e,n){wo(t)&&n.delete(e)}function pv(){ql=!1,kn!==null&&wo(kn)&&(kn=null),Sn!==null&&wo(Sn)&&(Sn=null),En!==null&&wo(En)&&(En=null),ni.forEach(vh),ri.forEach(vh)}function gs(t,e){t.blockedOn===e&&(t.blockedOn=null,ql||(ql=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,pv)))}function si(t){function e(s){return gs(s,t)}if(0<Wi.length){gs(Wi[0],t);for(var n=1;n<Wi.length;n++){var r=Wi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kn!==null&&gs(kn,t),Sn!==null&&gs(Sn,t),En!==null&&gs(En,t),ni.forEach(e),ri.forEach(e),n=0;n<gn.length;n++)r=gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gn.length&&(n=gn[0],n.blockedOn===null);)Lp(n),n.blockedOn===null&&gn.shift()}var Vr=on.ReactCurrentBatchConfig,$o=!0;function gv(t,e,n,r){var s=Z,i=Vr.transition;Vr.transition=null;try{Z=1,rc(t,e,n,r)}finally{Z=s,Vr.transition=i}}function mv(t,e,n,r){var s=Z,i=Vr.transition;Vr.transition=null;try{Z=4,rc(t,e,n,r)}finally{Z=s,Vr.transition=i}}function rc(t,e,n,r){if($o){var s=Kl(t,e,n,r);if(s===null)el(t,e,r,zo,n),yh(t,r);else if(fv(s,t,e,n,r))r.stopPropagation();else if(yh(t,r),e&4&&-1<dv.indexOf(t)){for(;s!==null;){var i=Ai(s);if(i!==null&&Np(i),i=Kl(t,e,n,r),i===null&&el(t,e,r,zo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else el(t,e,r,null,n)}}var zo=null;function Kl(t,e,n,r){if(zo=null,t=Zu(r),t=Qn(t),t!==null)if(e=fr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ep(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zo=t,null}function $p(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case ec:return 1;case Pp:return 4;case Do:case sv:return 16;case Rp:return 536870912;default:return 16}default:return 16}}var vn=null,sc=null,bo=null;function zp(){if(bo)return bo;var t,e=sc,n=e.length,r,s="value"in vn?vn.value:vn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bo=s.slice(t,1<r?1-r:void 0)}function xo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hi(){return!0}function _h(){return!1}function ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hi:_h,this.isPropagationStopped=_h,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=ut(us),ji=de({},us,{view:0,detail:0}),yv=ut(ji),Va,qa,ms,_a=de({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ms&&(ms&&t.type==="mousemove"?(Va=t.screenX-ms.screenX,qa=t.screenY-ms.screenY):qa=Va=0,ms=t),Va)},movementY:function(t){return"movementY"in t?t.movementY:qa}}),wh=ut(_a),vv=de({},_a,{dataTransfer:0}),_v=ut(vv),wv=de({},ji,{relatedTarget:0}),Ka=ut(wv),bv=de({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),xv=ut(bv),kv=de({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sv=ut(kv),Ev=de({},us,{data:0}),bh=ut(Ev),Cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ov={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ov[t])?!!e[t]:!1}function oc(){return Pv}var Rv=de({},ji,{key:function(t){if(t.key){var e=Cv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(t){return t.type==="keypress"?xo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jv=ut(Rv),Av=de({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xh=ut(Av),Nv=de({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Iv=ut(Nv),Mv=de({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dv=ut(Mv),Lv=de({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=ut(Lv),zv=[9,13,27,32],ac=en&&"CompositionEvent"in window,Ls=null;en&&"documentMode"in document&&(Ls=document.documentMode);var Fv=en&&"TextEvent"in window&&!Ls,Fp=en&&(!ac||Ls&&8<Ls&&11>=Ls),kh=" ",Sh=!1;function Up(t,e){switch(t){case"keyup":return zv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pr=!1;function Uv(t,e){switch(t){case"compositionend":return Bp(e);case"keypress":return e.which!==32?null:(Sh=!0,kh);case"textInput":return t=e.data,t===kh&&Sh?null:t;default:return null}}function Bv(t,e){if(Pr)return t==="compositionend"||!ac&&Up(t,e)?(t=zp(),bo=sc=vn=null,Pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fp&&e.locale!=="ko"?null:e.data;default:return null}}var Wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wv[t.type]:e==="textarea"}function Wp(t,e,n,r){wp(r),e=Fo(e,"onChange"),0<e.length&&(n=new ic("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $s=null,ii=null;function Hv(t){eg(t,0)}function wa(t){var e=Ar(t);if(fp(e))return t}function Vv(t,e){if(t==="change")return e}var Hp=!1;if(en){var Ga;if(en){var Ya="oninput"in document;if(!Ya){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),Ya=typeof Ch.oninput=="function"}Ga=Ya}else Ga=!1;Hp=Ga&&(!document.documentMode||9<document.documentMode)}function Th(){$s&&($s.detachEvent("onpropertychange",Vp),ii=$s=null)}function Vp(t){if(t.propertyName==="value"&&wa(ii)){var e=[];Wp(e,ii,t,Zu(t)),Sp(Hv,e)}}function qv(t,e,n){t==="focusin"?(Th(),$s=e,ii=n,$s.attachEvent("onpropertychange",Vp)):t==="focusout"&&Th()}function Kv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wa(ii)}function Gv(t,e){if(t==="click")return wa(e)}function Yv(t,e){if(t==="input"||t==="change")return wa(e)}function Jv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jt=typeof Object.is=="function"?Object.is:Jv;function oi(t,e){if(jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pl.call(e,s)||!jt(t[s],e[s]))return!1}return!0}function Oh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ph(t,e){var n=Oh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Oh(n)}}function qp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kp(){for(var t=window,e=No();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=No(t.document)}return e}function lc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xv(t){var e=Kp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qp(n.ownerDocument.documentElement,n)){if(r!==null&&lc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ph(n,i);var o=Ph(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qv=en&&"documentMode"in document&&11>=document.documentMode,Rr=null,Gl=null,zs=null,Yl=!1;function Rh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yl||Rr==null||Rr!==No(r)||(r=Rr,"selectionStart"in r&&lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&oi(zs,r)||(zs=r,r=Fo(Gl,"onSelect"),0<r.length&&(e=new ic("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rr)))}function Vi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},Ja={},Gp={};en&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);function ba(t){if(Ja[t])return Ja[t];if(!jr[t])return t;var e=jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gp)return Ja[t]=e[n];return t}var Yp=ba("animationend"),Jp=ba("animationiteration"),Xp=ba("animationstart"),Qp=ba("transitionend"),Zp=new Map,jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){Zp.set(t,e),dr(e,[t])}for(var Xa=0;Xa<jh.length;Xa++){var Qa=jh[Xa],Zv=Qa.toLowerCase(),e0=Qa[0].toUpperCase()+Qa.slice(1);Dn(Zv,"on"+e0)}Dn(Yp,"onAnimationEnd");Dn(Jp,"onAnimationIteration");Dn(Xp,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(Qp,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Ah(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zy(r,e,void 0,t),t.currentTarget=null}function eg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ah(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ah(s,a,u),i=l}}}if(Mo)throw t=Hl,Mo=!1,Hl=null,t}function ie(t,e){var n=e[eu];n===void 0&&(n=e[eu]=new Set);var r=t+"__bubble";n.has(r)||(tg(e,t,2,!1),n.add(r))}function Za(t,e,n){var r=0;e&&(r|=4),tg(n,t,r,e)}var qi="_reactListening"+Math.random().toString(36).slice(2);function ai(t){if(!t[qi]){t[qi]=!0,lp.forEach(function(n){n!=="selectionchange"&&(t0.has(n)||Za(n,!1,t),Za(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qi]||(e[qi]=!0,Za("selectionchange",!1,e))}}function tg(t,e,n,r){switch($p(e)){case 1:var s=gv;break;case 4:s=mv;break;default:s=rc}n=s.bind(null,e,n,t),s=void 0,!Wl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function el(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Sp(function(){var u=i,c=Zu(n),h=[];e:{var d=Zp.get(t);if(d!==void 0){var f=ic,g=t;switch(t){case"keypress":if(xo(n)===0)break e;case"keydown":case"keyup":f=jv;break;case"focusin":g="focus",f=Ka;break;case"focusout":g="blur",f=Ka;break;case"beforeblur":case"afterblur":f=Ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=_v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Iv;break;case Yp:case Jp:case Xp:f=xv;break;case Qp:f=Dv;break;case"scroll":f=yv;break;case"wheel":f=$v;break;case"copy":case"cut":case"paste":f=Sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xh}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?d!==null?d+"Capture":null:d;y=[];for(var m=u,_;m!==null;){_=m;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,p!==null&&(b=ti(m,p),b!=null&&y.push(li(m,b,_)))),w)break;m=m.return}0<y.length&&(d=new f(d,g,null,n,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Ul&&(g=n.relatedTarget||n.fromElement)&&(Qn(g)||g[tn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?Qn(g):null,g!==null&&(w=fr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=wh,b="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=xh,b="onPointerLeave",p="onPointerEnter",m="pointer"),w=f==null?d:Ar(f),_=g==null?d:Ar(g),d=new y(b,m+"leave",f,n,c),d.target=w,d.relatedTarget=_,b=null,Qn(c)===u&&(y=new y(p,m+"enter",g,n,c),y.target=_,y.relatedTarget=w,b=y),w=b,f&&g)t:{for(y=f,p=g,m=0,_=y;_;_=gr(_))m++;for(_=0,b=p;b;b=gr(b))_++;for(;0<m-_;)y=gr(y),m--;for(;0<_-m;)p=gr(p),_--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=gr(y),p=gr(p)}y=null}else y=null;f!==null&&Nh(h,d,f,y,!1),g!==null&&w!==null&&Nh(h,w,g,y,!0)}}e:{if(d=u?Ar(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=Vv;else if(Eh(d))if(Hp)x=Yv;else{x=Kv;var k=qv}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Gv);if(x&&(x=x(t,u))){Wp(h,x,n,c);break e}k&&k(t,d,u),t==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Dl(d,"number",d.value)}switch(k=u?Ar(u):window,t){case"focusin":(Eh(k)||k.contentEditable==="true")&&(Rr=k,Gl=u,zs=null);break;case"focusout":zs=Gl=Rr=null;break;case"mousedown":Yl=!0;break;case"contextmenu":case"mouseup":case"dragend":Yl=!1,Rh(h,n,c);break;case"selectionchange":if(Qv)break;case"keydown":case"keyup":Rh(h,n,c)}var S;if(ac)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pr?Up(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Fp&&n.locale!=="ko"&&(Pr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pr&&(S=zp()):(vn=c,sc="value"in vn?vn.value:vn.textContent,Pr=!0)),k=Fo(u,E),0<k.length&&(E=new bh(E,t,null,n,c),h.push({event:E,listeners:k}),S?E.data=S:(S=Bp(n),S!==null&&(E.data=S)))),(S=Fv?Uv(t,n):Bv(t,n))&&(u=Fo(u,"onBeforeInput"),0<u.length&&(c=new bh("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=S))}eg(h,e)})}function li(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fo(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ti(t,n),i!=null&&r.unshift(li(t,i,s)),i=ti(t,e),i!=null&&r.push(li(t,i,s))),t=t.return}return r}function gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ti(n,i),l!=null&&o.unshift(li(n,l,a))):s||(l=ti(n,i),l!=null&&o.push(li(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var n0=/\r\n?/g,r0=/\u0000|\uFFFD/g;function Ih(t){return(typeof t=="string"?t:""+t).replace(n0,`
`).replace(r0,"")}function Ki(t,e,n){if(e=Ih(e),Ih(t)!==e&&n)throw Error(O(425))}function Uo(){}var Jl=null,Xl=null;function Ql(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zl=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(t){return Mh.resolve(null).then(t).catch(o0)}:Zl;function o0(t){setTimeout(function(){throw t})}function tl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),si(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);si(e)}function Cn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),$t="__reactFiber$"+cs,ui="__reactProps$"+cs,tn="__reactContainer$"+cs,eu="__reactEvents$"+cs,a0="__reactListeners$"+cs,l0="__reactHandles$"+cs;function Qn(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tn]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dh(t);t!==null;){if(n=t[$t])return n;t=Dh(t)}return e}t=n,n=t.parentNode}return null}function Ai(t){return t=t[$t]||t[tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ar(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function xa(t){return t[ui]||null}var tu=[],Nr=-1;function Ln(t){return{current:t}}function ae(t){0>Nr||(t.current=tu[Nr],tu[Nr]=null,Nr--)}function re(t,e){Nr++,tu[Nr]=t.current,t.current=e}var In={},Le=Ln(In),Je=Ln(!1),or=In;function Zr(t,e){var n=t.type.contextTypes;if(!n)return In;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xe(t){return t=t.childContextTypes,t!=null}function Bo(){ae(Je),ae(Le)}function Lh(t,e,n){if(Le.current!==In)throw Error(O(168));re(Le,e),re(Je,n)}function ng(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(O(108,qy(t)||"Unknown",s));return de({},n,r)}function Wo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,or=Le.current,re(Le,t),re(Je,Je.current),!0}function $h(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=ng(t,e,or),r.__reactInternalMemoizedMergedChildContext=t,ae(Je),ae(Le),re(Le,t)):ae(Je),re(Je,n)}var Gt=null,ka=!1,nl=!1;function rg(t){Gt===null?Gt=[t]:Gt.push(t)}function u0(t){ka=!0,rg(t)}function $n(){if(!nl&&Gt!==null){nl=!0;var t=0,e=Z;try{var n=Gt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gt=null,ka=!1}catch(s){throw Gt!==null&&(Gt=Gt.slice(t+1)),Op(ec,$n),s}finally{Z=e,nl=!1}}return null}var Ir=[],Mr=0,Ho=null,Vo=0,pt=[],gt=0,ar=null,Jt=1,Xt="";function Vn(t,e){Ir[Mr++]=Vo,Ir[Mr++]=Ho,Ho=t,Vo=e}function sg(t,e,n){pt[gt++]=Jt,pt[gt++]=Xt,pt[gt++]=ar,ar=t;var r=Jt;t=Xt;var s=32-Pt(r)-1;r&=~(1<<s),n+=1;var i=32-Pt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Jt=1<<32-Pt(e)+s|n<<s|r,Xt=i+t}else Jt=1<<i|n<<s|r,Xt=t}function uc(t){t.return!==null&&(Vn(t,1),sg(t,1,0))}function cc(t){for(;t===Ho;)Ho=Ir[--Mr],Ir[Mr]=null,Vo=Ir[--Mr],Ir[Mr]=null;for(;t===ar;)ar=pt[--gt],pt[gt]=null,Xt=pt[--gt],pt[gt]=null,Jt=pt[--gt],pt[gt]=null}var ot=null,it=null,le=!1,Ot=null;function ig(t,e){var n=mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,it=Cn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,it=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ar!==null?{id:Jt,overflow:Xt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ot=t,it=null,!0):!1;default:return!1}}function nu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ru(t){if(le){var e=it;if(e){var n=e;if(!zh(t,e)){if(nu(t))throw Error(O(418));e=Cn(n.nextSibling);var r=ot;e&&zh(t,e)?ig(r,n):(t.flags=t.flags&-4097|2,le=!1,ot=t)}}else{if(nu(t))throw Error(O(418));t.flags=t.flags&-4097|2,le=!1,ot=t}}}function Fh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function Gi(t){if(t!==ot)return!1;if(!le)return Fh(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ql(t.type,t.memoizedProps)),e&&(e=it)){if(nu(t))throw og(),Error(O(418));for(;e;)ig(t,e),e=Cn(e.nextSibling)}if(Fh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){it=Cn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}it=null}}else it=ot?Cn(t.stateNode.nextSibling):null;return!0}function og(){for(var t=it;t;)t=Cn(t.nextSibling)}function es(){it=ot=null,le=!1}function hc(t){Ot===null?Ot=[t]:Ot.push(t)}var c0=on.ReactCurrentBatchConfig;function ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Yi(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uh(t){var e=t._init;return e(t._payload)}function ag(t){function e(p,m){if(t){var _=p.deletions;_===null?(p.deletions=[m],p.flags|=16):_.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=Rn(p,m),p.index=0,p.sibling=null,p}function i(p,m,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<m?(p.flags|=2,m):_):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,_,b){return m===null||m.tag!==6?(m=ul(_,p.mode,b),m.return=p,m):(m=s(m,_),m.return=p,m)}function l(p,m,_,b){var x=_.type;return x===Or?c(p,m,_.props.children,b,_.key):m!==null&&(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===dn&&Uh(x)===m.type)?(b=s(m,_.props),b.ref=ys(p,m,_),b.return=p,b):(b=Po(_.type,_.key,_.props,null,p.mode,b),b.ref=ys(p,m,_),b.return=p,b)}function u(p,m,_,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=cl(_,p.mode,b),m.return=p,m):(m=s(m,_.children||[]),m.return=p,m)}function c(p,m,_,b,x){return m===null||m.tag!==7?(m=sr(_,p.mode,b,x),m.return=p,m):(m=s(m,_),m.return=p,m)}function h(p,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ul(""+m,p.mode,_),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $i:return _=Po(m.type,m.key,m.props,null,p.mode,_),_.ref=ys(p,null,m),_.return=p,_;case Tr:return m=cl(m,p.mode,_),m.return=p,m;case dn:var b=m._init;return h(p,b(m._payload),_)}if(Cs(m)||ds(m))return m=sr(m,p.mode,_,null),m.return=p,m;Yi(p,m)}return null}function d(p,m,_,b){var x=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(p,m,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $i:return _.key===x?l(p,m,_,b):null;case Tr:return _.key===x?u(p,m,_,b):null;case dn:return x=_._init,d(p,m,x(_._payload),b)}if(Cs(_)||ds(_))return x!==null?null:c(p,m,_,b,null);Yi(p,_)}return null}function f(p,m,_,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(_)||null,a(m,p,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $i:return p=p.get(b.key===null?_:b.key)||null,l(m,p,b,x);case Tr:return p=p.get(b.key===null?_:b.key)||null,u(m,p,b,x);case dn:var k=b._init;return f(p,m,_,k(b._payload),x)}if(Cs(b)||ds(b))return p=p.get(_)||null,c(m,p,b,x,null);Yi(m,b)}return null}function g(p,m,_,b){for(var x=null,k=null,S=m,E=m=0,P=null;S!==null&&E<_.length;E++){S.index>E?(P=S,S=null):P=S.sibling;var C=d(p,S,_[E],b);if(C===null){S===null&&(S=P);break}t&&S&&C.alternate===null&&e(p,S),m=i(C,m,E),k===null?x=C:k.sibling=C,k=C,S=P}if(E===_.length)return n(p,S),le&&Vn(p,E),x;if(S===null){for(;E<_.length;E++)S=h(p,_[E],b),S!==null&&(m=i(S,m,E),k===null?x=S:k.sibling=S,k=S);return le&&Vn(p,E),x}for(S=r(p,S);E<_.length;E++)P=f(S,p,E,_[E],b),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?E:P.key),m=i(P,m,E),k===null?x=P:k.sibling=P,k=P);return t&&S.forEach(function(T){return e(p,T)}),le&&Vn(p,E),x}function y(p,m,_,b){var x=ds(_);if(typeof x!="function")throw Error(O(150));if(_=x.call(_),_==null)throw Error(O(151));for(var k=x=null,S=m,E=m=0,P=null,C=_.next();S!==null&&!C.done;E++,C=_.next()){S.index>E?(P=S,S=null):P=S.sibling;var T=d(p,S,C.value,b);if(T===null){S===null&&(S=P);break}t&&S&&T.alternate===null&&e(p,S),m=i(T,m,E),k===null?x=T:k.sibling=T,k=T,S=P}if(C.done)return n(p,S),le&&Vn(p,E),x;if(S===null){for(;!C.done;E++,C=_.next())C=h(p,C.value,b),C!==null&&(m=i(C,m,E),k===null?x=C:k.sibling=C,k=C);return le&&Vn(p,E),x}for(S=r(p,S);!C.done;E++,C=_.next())C=f(S,p,E,C.value,b),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?E:C.key),m=i(C,m,E),k===null?x=C:k.sibling=C,k=C);return t&&S.forEach(function(D){return e(p,D)}),le&&Vn(p,E),x}function w(p,m,_,b){if(typeof _=="object"&&_!==null&&_.type===Or&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case $i:e:{for(var x=_.key,k=m;k!==null;){if(k.key===x){if(x=_.type,x===Or){if(k.tag===7){n(p,k.sibling),m=s(k,_.props.children),m.return=p,p=m;break e}}else if(k.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===dn&&Uh(x)===k.type){n(p,k.sibling),m=s(k,_.props),m.ref=ys(p,k,_),m.return=p,p=m;break e}n(p,k);break}else e(p,k);k=k.sibling}_.type===Or?(m=sr(_.props.children,p.mode,b,_.key),m.return=p,p=m):(b=Po(_.type,_.key,_.props,null,p.mode,b),b.ref=ys(p,m,_),b.return=p,p=b)}return o(p);case Tr:e:{for(k=_.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(p,m.sibling),m=s(m,_.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=cl(_,p.mode,b),m.return=p,p=m}return o(p);case dn:return k=_._init,w(p,m,k(_._payload),b)}if(Cs(_))return g(p,m,_,b);if(ds(_))return y(p,m,_,b);Yi(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,_),m.return=p,p=m):(n(p,m),m=ul(_,p.mode,b),m.return=p,p=m),o(p)):n(p,m)}return w}var ts=ag(!0),lg=ag(!1),qo=Ln(null),Ko=null,Dr=null,dc=null;function fc(){dc=Dr=Ko=null}function pc(t){var e=qo.current;ae(qo),t._currentValue=e}function su(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qr(t,e){Ko=t,dc=Dr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ge=!0),t.firstContext=null)}function vt(t){var e=t._currentValue;if(dc!==t)if(t={context:t,memoizedValue:e,next:null},Dr===null){if(Ko===null)throw Error(O(308));Dr=t,Ko.dependencies={lanes:0,firstContext:t}}else Dr=Dr.next=t;return e}var Zn=null;function gc(t){Zn===null?Zn=[t]:Zn.push(t)}function ug(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gc(e)):(n.next=s.next,s.next=n),e.interleaved=n,nn(t,r)}function nn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fn=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nn(t,n)}return s=r.interleaved,s===null?(e.next=e,gc(r)):(e.next=s.next,s.next=e),r.interleaved=e,nn(t,n)}function ko(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tc(t,n)}}function Bh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Go(t,e,n,r){var s=t.updateQueue;fn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(d=e,f=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=de({},h,d);break e;case 2:fn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ur|=o,t.lanes=o,t.memoizedState=h}}function Wh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(O(191,s));s.call(r)}}}var Ni={},Bt=Ln(Ni),ci=Ln(Ni),hi=Ln(Ni);function er(t){if(t===Ni)throw Error(O(174));return t}function yc(t,e){switch(re(hi,e),re(ci,t),re(Bt,Ni),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}ae(Bt),re(Bt,e)}function ns(){ae(Bt),ae(ci),ae(hi)}function hg(t){er(hi.current);var e=er(Bt.current),n=$l(e,t.type);e!==n&&(re(ci,t),re(Bt,n))}function vc(t){ci.current===t&&(ae(Bt),ae(ci))}var ce=Ln(0);function Yo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rl=[];function _c(){for(var t=0;t<rl.length;t++)rl[t]._workInProgressVersionPrimary=null;rl.length=0}var So=on.ReactCurrentDispatcher,sl=on.ReactCurrentBatchConfig,lr=0,he=null,be=null,Ee=null,Jo=!1,Fs=!1,di=0,h0=0;function Ie(){throw Error(O(321))}function wc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jt(t[n],e[n]))return!1;return!0}function bc(t,e,n,r,s,i){if(lr=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,So.current=t===null||t.memoizedState===null?g0:m0,t=n(r,s),Fs){i=0;do{if(Fs=!1,di=0,25<=i)throw Error(O(301));i+=1,Ee=be=null,e.updateQueue=null,So.current=y0,t=n(r,s)}while(Fs)}if(So.current=Xo,e=be!==null&&be.next!==null,lr=0,Ee=be=he=null,Jo=!1,e)throw Error(O(300));return t}function xc(){var t=di!==0;return di=0,t}function Dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?he.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function _t(){if(be===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Ee===null?he.memoizedState:Ee.next;if(e!==null)Ee=e,be=t;else{if(t===null)throw Error(O(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ee===null?he.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function fi(t,e){return typeof e=="function"?e(t):e}function il(t){var e=_t(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((lr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,he.lanes|=c,ur|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,jt(r,e.memoizedState)||(Ge=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,he.lanes|=i,ur|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ol(t){var e=_t(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);jt(i,e.memoizedState)||(Ge=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dg(){}function fg(t,e){var n=he,r=_t(),s=e(),i=!jt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ge=!0),r=r.queue,kc(mg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,pi(9,gg.bind(null,n,r,s,e),void 0,null),Ce===null)throw Error(O(349));lr&30||pg(n,e,s)}return s}function pg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gg(t,e,n,r){e.value=n,e.getSnapshot=r,yg(e)&&vg(t)}function mg(t,e,n){return n(function(){yg(e)&&vg(t)})}function yg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jt(t,n)}catch{return!0}}function vg(t){var e=nn(t,1);e!==null&&Rt(e,t,1,-1)}function Hh(t){var e=Dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:t},e.queue=t,t=t.dispatch=p0.bind(null,he,t),[e.memoizedState,t]}function pi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _g(){return _t().memoizedState}function Eo(t,e,n,r){var s=Dt();he.flags|=t,s.memoizedState=pi(1|e,n,void 0,r===void 0?null:r)}function Sa(t,e,n,r){var s=_t();r=r===void 0?null:r;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,r!==null&&wc(r,o.deps)){s.memoizedState=pi(e,n,i,r);return}}he.flags|=t,s.memoizedState=pi(1|e,n,i,r)}function Vh(t,e){return Eo(8390656,8,t,e)}function kc(t,e){return Sa(2048,8,t,e)}function wg(t,e){return Sa(4,2,t,e)}function bg(t,e){return Sa(4,4,t,e)}function xg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kg(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4,4,xg.bind(null,e,t),n)}function Sc(){}function Sg(t,e){var n=_t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Eg(t,e){var n=_t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cg(t,e,n){return lr&21?(jt(n,e)||(n=jp(),he.lanes|=n,ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ge=!0),t.memoizedState=n)}function d0(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=sl.transition;sl.transition={};try{t(!1),e()}finally{Z=n,sl.transition=r}}function Tg(){return _t().memoizedState}function f0(t,e,n){var r=Pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Og(t))Pg(e,n);else if(n=ug(t,e,n,r),n!==null){var s=Be();Rt(n,t,r,s),Rg(n,e,r)}}function p0(t,e,n){var r=Pn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Og(t))Pg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,jt(a,o)){var l=e.interleaved;l===null?(s.next=s,gc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ug(t,e,s,r),n!==null&&(s=Be(),Rt(n,t,r,s),Rg(n,e,r))}}function Og(t){var e=t.alternate;return t===he||e!==null&&e===he}function Pg(t,e){Fs=Jo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tc(t,n)}}var Xo={readContext:vt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},g0={readContext:vt,useCallback:function(t,e){return Dt().memoizedState=[t,e===void 0?null:e],t},useContext:vt,useEffect:Vh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Eo(4194308,4,xg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eo(4,2,t,e)},useMemo:function(t,e){var n=Dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=f0.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=Dt();return t={current:t},e.memoizedState=t},useState:Hh,useDebugValue:Sc,useDeferredValue:function(t){return Dt().memoizedState=t},useTransition:function(){var t=Hh(!1),e=t[0];return t=d0.bind(null,t[1]),Dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,s=Dt();if(le){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Ce===null)throw Error(O(349));lr&30||pg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vh(mg.bind(null,r,i,t),[t]),r.flags|=2048,pi(9,gg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Dt(),e=Ce.identifierPrefix;if(le){var n=Xt,r=Jt;n=(r&~(1<<32-Pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=di++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},m0={readContext:vt,useCallback:Sg,useContext:vt,useEffect:kc,useImperativeHandle:kg,useInsertionEffect:wg,useLayoutEffect:bg,useMemo:Eg,useReducer:il,useRef:_g,useState:function(){return il(fi)},useDebugValue:Sc,useDeferredValue:function(t){var e=_t();return Cg(e,be.memoizedState,t)},useTransition:function(){var t=il(fi)[0],e=_t().memoizedState;return[t,e]},useMutableSource:dg,useSyncExternalStore:fg,useId:Tg,unstable_isNewReconciler:!1},y0={readContext:vt,useCallback:Sg,useContext:vt,useEffect:kc,useImperativeHandle:kg,useInsertionEffect:wg,useLayoutEffect:bg,useMemo:Eg,useReducer:ol,useRef:_g,useState:function(){return ol(fi)},useDebugValue:Sc,useDeferredValue:function(t){var e=_t();return be===null?e.memoizedState=t:Cg(e,be.memoizedState,t)},useTransition:function(){var t=ol(fi)[0],e=_t().memoizedState;return[t,e]},useMutableSource:dg,useSyncExternalStore:fg,useId:Tg,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function iu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:de({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ea={isMounted:function(t){return(t=t._reactInternals)?fr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Be(),s=Pn(t),i=Zt(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tn(t,i,s),e!==null&&(Rt(e,t,s,r),ko(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Be(),s=Pn(t),i=Zt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tn(t,i,s),e!==null&&(Rt(e,t,s,r),ko(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Be(),r=Pn(t),s=Zt(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tn(t,s,r),e!==null&&(Rt(e,t,r,n),ko(e,t,r))}};function qh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oi(n,r)||!oi(s,i):!0}function jg(t,e,n){var r=!1,s=In,i=e.contextType;return typeof i=="object"&&i!==null?i=vt(i):(s=Xe(e)?or:Le.current,r=e.contextTypes,i=(r=r!=null)?Zr(t,s):In),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ea,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Kh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ea.enqueueReplaceState(e,e.state,null)}function ou(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vt(i):(i=Xe(e)?or:Le.current,s.context=Zr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(iu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ea.enqueueReplaceState(s,s.state,null),Go(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rs(t,e){try{var n="",r=e;do n+=Vy(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function al(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function au(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function Ag(t,e,n){n=Zt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zo||(Zo=!0,yu=r),au(t,e)},n}function Ng(t,e,n){n=Zt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){au(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){au(t,e),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=A0.bind(null,t,e,n),e.then(t,t))}function Yh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zt(-1,1),e.tag=2,Tn(n,e,1))),n.lanes|=1),t)}var _0=on.ReactCurrentOwner,Ge=!1;function Fe(t,e,n,r){e.child=t===null?lg(e,null,n,r):ts(e,t.child,n,r)}function Xh(t,e,n,r,s){n=n.render;var i=e.ref;return qr(e,s),r=bc(t,e,n,r,i,s),n=xc(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rn(t,e,s)):(le&&n&&uc(e),e.flags|=1,Fe(t,e,r,s),e.child)}function Qh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ac(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ig(t,e,i,r,s)):(t=Po(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oi,n(o,r)&&t.ref===e.ref)return rn(t,e,s)}return e.flags|=1,t=Rn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ig(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oi(i,r)&&t.ref===e.ref)if(Ge=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ge=!0);else return e.lanes=t.lanes,rn(t,e,s)}return lu(t,e,n,r,s)}function Mg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re($r,nt),nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re($r,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,re($r,nt),nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,re($r,nt),nt|=r;return Fe(t,e,s,n),e.child}function Dg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lu(t,e,n,r,s){var i=Xe(n)?or:Le.current;return i=Zr(e,i),qr(e,s),n=bc(t,e,n,r,i,s),r=xc(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rn(t,e,s)):(le&&r&&uc(e),e.flags|=1,Fe(t,e,n,s),e.child)}function Zh(t,e,n,r,s){if(Xe(n)){var i=!0;Wo(e)}else i=!1;if(qr(e,s),e.stateNode===null)Co(t,e),jg(e,n,r),ou(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vt(u):(u=Xe(n)?or:Le.current,u=Zr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Kh(e,o,r,u),fn=!1;var d=e.memoizedState;o.state=d,Go(e,r,o,s),l=e.memoizedState,a!==r||d!==l||Je.current||fn?(typeof c=="function"&&(iu(e,n,c,r),l=e.memoizedState),(a=fn||qh(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kt(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vt(l):(l=Xe(n)?or:Le.current,l=Zr(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Kh(e,o,r,l),fn=!1,d=e.memoizedState,o.state=d,Go(e,r,o,s);var g=e.memoizedState;a!==h||d!==g||Je.current||fn?(typeof f=="function"&&(iu(e,n,f,r),g=e.memoizedState),(u=fn||qh(e,n,u,r,d,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return uu(t,e,n,r,i,s)}function uu(t,e,n,r,s,i){Dg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&$h(e,n,!1),rn(t,e,i);r=e.stateNode,_0.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ts(e,t.child,null,i),e.child=ts(e,null,a,i)):Fe(t,e,a,i),e.memoizedState=r.state,s&&$h(e,n,!0),e.child}function Lg(t){var e=t.stateNode;e.pendingContext?Lh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lh(t,e.context,!1),yc(t,e.containerInfo)}function ed(t,e,n,r,s){return es(),hc(s),e.flags|=256,Fe(t,e,n,r),e.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function hu(t){return{baseLanes:t,cachePool:null,transitions:null}}function $g(t,e,n){var r=e.pendingProps,s=ce.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(ce,s&1),t===null)return ru(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Oa(o,r,0,null),t=sr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hu(n),e.memoizedState=cu,t):Ec(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return w0(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Rn(a,i):(i=sr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cu,r}return i=t.child,t=i.sibling,r=Rn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ec(t,e){return e=Oa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ji(t,e,n,r){return r!==null&&hc(r),ts(e,t.child,null,n),t=Ec(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=al(Error(O(422))),Ji(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Oa({mode:"visible",children:r.children},s,0,null),i=sr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ts(e,t.child,null,o),e.child.memoizedState=hu(o),e.memoizedState=cu,i);if(!(e.mode&1))return Ji(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(O(419)),r=al(i,r,void 0),Ji(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ge||a){if(r=Ce,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nn(t,s),Rt(r,t,s,-1))}return jc(),r=al(Error(O(421))),Ji(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=N0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,it=Cn(s.nextSibling),ot=e,le=!0,Ot=null,t!==null&&(pt[gt++]=Jt,pt[gt++]=Xt,pt[gt++]=ar,Jt=t.id,Xt=t.overflow,ar=e),e=Ec(e,r.children),e.flags|=4096,e)}function td(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),su(t.return,e,n)}function ll(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Fe(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&td(t,n,e);else if(t.tag===19)td(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ll(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ll(e,!0,n,null,i);break;case"together":ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Co(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b0(t,e,n){switch(e.tag){case 3:Lg(e),es();break;case 5:hg(e);break;case 1:Xe(e.type)&&Wo(e);break;case 4:yc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;re(qo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?$g(t,e,n):(re(ce,ce.current&1),t=rn(t,e,n),t!==null?t.sibling:null);re(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Mg(t,e,n)}return rn(t,e,n)}var Fg,du,Ug,Bg;Fg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};du=function(){};Ug=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,er(Bt.current);var i=null;switch(n){case"input":s=Il(t,s),r=Il(t,r),i=[];break;case"select":s=de({},s,{value:void 0}),r=de({},r,{value:void 0}),i=[];break;case"textarea":s=Ll(t,s),r=Ll(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uo)}zl(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ie("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Bg=function(t,e,n,r){n!==r&&(e.flags|=4)};function vs(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Me(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function x0(t,e,n){var r=e.pendingProps;switch(cc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(e),null;case 1:return Xe(e.type)&&Bo(),Me(e),null;case 3:return r=e.stateNode,ns(),ae(Je),ae(Le),_c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ot!==null&&(wu(Ot),Ot=null))),du(t,e),Me(e),null;case 5:vc(e);var s=er(hi.current);if(n=e.type,t!==null&&e.stateNode!=null)Ug(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Me(e),null}if(t=er(Bt.current),Gi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$t]=e,r[ui]=i,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",r),ie("close",r);break;case"iframe":case"object":case"embed":ie("load",r);break;case"video":case"audio":for(s=0;s<Os.length;s++)ie(Os[s],r);break;case"source":ie("error",r);break;case"img":case"image":case"link":ie("error",r),ie("load",r);break;case"details":ie("toggle",r);break;case"input":ch(r,i),ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ie("invalid",r);break;case"textarea":dh(r,i),ie("invalid",r)}zl(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ki(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ki(r.textContent,a,t),s=["children",""+a]):Zs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ie("scroll",r)}switch(n){case"input":zi(r),hh(r,i,!0);break;case"textarea":zi(r),fh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uo)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$t]=e,t[ui]=r,Fg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fl(n,r),n){case"dialog":ie("cancel",t),ie("close",t),s=r;break;case"iframe":case"object":case"embed":ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Os.length;s++)ie(Os[s],t);s=r;break;case"source":ie("error",t),s=r;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=r;break;case"details":ie("toggle",t),s=r;break;case"input":ch(t,r),s=Il(t,r),ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=de({},r,{value:void 0}),ie("invalid",t);break;case"textarea":dh(t,r),s=Ll(t,r),ie("invalid",t);break;default:s=r}zl(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_p(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yp(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ei(t,l):typeof l=="number"&&ei(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zs.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ie("scroll",t):l!=null&&Yu(t,i,l,o))}switch(n){case"input":zi(t),hh(t,r,!1);break;case"textarea":zi(t),fh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Br(t,!!r.multiple,i,!1):r.defaultValue!=null&&Br(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Me(e),null;case 6:if(t&&e.stateNode!=null)Bg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=er(hi.current),er(Bt.current),Gi(e)){if(r=e.stateNode,n=e.memoizedProps,r[$t]=e,(i=r.nodeValue!==n)&&(t=ot,t!==null))switch(t.tag){case 3:Ki(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ki(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=e,e.stateNode=r}return Me(e),null;case 13:if(ae(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&it!==null&&e.mode&1&&!(e.flags&128))og(),es(),e.flags|=98560,i=!1;else if(i=Gi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[$t]=e}else es(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Me(e),i=!1}else Ot!==null&&(wu(Ot),Ot=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?xe===0&&(xe=3):jc())),e.updateQueue!==null&&(e.flags|=4),Me(e),null);case 4:return ns(),du(t,e),t===null&&ai(e.stateNode.containerInfo),Me(e),null;case 10:return pc(e.type._context),Me(e),null;case 17:return Xe(e.type)&&Bo(),Me(e),null;case 19:if(ae(ce),i=e.memoizedState,i===null)return Me(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)vs(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yo(t),o!==null){for(e.flags|=128,vs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(ce,ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&me()>ss&&(e.flags|=128,r=!0,vs(i,!1),e.lanes=4194304)}else{if(!r)if(t=Yo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!le)return Me(e),null}else 2*me()-i.renderingStartTime>ss&&n!==1073741824&&(e.flags|=128,r=!0,vs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=me(),e.sibling=null,n=ce.current,re(ce,r?n&1|2:n&1),e):(Me(e),null);case 22:case 23:return Rc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nt&1073741824&&(Me(e),e.subtreeFlags&6&&(e.flags|=8192)):Me(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function k0(t,e){switch(cc(e),e.tag){case 1:return Xe(e.type)&&Bo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ns(),ae(Je),ae(Le),_c(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vc(e),null;case 13:if(ae(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));es()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ae(ce),null;case 4:return ns(),null;case 10:return pc(e.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var Xi=!1,De=!1,S0=typeof WeakSet=="function"?WeakSet:Set,M=null;function Lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function fu(t,e,n){try{n()}catch(r){pe(t,e,r)}}var nd=!1;function E0(t,e){if(Jl=$o,t=Kp(),lc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===s&&(a=o),d===i&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xl={focusedElem:t,selectionRange:n},$o=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:kt(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){pe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return g=nd,nd=!1,g}function Us(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fu(e,n,i)}s=s.next}while(s!==r)}}function Ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wg(t){var e=t.alternate;e!==null&&(t.alternate=null,Wg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[ui],delete e[eu],delete e[a0],delete e[l0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hg(t){return t.tag===5||t.tag===3||t.tag===4}function rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uo));else if(r!==4&&(t=t.child,t!==null))for(gu(t,e,n),t=t.sibling;t!==null;)gu(t,e,n),t=t.sibling}function mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mu(t,e,n),t=t.sibling;t!==null;)mu(t,e,n),t=t.sibling}var Re=null,Et=!1;function cn(t,e,n){for(n=n.child;n!==null;)Vg(t,e,n),n=n.sibling}function Vg(t,e,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(va,n)}catch{}switch(n.tag){case 5:De||Lr(n,e);case 6:var r=Re,s=Et;Re=null,cn(t,e,n),Re=r,Et=s,Re!==null&&(Et?(t=Re,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(Et?(t=Re,n=n.stateNode,t.nodeType===8?tl(t.parentNode,n):t.nodeType===1&&tl(t,n),si(t)):tl(Re,n.stateNode));break;case 4:r=Re,s=Et,Re=n.stateNode.containerInfo,Et=!0,cn(t,e,n),Re=r,Et=s;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fu(n,e,o),s=s.next}while(s!==r)}cn(t,e,n);break;case 1:if(!De&&(Lr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}cn(t,e,n);break;case 21:cn(t,e,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,cn(t,e,n),De=r):cn(t,e,n);break;default:cn(t,e,n)}}function sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new S0),e.forEach(function(r){var s=I0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Re=a.stateNode,Et=!1;break e;case 3:Re=a.stateNode.containerInfo,Et=!0;break e;case 4:Re=a.stateNode.containerInfo,Et=!0;break e}a=a.return}if(Re===null)throw Error(O(160));Vg(i,o,s),Re=null,Et=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){pe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qg(e,t),e=e.sibling}function qg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bt(e,t),Nt(t),r&4){try{Us(3,t,t.return),Ca(3,t)}catch(y){pe(t,t.return,y)}try{Us(5,t,t.return)}catch(y){pe(t,t.return,y)}}break;case 1:bt(e,t),Nt(t),r&512&&n!==null&&Lr(n,n.return);break;case 5:if(bt(e,t),Nt(t),r&512&&n!==null&&Lr(n,n.return),t.flags&32){var s=t.stateNode;try{ei(s,"")}catch(y){pe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&pp(s,i),Fl(a,o);var u=Fl(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?_p(s,h):c==="dangerouslySetInnerHTML"?yp(s,h):c==="children"?ei(s,h):Yu(s,c,h,u)}switch(a){case"input":Ml(s,i);break;case"textarea":gp(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Br(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?Br(s,!!i.multiple,i.defaultValue,!0):Br(s,!!i.multiple,i.multiple?[]:"",!1))}s[ui]=i}catch(y){pe(t,t.return,y)}}break;case 6:if(bt(e,t),Nt(t),r&4){if(t.stateNode===null)throw Error(O(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){pe(t,t.return,y)}}break;case 3:if(bt(e,t),Nt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{si(e.containerInfo)}catch(y){pe(t,t.return,y)}break;case 4:bt(e,t),Nt(t);break;case 13:bt(e,t),Nt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Oc=me())),r&4&&sd(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(De=(u=De)||c,bt(e,t),De=u):bt(e,t),Nt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(M=t,c=t.child;c!==null;){for(h=M=c;M!==null;){switch(d=M,f=d.child,d.tag){case 0:case 11:case 14:case 15:Us(4,d,d.return);break;case 1:Lr(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){pe(r,n,y)}}break;case 5:Lr(d,d.return);break;case 22:if(d.memoizedState!==null){od(h);continue}}f!==null?(f.return=d,M=f):od(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vp("display",o))}catch(y){pe(t,t.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){pe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bt(e,t),Nt(t),r&4&&sd(t);break;case 21:break;default:bt(e,t),Nt(t)}}function Nt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hg(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ei(s,""),r.flags&=-33);var i=rd(t);mu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rd(t);gu(t,a,o);break;default:throw Error(O(161))}}catch(l){pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C0(t,e,n){M=t,Kg(t)}function Kg(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var s=M,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||De;a=Xi;var u=De;if(Xi=o,(De=l)&&!u)for(M=s;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?ad(s):l!==null?(l.return=o,M=l):ad(s);for(;i!==null;)M=i,Kg(i),i=i.sibling;M=s,Xi=a,De=u}id(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,M=i):id(t)}}function id(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||Ca(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!De)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&si(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}De||e.flags&512&&pu(e)}catch(d){pe(e,e.return,d)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function od(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function ad(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ca(4,e)}catch(l){pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pe(e,s,l)}}var i=e.return;try{pu(e)}catch(l){pe(e,i,l)}break;case 5:var o=e.return;try{pu(e)}catch(l){pe(e,o,l)}}}catch(l){pe(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var T0=Math.ceil,Qo=on.ReactCurrentDispatcher,Cc=on.ReactCurrentOwner,yt=on.ReactCurrentBatchConfig,J=0,Ce=null,_e=null,Ae=0,nt=0,$r=Ln(0),xe=0,gi=null,ur=0,Ta=0,Tc=0,Bs=null,qe=null,Oc=0,ss=1/0,qt=null,Zo=!1,yu=null,On=null,Qi=!1,_n=null,ea=0,Ws=0,vu=null,To=-1,Oo=0;function Be(){return J&6?me():To!==-1?To:To=me()}function Pn(t){return t.mode&1?J&2&&Ae!==0?Ae&-Ae:c0.transition!==null?(Oo===0&&(Oo=jp()),Oo):(t=Z,t!==0||(t=window.event,t=t===void 0?16:$p(t.type)),t):1}function Rt(t,e,n,r){if(50<Ws)throw Ws=0,vu=null,Error(O(185));Ri(t,n,r),(!(J&2)||t!==Ce)&&(t===Ce&&(!(J&2)&&(Ta|=n),xe===4&&mn(t,Ae)),Qe(t,r),n===1&&J===0&&!(e.mode&1)&&(ss=me()+500,ka&&$n()))}function Qe(t,e){var n=t.callbackNode;cv(t,e);var r=Lo(t,t===Ce?Ae:0);if(r===0)n!==null&&mh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mh(n),e===1)t.tag===0?u0(ld.bind(null,t)):rg(ld.bind(null,t)),i0(function(){!(J&6)&&$n()}),n=null;else{switch(Ap(r)){case 1:n=ec;break;case 4:n=Pp;break;case 16:n=Do;break;case 536870912:n=Rp;break;default:n=Do}n=tm(n,Gg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gg(t,e){if(To=-1,Oo=0,J&6)throw Error(O(327));var n=t.callbackNode;if(Kr()&&t.callbackNode!==n)return null;var r=Lo(t,t===Ce?Ae:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ta(t,r);else{e=r;var s=J;J|=2;var i=Jg();(Ce!==t||Ae!==e)&&(qt=null,ss=me()+500,rr(t,e));do try{R0();break}catch(a){Yg(t,a)}while(!0);fc(),Qo.current=i,J=s,_e!==null?e=0:(Ce=null,Ae=0,e=xe)}if(e!==0){if(e===2&&(s=Vl(t),s!==0&&(r=s,e=_u(t,s))),e===1)throw n=gi,rr(t,0),mn(t,r),Qe(t,me()),n;if(e===6)mn(t,r);else{if(s=t.current.alternate,!(r&30)&&!O0(s)&&(e=ta(t,r),e===2&&(i=Vl(t),i!==0&&(r=i,e=_u(t,i))),e===1))throw n=gi,rr(t,0),mn(t,r),Qe(t,me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:qn(t,qe,qt);break;case 3:if(mn(t,r),(r&130023424)===r&&(e=Oc+500-me(),10<e)){if(Lo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Be(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Zl(qn.bind(null,t,qe,qt),e);break}qn(t,qe,qt);break;case 4:if(mn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Pt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T0(r/1960))-r,10<r){t.timeoutHandle=Zl(qn.bind(null,t,qe,qt),r);break}qn(t,qe,qt);break;case 5:qn(t,qe,qt);break;default:throw Error(O(329))}}}return Qe(t,me()),t.callbackNode===n?Gg.bind(null,t):null}function _u(t,e){var n=Bs;return t.current.memoizedState.isDehydrated&&(rr(t,e).flags|=256),t=ta(t,e),t!==2&&(e=qe,qe=n,e!==null&&wu(e)),t}function wu(t){qe===null?qe=t:qe.push.apply(qe,t)}function O0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!jt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mn(t,e){for(e&=~Tc,e&=~Ta,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pt(e),r=1<<n;t[n]=-1,e&=~r}}function ld(t){if(J&6)throw Error(O(327));Kr();var e=Lo(t,0);if(!(e&1))return Qe(t,me()),null;var n=ta(t,e);if(t.tag!==0&&n===2){var r=Vl(t);r!==0&&(e=r,n=_u(t,r))}if(n===1)throw n=gi,rr(t,0),mn(t,e),Qe(t,me()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qn(t,qe,qt),Qe(t,me()),null}function Pc(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(ss=me()+500,ka&&$n())}}function cr(t){_n!==null&&_n.tag===0&&!(J&6)&&Kr();var e=J;J|=1;var n=yt.transition,r=Z;try{if(yt.transition=null,Z=1,t)return t()}finally{Z=r,yt.transition=n,J=e,!(J&6)&&$n()}}function Rc(){nt=$r.current,ae($r)}function rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s0(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(cc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bo();break;case 3:ns(),ae(Je),ae(Le),_c();break;case 5:vc(r);break;case 4:ns();break;case 13:ae(ce);break;case 19:ae(ce);break;case 10:pc(r.type._context);break;case 22:case 23:Rc()}n=n.return}if(Ce=t,_e=t=Rn(t.current,null),Ae=nt=e,xe=0,gi=null,Tc=Ta=ur=0,qe=Bs=null,Zn!==null){for(e=0;e<Zn.length;e++)if(n=Zn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Zn=null}return t}function Yg(t,e){do{var n=_e;try{if(fc(),So.current=Xo,Jo){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jo=!1}if(lr=0,Ee=be=he=null,Fs=!1,di=0,Cc.current=null,n===null||n.return===null){xe=1,gi=e,_e=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ae,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Yh(o);if(f!==null){f.flags&=-257,Jh(f,o,a,i,e),f.mode&1&&Gh(i,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){Gh(i,u,e),jc();break e}l=Error(O(426))}}else if(le&&a.mode&1){var w=Yh(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Jh(w,o,a,i,e),hc(rs(l,a));break e}}i=l=rs(l,a),xe!==4&&(xe=2),Bs===null?Bs=[i]:Bs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=Ag(i,l,e);Bh(i,p);break e;case 1:a=l;var m=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(On===null||!On.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=Ng(i,a,e);Bh(i,b);break e}}i=i.return}while(i!==null)}Qg(n)}catch(x){e=x,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function Jg(){var t=Qo.current;return Qo.current=Xo,t===null?Xo:t}function jc(){(xe===0||xe===3||xe===2)&&(xe=4),Ce===null||!(ur&268435455)&&!(Ta&268435455)||mn(Ce,Ae)}function ta(t,e){var n=J;J|=2;var r=Jg();(Ce!==t||Ae!==e)&&(qt=null,rr(t,e));do try{P0();break}catch(s){Yg(t,s)}while(!0);if(fc(),J=n,Qo.current=r,_e!==null)throw Error(O(261));return Ce=null,Ae=0,xe}function P0(){for(;_e!==null;)Xg(_e)}function R0(){for(;_e!==null&&!tv();)Xg(_e)}function Xg(t){var e=em(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?Qg(t):_e=e,Cc.current=null}function Qg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k0(n,e),n!==null){n.flags&=32767,_e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,_e=null;return}}else if(n=x0(n,e,nt),n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);xe===0&&(xe=5)}function qn(t,e,n){var r=Z,s=yt.transition;try{yt.transition=null,Z=1,j0(t,e,n,r)}finally{yt.transition=s,Z=r}return null}function j0(t,e,n,r){do Kr();while(_n!==null);if(J&6)throw Error(O(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hv(t,i),t===Ce&&(_e=Ce=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qi||(Qi=!0,tm(Do,function(){return Kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=yt.transition,yt.transition=null;var o=Z;Z=1;var a=J;J|=4,Cc.current=null,E0(t,n),qg(n,t),Xv(Xl),$o=!!Jl,Xl=Jl=null,t.current=n,C0(n),nv(),J=a,Z=o,yt.transition=i}else t.current=n;if(Qi&&(Qi=!1,_n=t,ea=s),i=t.pendingLanes,i===0&&(On=null),iv(n.stateNode),Qe(t,me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zo)throw Zo=!1,t=yu,yu=null,t;return ea&1&&t.tag!==0&&Kr(),i=t.pendingLanes,i&1?t===vu?Ws++:(Ws=0,vu=t):Ws=0,$n(),null}function Kr(){if(_n!==null){var t=Ap(ea),e=yt.transition,n=Z;try{if(yt.transition=null,Z=16>t?16:t,_n===null)var r=!1;else{if(t=_n,_n=null,ea=0,J&6)throw Error(O(331));var s=J;for(J|=4,M=t.current;M!==null;){var i=M,o=i.child;if(M.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(M=u;M!==null;){var c=M;switch(c.tag){case 0:case 11:case 15:Us(8,c,i)}var h=c.child;if(h!==null)h.return=c,M=h;else for(;M!==null;){c=M;var d=c.sibling,f=c.return;if(Wg(c),c===u){M=null;break}if(d!==null){d.return=f,M=d;break}M=f}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}M=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,M=o;else e:for(;M!==null;){if(i=M,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Us(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,M=p;break e}M=i.return}}var m=t.current;for(M=m;M!==null;){o=M;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,M=_;else e:for(o=m;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ca(9,a)}}catch(x){pe(a,a.return,x)}if(a===o){M=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,M=b;break e}M=a.return}}if(J=s,$n(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(va,t)}catch{}r=!0}return r}finally{Z=n,yt.transition=e}}return!1}function ud(t,e,n){e=rs(n,e),e=Ag(t,e,1),t=Tn(t,e,1),e=Be(),t!==null&&(Ri(t,1,e),Qe(t,e))}function pe(t,e,n){if(t.tag===3)ud(t,t,n);else for(;e!==null;){if(e.tag===3){ud(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){t=rs(n,t),t=Ng(e,t,1),e=Tn(e,t,1),t=Be(),e!==null&&(Ri(e,1,t),Qe(e,t));break}}e=e.return}}function A0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Be(),t.pingedLanes|=t.suspendedLanes&n,Ce===t&&(Ae&n)===n&&(xe===4||xe===3&&(Ae&130023424)===Ae&&500>me()-Oc?rr(t,0):Tc|=n),Qe(t,e)}function Zg(t,e){e===0&&(t.mode&1?(e=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):e=1);var n=Be();t=nn(t,e),t!==null&&(Ri(t,e,n),Qe(t,n))}function N0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zg(t,n)}function I0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),Zg(t,n)}var em;em=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Je.current)Ge=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ge=!1,b0(t,e,n);Ge=!!(t.flags&131072)}else Ge=!1,le&&e.flags&1048576&&sg(e,Vo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Co(t,e),t=e.pendingProps;var s=Zr(e,Le.current);qr(e,n),s=bc(null,e,r,t,s,n);var i=xc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xe(r)?(i=!0,Wo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mc(e),s.updater=Ea,e.stateNode=s,s._reactInternals=e,ou(e,r,t,n),e=uu(null,e,r,!0,i,n)):(e.tag=0,le&&i&&uc(e),Fe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Co(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=D0(r),t=kt(r,t),s){case 0:e=lu(null,e,r,t,n);break e;case 1:e=Zh(null,e,r,t,n);break e;case 11:e=Xh(null,e,r,t,n);break e;case 14:e=Qh(null,e,r,kt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),lu(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Zh(t,e,r,s,n);case 3:e:{if(Lg(e),t===null)throw Error(O(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cg(t,e),Go(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=rs(Error(O(423)),e),e=ed(t,e,r,n,s);break e}else if(r!==s){s=rs(Error(O(424)),e),e=ed(t,e,r,n,s);break e}else for(it=Cn(e.stateNode.containerInfo.firstChild),ot=e,le=!0,Ot=null,n=lg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===s){e=rn(t,e,n);break e}Fe(t,e,r,n)}e=e.child}return e;case 5:return hg(e),t===null&&ru(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ql(r,s)?o=null:i!==null&&Ql(r,i)&&(e.flags|=32),Dg(t,e),Fe(t,e,o,n),e.child;case 6:return t===null&&ru(e),null;case 13:return $g(t,e,n);case 4:return yc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ts(e,null,r,n):Fe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Xh(t,e,r,s,n);case 7:return Fe(t,e,e.pendingProps,n),e.child;case 8:return Fe(t,e,e.pendingProps.children,n),e.child;case 12:return Fe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,re(qo,r._currentValue),r._currentValue=o,i!==null)if(jt(i.value,o)){if(i.children===s.children&&!Je.current){e=rn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),su(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),su(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qr(e,n),s=vt(s),r=r(s),e.flags|=1,Fe(t,e,r,n),e.child;case 14:return r=e.type,s=kt(r,e.pendingProps),s=kt(r.type,s),Qh(t,e,r,s,n);case 15:return Ig(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Co(t,e),e.tag=1,Xe(r)?(t=!0,Wo(e)):t=!1,qr(e,n),jg(e,r,s),ou(e,r,s,n),uu(null,e,r,!0,t,n);case 19:return zg(t,e,n);case 22:return Mg(t,e,n)}throw Error(O(156,e.tag))};function tm(t,e){return Op(t,e)}function M0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(t,e,n,r){return new M0(t,e,n,r)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D0(t){if(typeof t=="function")return Ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xu)return 11;if(t===Qu)return 14}return 2}function Rn(t,e){var n=t.alternate;return n===null?(n=mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Po(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ac(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Or:return sr(n.children,s,i,e);case Ju:o=8,s|=8;break;case Rl:return t=mt(12,n,e,s|2),t.elementType=Rl,t.lanes=i,t;case jl:return t=mt(13,n,e,s),t.elementType=jl,t.lanes=i,t;case Al:return t=mt(19,n,e,s),t.elementType=Al,t.lanes=i,t;case hp:return Oa(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case up:o=10;break e;case cp:o=9;break e;case Xu:o=11;break e;case Qu:o=14;break e;case dn:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=mt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function sr(t,e,n,r){return t=mt(7,t,r,e),t.lanes=n,t}function Oa(t,e,n,r){return t=mt(22,t,r,e),t.elementType=hp,t.lanes=n,t.stateNode={isHidden:!1},t}function ul(t,e,n){return t=mt(6,t,null,e),t.lanes=n,t}function cl(t,e,n){return e=mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ha(0),this.expirationTimes=Ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nc(t,e,n,r,s,i,o,a,l){return t=new L0(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=mt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(i),t}function $0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nm(t){if(!t)return In;t=t._reactInternals;e:{if(fr(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Xe(n))return ng(t,n,e)}return e}function rm(t,e,n,r,s,i,o,a,l){return t=Nc(n,r,!0,t,s,i,o,a,l),t.context=nm(null),n=t.current,r=Be(),s=Pn(n),i=Zt(r,s),i.callback=e??null,Tn(n,i,s),t.current.lanes=s,Ri(t,s,r),Qe(t,r),t}function Pa(t,e,n,r){var s=e.current,i=Be(),o=Pn(s);return n=nm(n),e.context===null?e.context=n:e.pendingContext=n,e=Zt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tn(s,e,o),t!==null&&(Rt(t,s,o,i),ko(t,s,o)),o}function na(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ic(t,e){cd(t,e),(t=t.alternate)&&cd(t,e)}function z0(){return null}var sm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mc(t){this._internalRoot=t}Ra.prototype.render=Mc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Pa(t,e,null,null)};Ra.prototype.unmount=Mc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cr(function(){Pa(null,t,null,null)}),e[tn]=null}};function Ra(t){this._internalRoot=t}Ra.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gn.length&&e!==0&&e<gn[n].priority;n++);gn.splice(n,0,t),n===0&&Lp(t)}};function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ja(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hd(){}function F0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=na(o);i.call(u)}}var o=rm(e,r,t,0,null,!1,!1,"",hd);return t._reactRootContainer=o,t[tn]=o.current,ai(t.nodeType===8?t.parentNode:t),cr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=na(l);a.call(u)}}var l=Nc(t,0,!1,null,null,!1,!1,"",hd);return t._reactRootContainer=l,t[tn]=l.current,ai(t.nodeType===8?t.parentNode:t),cr(function(){Pa(e,l,n,r)}),l}function Aa(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=na(o);a.call(l)}}Pa(e,o,t,s)}else o=F0(n,e,t,s,r);return na(o)}Np=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ts(e.pendingLanes);n!==0&&(tc(e,n|1),Qe(e,me()),!(J&6)&&(ss=me()+500,$n()))}break;case 13:cr(function(){var r=nn(t,1);if(r!==null){var s=Be();Rt(r,t,1,s)}}),Ic(t,1)}};nc=function(t){if(t.tag===13){var e=nn(t,134217728);if(e!==null){var n=Be();Rt(e,t,134217728,n)}Ic(t,134217728)}};Ip=function(t){if(t.tag===13){var e=Pn(t),n=nn(t,e);if(n!==null){var r=Be();Rt(n,t,e,r)}Ic(t,e)}};Mp=function(){return Z};Dp=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};Bl=function(t,e,n){switch(e){case"input":if(Ml(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xa(r);if(!s)throw Error(O(90));fp(r),Ml(r,s)}}}break;case"textarea":gp(t,n);break;case"select":e=n.value,e!=null&&Br(t,!!n.multiple,e,!1)}};xp=Pc;kp=cr;var U0={usingClientEntryPoint:!1,Events:[Ai,Ar,xa,wp,bp,Pc]},_s={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B0={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cp(t),t===null?null:t.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{va=Zi.inject(B0),Ut=Zi}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(e))throw Error(O(200));return $0(t,e,null,n)};lt.createRoot=function(t,e){if(!Dc(t))throw Error(O(299));var n=!1,r="",s=sm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nc(t,1,!1,null,null,n,!1,r,s),t[tn]=e.current,ai(t.nodeType===8?t.parentNode:t),new Mc(e)};lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Cp(e),t=t===null?null:t.stateNode,t};lt.flushSync=function(t){return cr(t)};lt.hydrate=function(t,e,n){if(!ja(e))throw Error(O(200));return Aa(null,t,e,!0,n)};lt.hydrateRoot=function(t,e,n){if(!Dc(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=sm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rm(e,null,t,1,n??null,s,!1,i,o),t[tn]=e.current,ai(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ra(e)};lt.render=function(t,e,n){if(!ja(e))throw Error(O(200));return Aa(null,t,e,!1,n)};lt.unmountComponentAtNode=function(t){if(!ja(t))throw Error(O(40));return t._reactRootContainer?(cr(function(){Aa(null,null,t,!1,function(){t._reactRootContainer=null,t[tn]=null})}),!0):!1};lt.unstable_batchedUpdates=Pc;lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ja(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Aa(t,e,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function im(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(im)}catch(t){console.error(t)}}im(),ip.exports=lt;var W0=ip.exports,om,dd=W0;om=dd.createRoot,dd.hydrateRoot;function Na(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function H0(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const V0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Lc extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class q0 extends Lc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fd extends Lc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pd extends Lc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(bu||(bu={}));class K0{constructor(e,{headers:n={},customFetch:r,region:s=bu.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=V0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return H0(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:h}=r;let d={},{region:f}=r;f||(f=this.region);const g=new URL(`${this.url}/${n}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(d["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(d["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=c;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),c?(w=o.signal,c.addEventListener("abort",()=>o.abort())):w=o.signal);const p=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:y,signal:w}).catch(x=>{throw new q0(x)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new fd(p);if(!p.ok)throw new pd(p);let _=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return _==="application/json"?b=yield p.json():_==="application/octet-stream"||_==="application/pdf"?b=yield p.blob():_==="text/event-stream"?b=p:_==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof pd||a instanceof fd?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var G0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Y0=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var h,d;if(n.method!=="HEAD"){var f;const p=await i.text();p===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=p:a=JSON.parse(p))}const y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");y&&w&&w.length>1&&(l=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&y===""?(u=204,c="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&n.shouldThrowOnError)throw new G0(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var u,c,h,d;const g=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",y=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"Error"}: ${g}`,y&&(a+=` (${y})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var f;a=(f=i==null?void 0:i.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},J0=class extends Y0{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const gd=new RegExp("[,()]");var Sr=class extends J0{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gd.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gd.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},X0=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Sr({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Sr({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Sr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Sr({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Sr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Q0=class am{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new X0(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new am(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{l.searchParams.append(h,d)})):(a="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new Sr({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Z0{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const e_="2.89.0",t_=`realtime-js/${e_}`,lm="1.0.0",n_="2.0.0",md=lm,xu=1e4,r_=1e3,s_=100;var pn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pn||(pn={}));var we;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(we||(we={}));var Ct;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ct||(Ct={}));var ku;(function(t){t.websocket="websocket"})(ku||(ku={}));var Jn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Jn||(Jn={}));class i_{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+h.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(f),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,l.length),g.setUint8(y++,a.length),g.setUint8(y++,o.length),g.setUint8(y++,u.length),g.setUint8(y++,h.length),g.setUint8(y++,n),Array.from(l,p=>g.setUint8(y++,p.charCodeAt(0))),Array.from(a,p=>g.setUint8(y++,p.charCodeAt(0))),Array.from(o,p=>g.setUint8(y++,p.charCodeAt(0))),Array.from(u,p=>g.setUint8(y++,p.charCodeAt(0))),Array.from(h,p=>g.setUint8(y++,p.charCodeAt(0)));var w=new Uint8Array(f.byteLength+r.byteLength);return w.set(new Uint8Array(f),0),w.set(new Uint8Array(r),f.byteLength),w.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+o));l=l+o;const d=e.slice(l,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,g={type:this.BROADCAST_EVENT,event:c,payload:f};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class um{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const yd=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=o_(o,t,e,s),i),{}):{}},o_=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?cm(i,o):Su(o)},cm=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return c_(e,n)}switch(t){case ne.bool:return a_(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return l_(e);case ne.json:case ne.jsonb:return u_(e);case ne.timestamp:return h_(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return Su(e);default:return Su(e)}},Su=t=>t,a_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},l_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},u_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},c_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>cm(e,a))}return t},h_=t=>typeof t=="string"?t.replace(" ","T"):t,hm=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class hl{constructor(e,n,r={},s=xu){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vd;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(vd||(vd={}));class Hs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Hs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const d=c.map(w=>w.presence_ref),f=h.map(w=>w.presence_ref),g=c.filter(w=>f.indexOf(w.presence_ref)<0),y=h.filter(w=>d.indexOf(w.presence_ref)<0);g.length>0&&(a[u]=g),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(f=>f.presence_ref),d=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _d;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_d||(_d={}));var Vs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Vs||(Vs={}));var Kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class zr{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hl(this,Ct.join,this.params,this.timeout),this.rejoinTimer=new um(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ct.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Hs(this),this.broadcastEndpointURL=hm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Vs.PRESENCE]&&this.bindings[Vs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Kt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Kt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(Kt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,p=[];for(let m=0;m<w;m++){const _=y[m],{filter:{event:b,schema:x,table:k,filter:S}}=_,E=f&&f[m];if(E&&E.event===b&&zr.isFilterValueEqual(E.schema,x)&&zr.isFilterValueEqual(E.table,k)&&zr.isFilterValueEqual(E.filter,S))p.push(Object.assign(Object.assign({},_),{id:E.id}));else{this.unsubscribe(),this.state=we.errored,e==null||e(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Kt.SUBSCRIBED);return}}).receive("error",f=>{this.state=we.errored,e==null||e(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===we.joined&&e===Vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=we.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new hl(this,Ct.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=we.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hl(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>s_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ct;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,y,w;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=f.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,y,w,p,m,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const b=f.id,x=(g=f.filter)===null||g===void 0?void 0:g.event;return b&&((y=n.ids)===null||y===void 0?void 0:y.includes(b))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(m=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return b==="*"||b===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:y,table:w,commit_timestamp:p,type:m,errors:_}=g;d=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:p,eventType:m,new:{},old:{},errors:_}),this._getPayloadRecords(g))}f.callback(d,r)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&zr.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ct.close,{},e)}_onError(e){this._on(Ct.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yd(e.columns,e.old_record)),n}}const dl=()=>{},eo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d_=[1e3,2e3,5e3,1e4],f_=1e4,p_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class g_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xu,this.transport=null,this.heartbeatIntervalMs=eo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dl,this.ref=0,this.reconnectTimer=null,this.vsn=md,this.logger=dl,this.conn=null,this.sendBuffer=[],this.serializer=new i_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ku.websocket}`,this.httpEndpoint=hm(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Z0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pn.connecting:return Jn.Connecting;case pn.open:return Jn.Open;case pn.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new zr(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(r_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},eo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===pn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pn.open||this.conn.readyState===pn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ct.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([p_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:t_};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new um(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u,c,h,d,f;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:xu,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:eo.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:dl,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:md,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:g=>d_[g-1]||f_,this.vsn){case lm:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(g,y)=>y(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case n_:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var mi=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function m_(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function y_(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function v_(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=m_(t.baseUrl,r,s),l=await y_(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),d=h&&c?JSON.parse(c):c;if(!u.ok){const f=h?d:void 0,g=f==null?void 0:f.error;throw new mi((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:f})}return{status:u.status,headers:u.headers,data:d}}}}function to(t){return t.join("")}var __=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:to(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${to(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${to(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${to(t.namespace)}`}),!0}catch(e){if(e instanceof mi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof mi&&n.status===409)return;throw n}}};function mr(t){return t.join("")}var w_=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof mi&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof mi&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},b_=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=v_({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new __(this.client,e),this.tableOps=new w_(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ia=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var x_=class extends Ia{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Eu=class extends Ia{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const $c=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),k_=()=>Response,Cu=t=>{if(Array.isArray(t))return t.map(n=>Cu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Cu(r)}),e},S_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},E_=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function yi(t){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yi(t)}function C_(t,e){if(yi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T_(t){var e=C_(t,"string");return yi(e)=="symbol"?e:e+""}function O_(t,e,n){return(e=T_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wd(Object(n),!0).forEach(function(r){O_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const fl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},P_=async(t,e,n)=>{t instanceof await k_()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new x_(fl(r),s,i))}).catch(r=>{e(new Eu(fl(r),r))}):e(new Eu(fl(t),t))},R_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(S_(r)?(s.headers=W({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),W(W({},s),n))};async function Ii(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,R_(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>P_(l,a,r))})}async function vi(t,e,n,r){return Ii(t,"GET",e,n,r)}async function St(t,e,n,r,s){return Ii(t,"POST",e,r,s,n)}async function Tu(t,e,n,r,s){return Ii(t,"PUT",e,r,s,n)}async function j_(t,e,n,r){return Ii(t,"HEAD",e,W(W({},n),{},{noResolveJson:!0}),r)}async function zc(t,e,n,r,s){return Ii(t,"DELETE",e,r,s,n)}var A_=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ue(e))return{data:null,error:e};throw e}}};let dm;dm=Symbol.toStringTag;var N_=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[dm]="BlobDownloadBuilder",this.promise=null}asStream(){return new A_(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ue(e))return{data:null,error:e};throw e}}};const I_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var M_=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=$c(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=W(W({},bd),r);let a=W(W({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=W(W({},a),r.headers));const u=s._removeEmptyFolders(e),c=s._getFinalPath(u),h=await(t=="PUT"?Tu:St)(s.fetch,`${s.url}/object/${c}`,i,W({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ue(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=W({upsert:bd.upsert},r),c=W(W({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:i,fullPath:(await Tu(s.fetch,a.toString(),l,{headers:c})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(ue(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=W({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await St(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ia("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await St(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await St(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await St(r.fetch,`${r.url}/object/sign/${s}`,W({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await St(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>W(W({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>vi(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new N_(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Cu(await vi(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await j_(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ue(r)&&r instanceof Eu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await zc(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=W(W(W({},I_),e),{},{prefix:t||""});return{data:await St(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ue(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=W({},t);return{data:await St(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const fm="2.89.0",pm={"X-Client-Info":`storage-js/${fm}`};var D_=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=W(W({},pm),e),this.fetch=$c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await vi(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await vi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await St(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Tu(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ue(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await St(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await zc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},L_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=W(W({},pm),e),this.fetch=$c(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await St(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await vi(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await zc(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ue(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!E_(t))throw new Ia("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new b_({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Fc={"X-Client-Info":`storage-js/${fm}`,"Content-Type":"application/json"};var gm=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function rt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var pl=class extends gm{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$_=class extends gm{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Uc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),z_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),F_=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new pl(xd(i),r,o))}).catch(()=>{const i=r+"";e(new pl(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new pl(s.statusText||`HTTP ${r} error`,r,i))}}else e(new $_(xd(t),t))},U_=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(z_(r)?(s.headers=W({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,W(W({},s),n)):s};async function B_(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,U_(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>F_(l,a,r))})}async function st(t,e,n,r,s){return B_(t,"POST",e,r,s,n)}var W_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=W(W({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await st(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await st(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rt(r))return{data:null,error:r};throw r}}},H_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=W(W({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await st(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await st(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await st(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}},V_=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=W(W({},Fc),e),this.fetch=Uc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await st(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await st(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}}},q_=class extends V_{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new K_(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},K_=class extends W_{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new G_(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},G_=class extends H_{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,W(W({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Y_=class extends D_{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new M_(this.url,this.headers,t,this.fetch)}get vectors(){return new q_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new L_(this.url+"/iceberg",this.headers,this.fetch)}};const mm="2.89.0",Er=30*1e3,Ou=3,gl=Ou*Er,J_="http://localhost:9999",X_="supabase.auth.token",Q_={"X-Client-Info":`gotrue-js/${mm}`},Pu="X-Supabase-Api-Version",ym={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Z_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ew=10*60*1e3;class _i extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tw extends _i{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function nw(t){return $(t)&&t.name==="AuthApiError"}class Xn extends _i{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class an extends _i{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class et extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rw(t){return $(t)&&t.name==="AuthSessionMissingError"}class yr extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class no extends an{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ro extends an{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sw(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class kd extends an{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iw extends an{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ru extends an{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ml(t){return $(t)&&t.name==="AuthRetryableFetchError"}class Sd extends an{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ju extends an{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ed=` 	
\r=`.split(""),ow=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ed.length;e+=1)t[Ed[e].charCodeAt(0)]=-2;for(let e=0;e<ra.length;e+=1)t[ra[e].charCodeAt(0)]=e;return t})();function Cd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ra[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ra[r]),e.queuedBits-=6}}function vm(t,e,n){const r=ow[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Td(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{uw(o,r,n)};for(let o=0;o<t.length;o+=1)vm(t.charCodeAt(o),s,i);return e.join("")}function aw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lw(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}aw(r,e)}}function uw(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Gr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)vm(t.charCodeAt(s),n,r);return new Uint8Array(e)}function cw(t){const e=[];return lw(t,n=>e.push(n)),new Uint8Array(e)}function tr(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Cd(s,n,r)),Cd(null,n,r),e.join("")}function hw(t){return Math.round(Date.now()/1e3)+t}function dw(){return Symbol("auth-callback")}const Pe=()=>typeof window<"u"&&typeof document<"u",Fn={tested:!1,writable:!1},_m=()=>{if(!Pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fn.tested)return Fn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Fn.tested=!0,Fn.writable=!0}catch{Fn.tested=!0,Fn.writable=!1}return Fn.writable};function fw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const wm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Cr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Un=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Oe=async(t,e)=>{await t.removeItem(e)};class Ma{constructor(){this.promise=new Ma.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ma.promiseConstructor=Promise;function yl(t){const e=t.split(".");if(e.length!==3)throw new ju("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Z_.test(e[r]))throw new ju("JWT not in base64url format");return{header:JSON.parse(Td(e[0])),payload:JSON.parse(Td(e[1])),signature:Gr(e[2]),raw:{header:e[0],payload:e[1]}}}async function gw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function mw(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function yw(t){return("0"+t.toString(16)).substr(-2)}function vw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,yw).join("")}async function _w(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ww(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await _w(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vr(t,e,n=!1){const r=vw();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Cr(t,`${e}-code-verifier`,s);const i=await ww(r);return[i,r===i?"plain":"s256"]}const bw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xw(t){const e=t.headers.get(Pu);if(!e||!e.match(bw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Sw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ew=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _r(t){if(!Ew.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cw(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Od(t){return JSON.parse(JSON.stringify(t))}const Kn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tw=[502,503,504];async function Pd(t){var e;if(!pw(t))throw new Ru(Kn(t),0);if(Tw.includes(t.status))throw new Ru(Kn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Xn(Kn(i),i)}let r;const s=xw(t);if(s&&s.getTime()>=ym["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Sd(Kn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new et}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sd(Kn(n),t.status,n.weak_password.reasons);throw new tw(Kn(n),t.status||500,r)}const Ow=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function B(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Pu]||(i[Pu]=ym["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Pw(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Pw(t,e,n,r,s,i){const o=Ow(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Ru(Kn(l),0)}if(a.ok||await Pd(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Pd(l)}}function xt(t){var e;let n=null;Aw(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hw(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rd(t){const e=xt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Rw(t){return{data:t,error:null}}function jw(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Na(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function jd(t){return t}function Aw(t){return t.access_token&&t.refresh_token&&t.expires_in}const _l=["global","local","others"];class Nw{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=wm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=_l[0]){if(_l.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_l.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:yn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Na(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yn})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:jd});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){_r(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yn})}catch(n){if($(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){_r(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:yn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){_r(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:yn})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_r(e.userId);try{const{data:n,error:r}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($(n))return{data:null,error:n};throw n}}async _deleteFactor(e){_r(e.userId),_r(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await B(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:jd});if(c.error)throw c.error;const h=await c.json(),d=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await B(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await B(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await B(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($(n))return{data:null,error:n};throw n}}}function Ad(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const wr={debug:!!(globalThis&&_m()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Iw extends bm{}async function Mw(t,e,n){wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Iw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Dw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Lw(t){return parseInt(t,16)}function $w(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function zw(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:h,version:d}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=xm(t.address),g=c?`${c}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${g} wants you to sign in with your Ethereum account:
${f}

${y}`;let p=`URI: ${h}
Version: ${d}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(p+=`
Expiration Time: ${s.toISOString()}`),a&&(p+=`
Not Before: ${a.toISOString()}`),l&&(p+=`
Request ID: ${l}`),u){let m=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);m+=`
- ${_}`}p+=m}return`${w}
${p}`}class ve extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class sa extends ve{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Fw({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ve({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(km(o)){if(i.rp.id!==o)return new ve({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Uw({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ve({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(km(r)){if(n.rpId!==r)return new ve({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Bw{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Ww=new Bw;function Hw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Na(t,["challenge","user","excludeCredentials"]),i=Gr(e).buffer,o=Object.assign(Object.assign({},n),{id:Gr(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Gr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Vw(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Na(t,["challenge","allowCredentials"]),s=Gr(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Gr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function qw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:tr(new Uint8Array(t.response.attestationObject)),clientDataJSON:tr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Kw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:tr(new Uint8Array(s.authenticatorData)),clientDataJSON:tr(new Uint8Array(s.clientDataJSON)),signature:tr(new Uint8Array(s.signature)),userHandle:s.userHandle?tr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function km(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Nd(){var t,e;return!!(Pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Gw(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",e)}:{data:null,error:new sa("Empty credential response",e)}}catch(e){return{data:null,error:Fw({error:e,options:t})}}}async function Yw(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",e)}:{data:null,error:new sa("Empty credential response",e)}}catch(e){return{data:null,error:Uw({error:e,options:t})}}}const Jw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Xw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ia(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=ia(a,o):r[i]=ia(o)}else r[i]=o}return r}function Qw(t,e){return ia(Jw,t,e||{})}function Zw(t,e){return ia(Xw,t,e||{})}class eb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??Ww.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Qw(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:c,error:h}=await Gw({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=Zw(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:c,error:h}=await Yw(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Xn("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn authentication")};try{if(!Nd())return{data:null,error:new Xn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Xn("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new _i("rpId is required for WebAuthn registration")};try{if(!Nd())return{data:null,error:new Xn("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return $(o)?{data:null,error:o}:{data:null,error:new Xn("Unexpected error in register",o)}}}}Dw();const tb={url:J_,storageKey:X_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Id(t,e,n){return await n()}const br={};class wi{get jwks(){var e,n;return(n=(e=br[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=br[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){br[this.storageKey]=Object.assign(Object.assign({},br[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},tb),e);if(this.storageKey=i.storageKey,this.instanceID=(n=wi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Pe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Nw({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wm(i.fetch),this.lock=i.lock||Id,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Pe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Mw:this.lock=Id,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new eb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:_m()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ad(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ad(this.memoryStorage)),Pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Pe()&&(n=fw(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Pe()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),sw(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $(n)?this._returnResult({error:n}):this._returnResult({error:new Xn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:xt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if($(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:h,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await vr(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:xt})}else if("phone"in e){const{phone:c,password:h,options:d}=e;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:xt})}else throw new no("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Oe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rd})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rd})}else throw new no("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new yr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,u,c,h,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:p,options:m}=e;let _;if(Pe())if(typeof w=="object")_=w;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")_=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const b=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),x=await _.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=xm(x[0]);let S=(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!S){const P=await _.request({method:"eth_chainId"});S=Lw(P)}const E={domain:b.host,address:k,statement:p,uri:b.href,version:"1",chainId:S,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.resources};f=zw(E),g=await _.request({method:"personal_sign",params:[$w(f),k]})}try{const{data:y,error:w}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:xt});if(w)throw w;if(!y||!y.session||!y.user){const p=new yr;return this._returnResult({data:{user:null,session:null},error:p})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,s,i,o,a,l,u,c,h,d,f;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:w,wallet:p,statement:m,options:_}=e;let b;if(Pe())if(typeof p=="object")b=p;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=p}const x=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),m?{statement:m}:null));let S;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")S=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)S=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${x.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((h=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",..._.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:w,error:p}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:tr(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:xt});if(p)throw p;if(!w||!w.session||!w.user){const m=new yr;return this._returnResult({data:{user:null,session:null},error:m})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:p})}catch(w){if($(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await Un(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new iw;const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:xt});if(await Oe(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new yr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xt}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new yr;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await vr(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new no("You must provide either an email or phone number.")}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if($(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await vr(this.storage,this.storageKey));const u=await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Rw});return!((i=u.data)===null||i===void 0)&&i.url&&Pe()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new et;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if($(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await B(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await B(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new no("You must provide either an email or phone number and a type")}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Un(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<gl:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Un(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=vl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Cw(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:yn})})}catch(n){if($(n))return rw(n)&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new et;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vr(this.storage,this.storageKey));const{data:u,error:c}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yn});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new et;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=yl(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if($(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new et;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Pe())throw new ro("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ro(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new kd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ro("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kd("No code detected.");const{data:m,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new ro("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let d=c+h;l&&(d=parseInt(l));const f=d-c;f*1e3<=Er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=d-h;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,c);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const p={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:d,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:e.type},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Un(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(nw(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Oe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=dw(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await vr(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:d}=i;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",f,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Pe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if($(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,h=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xt}),{data:d,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new yr}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(s){if(await Oe(this.storage,`${this.storageKey}-code-verifier`),$(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await mw(async s=>(s>0&&await gw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ml(i)&&Date.now()+o-r<Er})}catch(r){if(this._debug(n,"error",r),$(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Pe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Un(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Un(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Cr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:vl()}else if(s&&!s.user&&!s.user){const o=await Un(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Oe(this.storage,this.storageKey+"-user"),await Cr(this.storage,this.storageKey,s)):s.user=vl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<gl;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${gl}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ml(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ma;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),$(i)){const o={data:null,error:i};return ml(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oe(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Cr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Od(s);await Cr(this.storage,this.storageKey,i)}else{const s=Od(n);await Cr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Oe(this.storage,this.storageKey),await Oe(this.storage,this.storageKey+"-code-verifier"),await Oe(this.storage,this.storageKey+"-user"),this.userStorage&&await Oe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Er);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Er}ms, refresh threshold is ${Ou} ticks`),s<=Ou&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await vr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?qw(e.webauthn.credential_response):Kw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Hw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Vw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=yl(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await B(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new et})})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new et});const o=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new et});const o=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Pe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await B(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new et})})}catch(e){if($(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await B(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new et})})}catch(n){if($(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+ew>s)return r;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=yl(r);n!=null&&n.allowExpired||kw(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const c=Sw(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,cw(`${a}.${l}`)))throw new ju("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}}wi.nextInstanceID={};const nb=wi,rb="2.89.0";let Ps="";typeof Deno<"u"?Ps="deno":typeof document<"u"?Ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ps="react-native":Ps="node";const sb={"X-Client-Info":`supabase-js-${Ps}/${rb}`},ib={headers:sb},ob={schema:"public"},ab={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lb={};function bi(t){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(t)}function ub(t,e){if(bi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cb(t){var e=ub(t,"string");return bi(e)=="symbol"?e:e+""}function hb(t,e,n){return(e=cb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Md(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Md(Object(n),!0).forEach(function(r){hb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Md(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const db=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fb=()=>Headers,pb=(t,e,n)=>{const r=db(n),s=fb();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,fe(fe({},o),{},{headers:u}))}};function gb(t){return t.endsWith("/")?t:t+"/"}function mb(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,d={db:fe(fe({},l),s),auth:fe(fe({},u),i),realtime:fe(fe({},c),o),storage:{},global:fe(fe(fe({},h),a),{},{headers:fe(fe({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function yb(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(gb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var vb=class extends nb{constructor(t){super(t)}},_b=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=yb(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:ob,realtime:lb,auth:fe(fe({},ab),{},{storageKey:o}),global:ib},l=mb(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=pb(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(fe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Q0(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Y_(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new K0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vb({url:this.authUrl.href,headers:fe(fe({},d),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new g_(this.realtimeUrl.href,fe(fe({},t),{},{params:fe(fe({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const wb=(t,e,n)=>new _b(t,e,n);function bb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}bb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xb="https://kszkwdasxajzswkaoafc.supabase.co",kb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtzemt3ZGFzeGFqenN3a2FvYWZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0ODQ3NDAsImV4cCI6MjA4MzA2MDc0MH0.01lkOQuwTz_Jt0g9xUs7Zg_ZsXB44NFEBS91ejrIXjQ",H=wb(xb,kb,{auth:{persistSession:!0}});function Sb(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[s,i]=R.useState("");async function o(){const{data:u}=await H.from("package").select("*").order("created_at",{ascending:!1});e(u||[])}R.useEffect(()=>{o()},[]);async function a(){if(!n.trim())return;const u=parseFloat(s)||0,{error:c}=await H.from("package").insert({name:n.trim(),price:u});if(c)return alert(c.message);r(""),i(""),o()}async function l(u){if(!confirm("Eliminare questo pacchetto?"))return;const{error:c}=await H.from("package").delete().eq("id",u);if(c)return alert(c.message);o()}return v.jsxs("section",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[v.jsx("h3",{className:"font-medium",children:"Pacchetti"}),v.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-4 gap-3",children:[v.jsx("input",{value:n,onChange:u=>r(u.target.value),placeholder:"Nome pacchetto",className:"border px-3 py-2 rounded"}),v.jsx("input",{value:s,onChange:u=>i(u.target.value),placeholder:"Prezzo",className:"border px-3 py-2 rounded"}),v.jsx("div",{}),v.jsx("button",{onClick:a,className:"bg-sky-600 text-white rounded px-3 py-2",children:"Aggiungi"})]}),v.jsxs("ul",{className:"mt-4 space-y-2 text-sm",children:[t.map(u=>v.jsxs("li",{className:"flex items-center justify-between border p-2 rounded",children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-medium",children:u.name}),v.jsxs("div",{className:"text-xs text-slate-500",children:[" ",u.price]})]}),v.jsx("div",{children:v.jsx("button",{onClick:()=>l(u.id),className:"text-red-600 text-sm",children:"Elimina"})})]},u.id)),t.length===0&&v.jsx("li",{className:"text-slate-500",children:"Nessun pacchetto"})]})]})}function jn({children:t,className:e=""}){return v.jsx("div",{className:`bg-white dark:bg-neutral-800 border border-transparent dark:border-neutral-700 shadow-sm rounded-xl p-4 ${e}`,children:t})}function zt({children:t,onClick:e,className:n=""}){return v.jsx("button",{onClick:e,className:`px-4 py-2 rounded-md bg-amber-500 hover:bg-amber-600 text-white ${n}`,children:t})}function Yr({options:t,value:e,onChange:n,placeholder:r="Seleziona",className:s=""}){const[i,o]=R.useState(!1),a=R.useRef(null);R.useEffect(()=>{const u=c=>{a.current&&(a.current.contains(c.target)||o(!1))};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const l=t.find(u=>u.value===e);return v.jsxs("div",{className:`relative inline-block text-left ${s}`,ref:a,children:[v.jsxs("button",{type:"button",onClick:()=>o(u=>!u),className:"w-full flex items-center justify-between px-3 py-3 sm:py-2 border rounded bg-white dark:bg-neutral-800 text-neutral-700 dark:text-neutral-100 touch-manipulation",children:[v.jsx("span",{children:l?l.label:v.jsx("span",{className:"text-neutral-400",children:r})}),v.jsx("svg",{className:"w-4 h-4 ml-2 text-neutral-400",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:v.jsx("path",{d:"M6 8l4 4 4-4",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})]}),i&&v.jsxs("ul",{className:"absolute z-50 mt-1 w-full bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded shadow-lg max-h-56 overflow-auto p-1 touch-manipulation",children:[t.map(u=>v.jsx("li",{children:v.jsx("button",{type:"button",onClick:()=>{n(u.value),o(!1)},className:`w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded ${e===u.value?"font-medium":"text-neutral-600 dark:text-neutral-300"}`,children:u.label})},u.value)),v.jsx("li",{children:v.jsx("button",{type:"button",onClick:()=>{n(null),o(!1)},className:"w-full text-left px-3 py-2 text-sm text-neutral-500 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded",children:"Rimuovi selezione"})})]})]})}function Eb(){const[t,e]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(null),[o,a]=R.useState(null),[l,u]=R.useState(""),[c,h]=R.useState(""),[d,f]=R.useState([]),[g,y]=R.useState(null),[w,p]=R.useState(""),[m,_]=R.useState(""),[b,x]=R.useState(null);async function k(){const{data:j}=await H.from("sup").select("*"),{data:z}=await H.from("package").select("*"),{data:U}=await H.from("booking").select("*").order("created_at",{ascending:!1});e(j||[]),r(z||[]),f(U||[])}R.useEffect(()=>{k();const j=()=>k();return window.addEventListener("sups:changed",j),()=>window.removeEventListener("sups:changed",j)},[]);function S(j,z){var K;const U=z?(K=n.find(A=>A.id===z))==null?void 0:K.duration_minutes:void 0,V=new Date(j);return U?V.setMinutes(V.getMinutes()+Number(U)):V.setHours(V.getHours()+1),V.toISOString()}async function E(){var V;if(!s||!c)return alert("Seleziona SUP e data/ora");const j=S(c,o),z=o?((V=n.find(K=>K.id===o))==null?void 0:V.price)??null:null,{error:U}=await H.from("booking").insert({sup_id:s,package_id:o,customer_name:l,start_time:c,end_time:j,price:z});if(U)return alert(U.message);u(""),h(""),i(null),a(null),k()}async function P(j){if(!confirm("Eliminare questa prenotazione?"))return;const{error:z}=await H.from("booking").delete().eq("id",j);if(z)return alert(z.message);k()}function C(j){y(j.id),p(j.start_time.slice(0,16)),_(j.customer_name||""),x(j.package_id||null)}async function T(){if(!g)return;const j=S(w,b),{error:z}=await H.from("booking").update({start_time:w,end_time:j,customer_name:m,package_id:b}).eq("id",g);if(z)return alert(z.message);y(null),k()}function D(){y(null)}return v.jsx("section",{className:"mt-6",children:v.jsxs(jn,{children:[v.jsx("h3",{className:"font-medium",children:"Prenotazioni"}),v.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-4 gap-3",children:[v.jsx("div",{children:v.jsx(Yr,{options:[{value:"",label:"Seleziona SUP"},...t.map(j=>({value:j.id,label:j.name}))].filter(j=>j.value!==""),value:s,onChange:j=>i(j)})}),v.jsx("div",{children:v.jsx(Yr,{options:n.map(j=>({value:j.id,label:`${j.name}${j.price?" - "+j.price+"":""}`})),value:o,onChange:j=>a(j),placeholder:"Seleziona pacchetto (opzionale)"})}),v.jsx("input",{value:c,onChange:j=>h(j.target.value),type:"datetime-local",className:"border px-3 py-2 rounded"}),v.jsx("input",{value:l,onChange:j=>u(j.target.value),placeholder:"Nome cliente",className:"border px-3 py-2 rounded"})]}),v.jsx("div",{className:"mt-3",children:v.jsx(zt,{onClick:E,children:"Crea prenotazione"})}),v.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[d.map(j=>v.jsx(jn,{className:"flex items-center justify-between",children:g===j.id?v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[v.jsx("input",{value:w,onChange:z=>p(z.target.value),type:"datetime-local",className:"border px-2 py-1 rounded"}),v.jsx(Yr,{options:[{value:"",label:"Nessun pacchetto"},...n.map(z=>({value:z.id,label:z.name}))].filter(z=>z.value!==""),value:b,onChange:z=>x(z)}),v.jsx("input",{value:m,onChange:z=>_(z.target.value),className:"border px-2 py-1 rounded"})]}),v.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[v.jsx(zt,{onClick:T,className:"bg-green-600",children:"Salva"}),v.jsx("button",{onClick:D,className:"px-3 py-1 border rounded",children:"Annulla"})]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-medium",children:j.customer_name||"Cliente sconosciuto"}),v.jsx("div",{className:"text-xs text-neutral-500",children:new Date(j.start_time).toLocaleString()}),j.price&&v.jsxs("div",{className:"text-xs text-neutral-500",children:["Prezzo: ",Number(j.price).toFixed(2)," "]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>C(j),className:"px-3 py-1 border rounded",children:"Modifica"}),v.jsx("button",{onClick:()=>P(j.id),className:"px-3 py-1 rounded text-red-600",children:"Elimina"})]})]})},j.id)),d.length===0&&v.jsx("div",{className:"text-neutral-500",children:"Nessuna prenotazione"})]})]})})}function Cb(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[s,i]=R.useState(""),[o,a]=R.useState("");async function l(){const{data:h}=await H.from("expense").select("*").order("date",{ascending:!1});e(h||[])}R.useEffect(()=>{l()},[]);async function u(){const h=parseFloat(n)||0,{error:d}=await H.from("expense").insert({amount:h,category:s,notes:o,date:new Date().toISOString().slice(0,10)});if(d)return alert(d.message);r(""),i(""),a(""),l()}async function c(h){if(!confirm("Eliminare questa spesa?"))return;const{error:d}=await H.from("expense").delete().eq("id",h);if(d)return alert(d.message);l()}return v.jsxs("section",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[v.jsx("h3",{className:"font-medium",children:"Spese"}),v.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-4 gap-3",children:[v.jsx("input",{value:n,onChange:h=>r(h.target.value),placeholder:"Importo",className:"border px-3 py-2 rounded"}),v.jsx("input",{value:s,onChange:h=>i(h.target.value),placeholder:"Categoria",className:"border px-3 py-2 rounded"}),v.jsx("input",{value:o,onChange:h=>a(h.target.value),placeholder:"Note",className:"border px-3 py-2 rounded"}),v.jsx("button",{onClick:u,className:"bg-sky-600 text-white rounded px-3 py-2",children:"Aggiungi"})]}),v.jsxs("ul",{className:"mt-4 space-y-2 text-sm",children:[t.map(h=>v.jsxs("li",{className:"flex items-center justify-between border p-2 rounded",children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-medium",children:h.category||"Senza categoria"}),v.jsxs("div",{className:"text-xs text-slate-500",children:[" ",h.amount,"  ",h.date]})]}),v.jsx("div",{children:v.jsx("button",{onClick:()=>c(h.id),className:"text-red-600 text-sm",children:"Elimina"})})]},h.id)),t.length===0&&v.jsx("li",{className:"text-slate-500",children:"Nessuna spesa"})]})]})}function Tb(){const[t,e]=R.useState([]),[n,r]=R.useState(""),[s,i]=R.useState("SUP"),[o,a]=R.useState(1),[l,u]=R.useState(null),[c,h]=R.useState(""),[d,f]=R.useState(""),[g,y]=R.useState(1),[w,p]=R.useState("available"),[m,_]=R.useState("");R.useEffect(()=>{b()},[]);async function b(){const{data:C,error:T}=await H.from("equipment").select("*").order("created_at",{ascending:!1});T?console.error(T):e(C||[])}async function x(C){if(C.preventDefault(),!n.trim())return;const{data:T,error:D}=await H.from("equipment").insert([{name:n.trim(),type:s,quantity:o}]);if(D){console.error(D);return}const j=(T||[])[0];if(j&&s==="SUP"&&Number(o)>0)try{const z=Array.from({length:Number(o)},(V,K)=>({name:`${j.name} #${K+1}`,equipment_id:j.id})),{error:U}=await H.from("sup").insert(z);U?console.error("Error creating sup records:",U):window.dispatchEvent(new CustomEvent("sups:changed"))}catch(z){console.error(z)}r(""),a(1),i("SUP"),b()}async function k(C){if(!confirm("Sei sicuro di eliminare questo elemento?"))return;try{await H.from("sup").delete().eq("equipment_id",C),window.dispatchEvent(new CustomEvent("sups:changed"))}catch(D){console.error(D)}const{error:T}=await H.from("equipment").delete().eq("id",C);T&&console.error(T),b()}function S(C){u(C.id),h(C.name),f(C.type),y(C.quantity),p(C.status||"available"),_(C.notes||"")}async function E(){if(!l)return;const{error:C}=await H.from("equipment").update({name:c.trim(),type:d,quantity:g,status:w,notes:m}).eq("id",l);C&&console.error(C);try{const{data:T}=await H.from("sup").select("id").eq("equipment_id",l),D=(T||[]).length;if(d==="SUP"){if(D<g){const j=Array.from({length:g-D},(z,U)=>({name:`${c} #${D+U+1}`,equipment_id:l}));await H.from("sup").insert(j),window.dispatchEvent(new CustomEvent("sups:changed"))}else if(D>g){const{data:j}=await H.from("sup").select("id").eq("equipment_id",l).order("created_at",{ascending:!0}).limit(D-g),z=(j||[]).map(U=>U.id);z.length&&await H.from("sup").delete().in("id",z),window.dispatchEvent(new CustomEvent("sups:changed"))}}else D>0&&(await H.from("sup").delete().eq("equipment_id",l),window.dispatchEvent(new CustomEvent("sups:changed")))}catch(T){console.error(T)}u(null),b()}function P(){u(null)}return v.jsx("div",{className:"mt-6",children:v.jsxs(jn,{children:[v.jsx("h3",{className:"text-lg font-medium mb-3",children:"Attrezzatura"}),v.jsxs("form",{onSubmit:x,className:"flex gap-2 mb-4",children:[v.jsx("input",{className:"border px-2 py-1 rounded flex-1 dark:bg-neutral-800",placeholder:"Nome",value:n,onChange:C=>r(C.target.value),required:!0}),v.jsx(Yr,{options:[{value:"SUP",label:"SUP"},{value:"Barca",label:"Barca"},{value:"Remo",label:"Remo"},{value:"Salvagente",label:"Salvagente"},{value:"Altro",label:"Altro"}],value:s,onChange:C=>i(C??"SUP")}),v.jsx("input",{type:"number",min:1,className:"w-20 border px-2 py-1 rounded",value:o,onChange:C=>a(Number(C.target.value))}),v.jsx(zt,{children:" Aggiungi "})]}),t.length===0&&v.jsx("p",{className:"text-sm text-neutral-500",children:"Nessun elemento"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:t.map(C=>v.jsx(jn,{className:"flex flex-col justify-between",children:l===C.id?v.jsxs("div",{children:[v.jsxs("div",{className:"mb-2",children:[v.jsx("input",{className:"w-full border px-2 py-1 rounded mb-2 dark:bg-neutral-800",value:c,onChange:T=>h(T.target.value)}),v.jsx(Yr,{options:[{value:"SUP",label:"SUP"},{value:"Barca",label:"Barca"},{value:"Remo",label:"Remo"},{value:"Salvagente",label:"Salvagente"},{value:"Altro",label:"Altro"}],value:d,onChange:T=>f(T??"SUP")}),v.jsx("input",{type:"number",min:1,className:"w-24 border px-2 py-1 rounded mb-2",value:g,onChange:T=>y(Number(T.target.value))}),v.jsx(Yr,{options:[{value:"available",label:"available"},{value:"maintenance",label:"maintenance"},{value:"retired",label:"retired"}],value:w,onChange:T=>p(T??"available")}),v.jsx("textarea",{className:"w-full border px-2 py-1 rounded",rows:3,value:m,onChange:T=>_(T.target.value)})]}),v.jsxs("div",{className:"flex gap-2 mt-3",children:[v.jsx(zt,{onClick:E,className:"bg-green-600",children:"Salva"}),v.jsx("button",{onClick:P,type:"button",className:"px-3 py-1 rounded border",children:"Annulla"})]})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-medium text-lg",children:C.name}),v.jsxs("div",{className:"text-sm text-neutral-500",children:[C.type,"  Quantit: ",C.quantity]}),C.notes&&v.jsx("div",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:C.notes}),v.jsx("div",{className:`mt-3 inline-block px-2 py-1 text-xs rounded ${C.status==="available"?"bg-green-100 text-green-800":C.status==="maintenance"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.status})]}),v.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[v.jsx("button",{onClick:()=>S(C),className:"px-3 py-1 border rounded",children:"Modifica"}),v.jsx("button",{onClick:()=>k(C.id),className:"px-3 py-1 rounded text-red-600",children:"Elimina"})]})]})},C.id))})]})})}function Ft({title:t,value:e,className:n="",color:r="neutral"}){const s={neutral:"bg-neutral-800 text-white",success:"bg-emerald-700 text-white",warning:"bg-amber-600 text-white",accent:"bg-violet-700 text-white"};return v.jsxs("div",{className:`min-w-[12rem] sm:min-w-[14rem] p-4 rounded-xl shadow-sm ${s[r]} ${n}`,children:[v.jsx("div",{className:"text-xs uppercase tracking-wide text-neutral-200",children:t}),v.jsx("div",{className:"mt-2 text-2xl font-bold",children:e})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mi(t){return t+.5|0}const wn=(t,e,n)=>Math.max(Math.min(t,n),e);function Rs(t){return wn(Mi(t*2.55),0,255)}function An(t){return wn(Mi(t*255),0,255)}function Yt(t){return wn(Mi(t/2.55)/100,0,1)}function Dd(t){return wn(Mi(t*100),0,100)}const ft={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Au=[..."0123456789ABCDEF"],Ob=t=>Au[t&15],Pb=t=>Au[(t&240)>>4]+Au[t&15],so=t=>(t&240)>>4===(t&15),Rb=t=>so(t.r)&&so(t.g)&&so(t.b)&&so(t.a);function jb(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ft[t[1]]*17,g:255&ft[t[2]]*17,b:255&ft[t[3]]*17,a:e===5?ft[t[4]]*17:255}:(e===7||e===9)&&(n={r:ft[t[1]]<<4|ft[t[2]],g:ft[t[3]]<<4|ft[t[4]],b:ft[t[5]]<<4|ft[t[6]],a:e===9?ft[t[7]]<<4|ft[t[8]]:255})),n}const Ab=(t,e)=>t<255?e(t):"";function Nb(t){var e=Rb(t)?Ob:Pb;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Ab(t.a,e):void 0}const Ib=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sm(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Mb(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Db(t,e,n){const r=Sm(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function Lb(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Bc(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,u,c;return i!==o&&(c=i-o,u=a>.5?c/(2-i-o):c/(i+o),l=Lb(n,r,s,c,i),l=l*60+.5),[l|0,u||0,a]}function Wc(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(An)}function Hc(t,e,n){return Wc(Sm,t,e,n)}function $b(t,e,n){return Wc(Db,t,e,n)}function zb(t,e,n){return Wc(Mb,t,e,n)}function Em(t){return(t%360+360)%360}function Fb(t){const e=Ib.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Rs(+e[5]):An(+e[5]));const s=Em(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=$b(s,i,o):e[1]==="hsv"?r=zb(s,i,o):r=Hc(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Ub(t,e){var n=Bc(t);n[0]=Em(n[0]+e),n=Hc(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Bb(t){if(!t)return;const e=Bc(t),n=e[0],r=Dd(e[1]),s=Dd(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Yt(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Ld={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$d={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Wb(){const t={},e=Object.keys($d),n=Object.keys(Ld);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Ld[i]);i=parseInt($d[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let io;function Hb(t){io||(io=Wb(),io.transparent=[0,0,0,0]);const e=io[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Vb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qb(t){const e=Vb.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Rs(o):wn(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Rs(r):wn(r,0,255)),s=255&(e[4]?Rs(s):wn(s,0,255)),i=255&(e[6]?Rs(i):wn(i,0,255)),{r,g:s,b:i,a:n}}}function Kb(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Yt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const wl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,xr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Gb(t,e,n){const r=xr(Yt(t.r)),s=xr(Yt(t.g)),i=xr(Yt(t.b));return{r:An(wl(r+n*(xr(Yt(e.r))-r))),g:An(wl(s+n*(xr(Yt(e.g))-s))),b:An(wl(i+n*(xr(Yt(e.b))-i))),a:t.a+n*(e.a-t.a)}}function oo(t,e,n){if(t){let r=Bc(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Hc(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Cm(t,e){return t&&Object.assign(e||{},t)}function zd(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=An(t[3]))):(e=Cm(t,{r:0,g:0,b:0,a:1}),e.a=An(e.a)),e}function Yb(t){return t.charAt(0)==="r"?qb(t):Fb(t)}class xi{constructor(e){if(e instanceof xi)return e;const n=typeof e;let r;n==="object"?r=zd(e):n==="string"&&(r=jb(e)||Hb(e)||Yb(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Cm(this._rgb);return e&&(e.a=Yt(e.a)),e}set rgb(e){this._rgb=zd(e)}rgbString(){return this._valid?Kb(this._rgb):void 0}hexString(){return this._valid?Nb(this._rgb):void 0}hslString(){return this._valid?Bb(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Gb(this._rgb,e._rgb,n)),this}clone(){return new xi(this.rgb)}alpha(e){return this._rgb.a=An(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Mi(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return oo(this._rgb,2,e),this}darken(e){return oo(this._rgb,2,-e),this}saturate(e){return oo(this._rgb,1,e),this}desaturate(e){return oo(this._rgb,1,-e),this}rotate(e){return Ub(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wt(){}const Jb=(()=>{let t=0;return()=>t++})();function se(t){return t==null}function je(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function X(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function wt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function It(t,e){return wt(t)?t:e}function Y(t,e){return typeof t>"u"?e:t}const Xb=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Tm=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Q(t,e,n,r){let s,i,o;if(je(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(X(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function oa(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function aa(t){if(je(t))return t.map(aa);if(X(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=aa(t[n[s]]);return e}return t}function Om(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Qb(t,e,n,r){if(!Om(t))return;const s=e[t],i=n[t];X(s)&&X(i)?ki(s,i,r):e[t]=aa(i)}function ki(t,e,n){const r=je(e)?e:[e],s=r.length;if(!X(t))return t;n=n||{};const i=n.merger||Qb;let o;for(let a=0;a<s;++a){if(o=r[a],!X(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)i(l[u],t,o,n)}return t}function qs(t,e){return ki(t,e,{merger:Zb})}function Zb(t,e,n){if(!Om(t))return;const r=e[t],s=n[t];X(r)&&X(s)?qs(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=aa(s))}const Fd={"":t=>t,x:t=>t.x,y:t=>t.y};function ex(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function tx(t){const e=ex(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Si(t,e){return(Fd[e]||(Fd[e]=tx(e)))(t)}function Vc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const la=t=>typeof t<"u",Mn=t=>typeof t=="function",Ud=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function nx(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const te=Math.PI,ge=2*te,rx=ge+te,ua=Number.POSITIVE_INFINITY,sx=te/180,ke=te/2,Bn=te/4,Bd=te*2/3,Pm=Math.log10,is=Math.sign;function Ks(t,e,n){return Math.abs(t-e)<n}function Wd(t){const e=Math.round(t);t=Ks(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Pm(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function ix(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function ox(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ei(t){return!ox(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ax(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function lx(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Qt(t){return t*(te/180)}function ux(t){return t*(180/te)}function Hd(t){if(!wt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Rm(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*te&&(i+=ge),{angle:i,distance:s}}function Nu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cx(t,e){return(t-e+rx)%ge-te}function Tt(t){return(t%ge+ge)%ge}function Ci(t,e,n,r){const s=Tt(t),i=Tt(e),o=Tt(n),a=Tt(i-s),l=Tt(o-s),u=Tt(s-i),c=Tt(s-o);return s===i||s===o||r&&i===o||a>l&&u<c}function Ue(t,e,n){return Math.max(e,Math.min(n,t))}function hx(t){return Ue(t,-32768,32767)}function Fr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function qc(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const nr=(t,e,n,r)=>qc(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),dx=(t,e,n)=>qc(t,n,r=>t[r][e]>=n);function fx(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const jm=["push","pop","shift","splice","unshift"];function px(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jm.forEach(n=>{const r="_onData"+Vc(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Vd(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(jm.forEach(i=>{delete t[i]}),delete t._chartjs)}function gx(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Am=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Nm(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Am.call(window,()=>{r=!1,t.apply(e,n)}))}}function mx(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Im=t=>t==="start"?"left":t==="end"?"right":"center",tt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,yx=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function vx(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:h,max:d,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(s=Math.min(nr(l,c,h).lo,n?r:nr(e,c,o.getPixelForValue(h)).lo),u){const y=l.slice(0,s+1).reverse().findIndex(w=>!se(w[a.axis]));s-=Math.max(0,y)}s=Ue(s,0,r-1)}if(g){let y=Math.max(nr(l,o.axis,d,!0).hi+1,n?0:nr(e,c,o.getPixelForValue(d),!0).hi+1);if(u){const w=l.slice(y-1).findIndex(p=>!se(p[a.axis]));y+=Math.max(0,w)}i=Ue(y,s,r)-s}else i=r-s}return{start:s,count:i}}function _x(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const ao=t=>t===0||t===1,qd=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ge/n)),Kd=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ge/n)+1,Gs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ke)+1,easeOutSine:t=>Math.sin(t*ke),easeInOutSine:t=>-.5*(Math.cos(te*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ao(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ao(t)?t:qd(t,.075,.3),easeOutElastic:t=>ao(t)?t:Kd(t,.075,.3),easeInOutElastic(t){return ao(t)?t:t<.5?.5*qd(t*2,.1125,.45):.5+.5*Kd(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Gs.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Gs.easeInBounce(t*2)*.5:Gs.easeOutBounce(t*2-1)*.5+.5};function Kc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Gd(t){return Kc(t)?t:new xi(t)}function bl(t){return Kc(t)?t:new xi(t).saturate(.5).darken(.1).hexString()}const wx=["x","y","borderWidth","radius","tension"],bx=["color","borderColor","backgroundColor"];function xx(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:bx},numbers:{type:"number",properties:wx}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kx(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Yd=new Map;function Sx(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Yd.get(n);return r||(r=new Intl.NumberFormat(t,e),Yd.set(n,r)),r}function Gc(t,e,n){return Sx(e,n).format(t)}const Ex={values(t){return je(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=Cx(t,n)}const o=Pm(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Gc(t,r,l)}};function Cx(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Mm={formatters:Ex};function Tx(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const hr=Object.create(null),Iu=Object.create(null);function Ys(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function xl(t,e,n){return typeof e=="string"?ki(Ys(t,e),n):ki(Ys(t,""),e)}class Ox{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>bl(s.backgroundColor),this.hoverBorderColor=(r,s)=>bl(s.borderColor),this.hoverColor=(r,s)=>bl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return xl(this,e,n)}get(e){return Ys(this,e)}describe(e,n){return xl(Iu,e,n)}override(e,n){return xl(hr,e,n)}route(e,n,r,s){const i=Ys(this,e),o=Ys(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[s];return X(l)?Object.assign({},u,l):Y(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ye=new Ox({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xx,kx,Tx]);function Px(t){return!t||se(t.size)||se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Jd(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Wn(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Xd(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Mu(t,e,n,r){Dm(t,e,n,r,null)}function Dm(t,e,n,r,s){let i,o,a,l,u,c,h,d;const f=e.pointStyle,g=e.rotation,y=e.radius;let w=(g||0)*sx;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,y,0,0,ge):t.arc(n,r,y,0,ge),t.closePath();break;case"triangle":c=s?s/2:y,t.moveTo(n+Math.sin(w)*c,r-Math.cos(w)*y),w+=Bd,t.lineTo(n+Math.sin(w)*c,r-Math.cos(w)*y),w+=Bd,t.lineTo(n+Math.sin(w)*c,r-Math.cos(w)*y),t.closePath();break;case"rectRounded":u=y*.516,l=y-u,o=Math.cos(w+Bn)*l,h=Math.cos(w+Bn)*(s?s/2-u:l),a=Math.sin(w+Bn)*l,d=Math.sin(w+Bn)*(s?s/2-u:l),t.arc(n-h,r-a,u,w-te,w-ke),t.arc(n+d,r-o,u,w-ke,w),t.arc(n+h,r+a,u,w,w+ke),t.arc(n-d,r+o,u,w+ke,w+te),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,c=s?s/2:l,t.rect(n-c,r-l,2*c,2*l);break}w+=Bn;case"rectRot":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":w+=Bn;case"cross":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),w+=Bn,h=Math.cos(w)*(s?s/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,d=Math.sin(w)*(s?s/2:y),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=s?s/2:Math.cos(w)*y,a=Math.sin(w)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(s?s/2:y),r+Math.sin(w)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ti(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jc(t){t.restore()}function Rx(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function jx(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ax(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Nx(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,c=s.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,c),t.lineTo(a,c),t.stroke()}}function Ix(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ca(t,e,n,r,s,i={}){const o=je(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=s.string,Ax(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&Ix(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),se(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),Nx(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function Du(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*te,te,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,te,ke,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,ke,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-ke,!0),t.lineTo(n+o.topLeft,r)}const Mx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Lx(t,e){const n=(""+t).match(Mx);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const $x=t=>+t||0;function Xc(t,e){const n={},r=X(e),s=r?Object.keys(e):e,i=X(t)?r?o=>Y(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=$x(i(o));return n}function zx(t){return Xc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Js(t){return Xc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function At(t){const e=zx(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ye(t,e){t=t||{},e=e||ye.font;let n=Y(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Y(t.style,e.style);r&&!(""+r).match(Dx)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Y(t.family,e.family),lineHeight:Lx(Y(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Y(t.weight,e.weight),string:""};return s.string=Px(s),s}function lo(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Fx(t,e,n){const{min:r,max:s}=t,i=Tm(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function pr(t,e){return Object.assign(Object.create(t),e)}function Qc(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Fm("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Qc([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return $m(a,l,()=>Gx(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Zd(a).includes(l)},ownKeys(a){return Zd(a)},set(a,l,u){const c=a._storage||(a._storage=s());return a[l]=c[l]=u,delete a._keys,!0}})}function os(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Lm(t,r),setContext:i=>os(t,i,n,r),override:i=>os(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return $m(i,o,()=>Bx(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Lm(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Mn(n)?n:()=>n,isIndexable:Mn(r)?r:()=>r}}const Ux=(t,e)=>t?t+Vc(e):e,Zc=(t,e)=>X(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $m(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Bx(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return Mn(a)&&o.isScriptable(e)&&(a=Wx(e,a,t,n)),je(a)&&a.length&&(a=Hx(e,a,t,o.isIndexable)),Zc(e,a)&&(a=os(a,s,i&&i[e],o)),a}function Wx(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Zc(t,l)&&(l=eh(s._scopes,s,t,l)),l}function Hx(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(X(e[0])){const l=e,u=s._scopes.filter(c=>c!==l);e=[];for(const c of l){const h=eh(u,s,t,c);e.push(os(h,i,o&&o[t],a))}}return e}function zm(t,e,n){return Mn(t)?t(e,n):t}const Vx=(t,e)=>t===!0?e:typeof t=="string"?Si(e,t):void 0;function qx(t,e,n,r,s){for(const i of e){const o=Vx(n,i);if(o){t.add(o);const a=zm(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function eh(t,e,n,r){const s=e._rootScopes,i=zm(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Qd(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Qd(a,o,i,l,r),l===null)?!1:Qc(Array.from(a),[""],s,i,()=>Kx(e,n,r))}function Qd(t,e,n,r,s){for(;n;)n=qx(t,e,n,r,s);return n}function Kx(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return je(s)&&X(n)?n:s||{}}function Gx(t,e,n,r){let s;for(const i of e)if(s=Fm(Ux(i,t),n),typeof s<"u")return Zc(t,s)?eh(n,r,t,s):s}function Fm(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Zd(t){let e=t._keys;return e||(e=t._keys=Yx(t._scopes)),e}function Yx(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const Jx=Number.EPSILON||1e-14,as=(t,e)=>e<t.length&&!t[e].skip&&t[e],Um=t=>t==="x"?"y":"x";function Xx(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Nu(i,s),l=Nu(o,i);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=r*u,d=r*c;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+d*(o.x-s.x),y:i.y+d*(o.y-s.y)}}}function Qx(t,e,n){const r=t.length;let s,i,o,a,l,u=as(t,0);for(let c=0;c<r-1;++c)if(l=u,u=as(t,c+1),!(!l||!u)){if(Ks(e[c],0,Jx)){n[c]=n[c+1]=0;continue}s=n[c]/e[c],i=n[c+1]/e[c],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[c]=s*o*e[c],n[c+1]=i*o*e[c])}}function Zx(t,e,n="x"){const r=Um(n),s=t.length;let i,o,a,l=as(t,0);for(let u=0;u<s;++u){if(o=a,a=l,l=as(t,u+1),!a)continue;const c=a[n],h=a[r];o&&(i=(c-o[n])/3,a[`cp1${n}`]=c-i,a[`cp1${r}`]=h-i*e[u]),l&&(i=(l[n]-c)/3,a[`cp2${n}`]=c+i,a[`cp2${r}`]=h+i*e[u])}}function ek(t,e="x"){const n=Um(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,u=as(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=as(t,o+1),!!l){if(u){const c=u[e]-l[e];s[o]=c!==0?(u[n]-l[n])/c:0}i[o]=a?u?is(s[o-1])!==is(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Qx(t,s,i),Zx(t,i,e)}function uo(t,e,n){return Math.max(Math.min(t,n),e)}function tk(t,e){let n,r,s,i,o,a=Ti(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Ti(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=uo(s.cp1x,e.left,e.right),s.cp1y=uo(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=uo(s.cp2x,e.left,e.right),s.cp2y=uo(s.cp2y,e.top,e.bottom)))}function nk(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")ek(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=Xx(u,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&tk(t,n)}function th(){return typeof window<"u"&&typeof document<"u"}function nh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ha(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Da=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function rk(t,e){return Da(t).getPropertyValue(e)}const sk=["top","right","bottom","left"];function ir(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=sk[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const ik=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ok(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(ik(s,i,t.target))a=s,l=i;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Gn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Da(n),i=s.boxSizing==="border-box",o=ir(s,"padding"),a=ir(s,"border","width"),{x:l,y:u,box:c}=ok(t,n),h=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:g}=e;return i&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((u-d)/g*n.height/r)}}function ak(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&nh(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Da(i),l=ir(a,"border","width"),u=ir(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=ha(a.maxWidth,i,"clientWidth"),s=ha(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||ua,maxHeight:s||ua}}const bn=t=>Math.round(t*10)/10;function lk(t,e,n,r){const s=Da(t),i=ir(s,"margin"),o=ha(s.maxWidth,t,"clientWidth")||ua,a=ha(s.maxHeight,t,"clientHeight")||ua,l=ak(t,e,n);let{width:u,height:c}=l;if(s.boxSizing==="content-box"){const d=ir(s,"border","width"),f=ir(s,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-i.width),c=Math.max(0,r?u/r:c-i.height),u=bn(Math.min(u,o,l.maxWidth)),c=bn(Math.min(c,a,l.maxHeight)),u&&!c&&(c=bn(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&c>l.height&&(c=l.height,u=bn(Math.floor(c*r))),{width:u,height:c}}function ef(t,e,n){const r=e||1,s=bn(t.height*r),i=bn(t.width*r);t.height=bn(t.height),t.width=bn(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const uk=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};th()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function tf(t,e){const n=rk(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Yn(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ck(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function hk(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Yn(t,s,n),a=Yn(s,i,n),l=Yn(i,e,n),u=Yn(o,a,n),c=Yn(a,l,n);return Yn(u,c,n)}const dk=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},fk=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Jr(t,e,n){return t?dk(e,n):fk()}function Bm(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Wm(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Hm(t){return t==="angle"?{between:Ci,compare:cx,normalize:Tt}:{between:Fr,compare:(e,n)=>e-n,normalize:e=>e}}function nf({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function pk(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Hm(r),l=e.length;let{start:u,end:c,loop:h}=t,d,f;if(h){for(u+=l,c+=l,d=0,f=l;d<f&&o(a(e[u%l][r]),s,i);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:t.style}}function gk(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:u}=Hm(r),{start:c,end:h,loop:d,style:f}=pk(t,e,n),g=[];let y=!1,w=null,p,m,_;const b=()=>l(s,_,p)&&a(s,_)!==0,x=()=>a(i,p)===0||l(i,_,p),k=()=>y||b(),S=()=>!y||x();for(let E=c,P=c;E<=h;++E)m=e[E%o],!m.skip&&(p=u(m[r]),p!==_&&(y=l(p,s,i),w===null&&k()&&(w=a(p,s)===0?E:P),w!==null&&S()&&(g.push(nf({start:w,end:E,loop:d,count:o,style:f})),w=null),P=E,_=p));return w!==null&&g.push(nf({start:w,end:h,loop:d,count:o,style:f})),g}function mk(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=gk(r[s],t.points,e);i.length&&n.push(...i)}return n}function yk(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function vk(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%s];u.skip||u.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function _k(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=yk(n,s,i,r);if(r===!0)return rf(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return rf(t,vk(n,o,l,u),n,e)}function rf(t,e,n,r){return!r||!r.setContext||!n?e:wk(t,e,n,r)}function wk(t,e,n,r){const s=t._chart.getContext(),i=sf(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let c=i,h=e[0].start,d=h;function f(g,y,w,p){const m=a?-1:1;if(g!==y){for(g+=l;n[g%l].skip;)g-=m;for(;n[y%l].skip;)y+=m;g%l!==y%l&&(u.push({start:g%l,end:y%l,loop:w,style:p}),c=p,h=y%l)}}for(const g of e){h=a?h:g.start;let y=n[h%l],w;for(d=h+1;d<=g.end;d++){const p=n[d%l];w=sf(r.setContext(pr(s,{type:"segment",p0:y,p1:p,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),bk(w,c)&&f(h,d-1,g.loop,c),y=p,c=w}h<d-1&&f(h,d-1,g.loop,c)}return u}function sf(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function bk(t,e){if(!e)return!1;const n=[],r=function(s,i){return Kc(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function co(t,e,n){return t.options.clip?t[n]:e[n]}function xk(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:co(n,e,"left"),right:co(n,e,"right"),top:co(r,e,"top"),bottom:co(r,e,"bottom")}:e}function kk(t,e){const n=e._clip;if(n.disabled)return!1;const r=xk(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Sk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Am.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ht=new Sk;const of="transparent",Ek={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Gd(t||of),s=r.valid&&Gd(e||of);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ck{constructor(e,n,r,s){const i=n[r];s=lo([e.to,s,i,e.from]);const o=lo([e.from,i,s]);this._active=!0,this._fn=e.fn||Ek[e.type||typeof o],this._easing=Gs[e.easing]||Gs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=lo([e.to,n,s,e.from]),this._from=lo([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Vm{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!X(e))return;const n=Object.keys(ye.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!X(i))return;const o={};for(const a of n)o[a]=i[a];(je(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Ok(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Tk(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const c=n[u];let h=i[u];const d=r.get(u);if(h)if(d&&h.active()){h.update(d,c,a);continue}else h.cancel();if(!d||!d.duration){e[u]=c;continue}i[u]=h=new Ck(d,e,u,c),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ht.add(this._chart,r),!0}}function Tk(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Ok(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function af(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function Pk(t,e,n){if(n===!1)return!1;const r=af(t,n),s=af(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Rk(t){let e,n,r,s;return X(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function qm(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function lf(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,u;if(e===null)return;let c=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(c=!0,r.all)continue;break}u=t.values[l],wt(u)&&(i||e===0||is(e)===is(u))&&(e+=u)}return!c&&!r.all?0:e}function jk(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[s]:c,[i]:t[c]};return a}function kl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Ak(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Nk(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Ik(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function uf(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function cf(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,u=o.axis,c=Ak(i,o,r),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:y,[u]:w}=g,p=g._stacks||(g._stacks={});d=p[u]=Ik(s,c,y),d[a]=w,d._top=uf(d,o,!0,r.type),d._bottom=uf(d,o,!1,r.type);const m=d._visualValues||(d._visualValues={});m[a]=w}}function Sl(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Mk(t,e){return pr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Dk(t,e,n){return pr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ws(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const El=t=>t==="reset"||t==="none",hf=(t,e)=>e?t:Object.assign({},t),Lk=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qm(n,!0),values:null};class Xr{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=kl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ws(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,i=n.xAxisID=Y(r.xAxisID,Sl(e,"x")),o=n.yAxisID=Y(r.yAxisID,Sl(e,"y")),a=n.rAxisID=Y(r.rAxisID,Sl(e,"r")),l=n.indexAxis,u=n.iAxisID=s(l,i,o,a),c=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vd(this._data,this),e._stacked&&ws(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(X(n)){const s=this._cachedMeta;this._data=jk(n,s)}else if(r!==n){if(r){Vd(r,this);const s=this._cachedMeta;ws(s),s._parsed=[]}n&&Object.isExtensible(n)&&px(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=kl(n.vScale,n),n.stack!==r.stack&&(s=!0,ws(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(cf(this,n._parsed),n._stacked=kl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],c,h,d;if(this._parsing===!1)r._parsed=s,r._sorted=!0,d=s;else{je(s[e])?d=this.parseArrayData(r,s,e,n):X(s[e])?d=this.parseObjectData(r,s,e,n):d=this.parsePrimitiveData(r,s,e,n);const f=()=>h[a]===null||u&&h[a]<u[a];for(c=0;c<n;++c)r._parsed[c+e]=h=d[c],l&&(f()&&(l=!1),u=h);r._sorted=l}o&&cf(this,d)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),c=i===o,h=new Array(s);let d,f,g;for(d=0,f=s;d<f;++d)g=d+r,h[d]={[a]:c||i.parse(u[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,u,c,h;for(l=0,u=s;l<u;++l)c=l+r,h=n[c],a[l]={x:i.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let c,h,d,f;for(c=0,h=s;c<h;++c)d=c+r,f=n[d],u[c]={x:i.parse(Si(f,a),d),y:o.parse(Si(f,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:qm(s,!0),values:n._stacks[e.axis]._visualValues};return lf(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=lf(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=Lk(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=Nk(a);let d,f;function g(){f=s[d];const y=f[a.axis];return!wt(f[e.axis])||c>y||h<y}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(u,e,f,l),i));++d);if(i){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(u,e,f,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],wt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Rk(Y(this.options.clip,Pk(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,i,a,l),c=a;c<a+l;++c){const h=s[c];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(c=0;c<o.length;++c)o[c].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Dk(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Mk(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&la(r);if(a)return hf(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),f=Object.keys(ye.elements[e]),g=()=>this.getContext(r,s,n),y=u.resolveNamedOptions(d,f,g,h);return y.$shared&&(y.$shared=l,i[o]=Object.freeze(hf(y,l))),y}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,n),d=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(d,this.getContext(e,r,n))}const u=new Vm(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||El(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){El(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!El(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&ws(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}F(Xr,"defaults",{}),F(Xr,"datasetElementType",null),F(Xr,"dataElementType",null);function $k(t,e,n){let r=1,s=1,i=0,o=0;if(e<ge){const a=t,l=a+e,u=Math.cos(a),c=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(_,b,x)=>Ci(_,a,l,!0)?1:Math.max(b,b*n,x,x*n),g=(_,b,x)=>Ci(_,a,l,!0)?-1:Math.min(b,b*n,x,x*n),y=f(0,u,h),w=f(ke,c,d),p=g(te,u,h),m=g(te+ke,c,d);r=(y-p)/2,s=(w-m)/2,i=-(y+p)/2,o=-(w+m)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class js extends Xr{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(X(r[e])){const{key:l="value"}=this._parsing;i=u=>+Si(r[u],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Qt(this.options.rotation-90)}_getCircumference(){return Qt(this.options.circumference)}_getRotationExtents(){let e=ge,n=-ge;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Xb(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:y}=$k(h,c,l),w=(r.width-o)/d,p=(r.height-o)/f,m=Math.max(Math.min(w,p)/2,0),_=Tm(this.options.radius,m),b=Math.max(_*l,0),x=(_-b)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=y*_,s.total=this.calculateTotal(),this.outerRadius=_-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/ge)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,c=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=i&&u.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(n,s);let p=this._getRotation(),m;for(m=0;m<n;++m)p+=this._circumference(m,i);for(m=n;m<n+r;++m){const _=this._circumference(m,i),b=e[m],x={x:c+this.offsetX,y:h+this.offsetY,startAngle:p,endAngle:p+_,circumference:_,outerRadius:g,innerRadius:f};w&&(x.options=y||this.resolveDataElementOptions(m,b.active?"active":s)),p+=_,this.updateElement(b,m,x,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ge*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=Gc(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Y(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}F(js,"id","doughnut"),F(js,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),F(js,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),F(js,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,u)=>{const h=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:h.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:s,pointStyle:r,borderRadius:o&&(a||h.borderRadius),index:u}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Ro extends Xr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=vx(n,s,o);this._drawStart=a,this._drawCount=l,_x(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:g,segment:y}=this.options,w=Ei(g)?g:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||i||s==="none",m=n+r,_=e.length;let b=n>0&&this.getParsed(n-1);for(let x=0;x<_;++x){const k=e[x],S=p?k:{};if(x<n||x>=m){S.skip=!0;continue}const E=this.getParsed(x),P=se(E[f]),C=S[d]=o.getPixelForValue(E[d],x),T=S[f]=i||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[f],x);S.skip=isNaN(C)||isNaN(T)||P,S.stop=x>0&&Math.abs(E[d]-b[d])>w,y&&(S.parsed=E,S.raw=u.data[x]),h&&(S.options=c||this.resolveDataElementOptions(x,k.active?"active":s)),p||this.updateElement(k,x,S,s),b=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}F(Ro,"id","line"),F(Ro,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),F(Ro,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Lu extends js{}F(Lu,"id","pie"),F(Lu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Hn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rh{constructor(e){F(this,"options");this.options=e||{}}static override(e){Object.assign(rh.prototype,e)}init(){}formats(){return Hn()}parse(){return Hn()}format(){return Hn()}add(){return Hn()}diff(){return Hn()}startOf(){return Hn()}endOf(){return Hn()}}var zk={_date:rh};function Fk(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?dx:nr;if(r){if(s._sharedOptions){const c=i[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=u(i,e,n-h),f=u(i,e,n+h);return{lo:d.lo,hi:f.hi}}}}else{const c=u(i,e,n);if(l){const{vScale:h}=s._cachedMeta,{_parsed:d}=t,f=d.slice(0,c.lo+1).reverse().findIndex(y=>!se(y[h.axis]));c.lo-=Math.max(0,f);const g=d.slice(c.hi).findIndex(y=>!se(y[h.axis]));c.hi+=Math.max(0,g)}return c}}return{lo:0,hi:i.length-1}}function La(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:c}=i[a],{lo:h,hi:d}=Fk(i[a],e,o,s);for(let f=h;f<=d;++f){const g=c[f];g.skip||r(g,u,f)}}}function Uk(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Cl(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||La(t,n,e,function(a,l,u){!s&&!Ti(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function Bk(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:h}=Rm(o,{x:e.x,y:e.y});Ci(h,u,c)&&s.push({element:o,datasetIndex:a,index:l})}return La(t,n,e,i),s}function Wk(t,e,n,r,s,i){let o=[];const a=Uk(n);let l=Number.POSITIVE_INFINITY;function u(c,h,d){const f=c.inRange(e.x,e.y,s);if(r&&!f)return;const g=c.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!f)return;const w=a(e,g);w<l?(o=[{element:c,datasetIndex:h,index:d}],l=w):w===l&&o.push({element:c,datasetIndex:h,index:d})}return La(t,n,e,u),o}function Tl(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Bk(t,e,n,s):Wk(t,e,n,r,s,i)}function df(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return La(t,n,e,(l,u,c)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var Hk={modes:{index(t,e,n,r){const s=Gn(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Cl(t,s,i,r,o):Tl(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,n,r){const s=Gn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Cl(t,s,i,r,o):Tl(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(t,e,n,r){const s=Gn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Cl(t,s,i,r,o)},nearest(t,e,n,r){const s=Gn(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Tl(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Gn(e,t);return df(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Gn(e,t);return df(t,s,"y",n.intersect,r)}}};const Km=["left","top","right","bottom"];function bs(t,e){return t.filter(n=>n.pos===e)}function ff(t,e){return t.filter(n=>Km.indexOf(n.pos)===-1&&n.box.axis===e)}function xs(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Vk(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function qk(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Km.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function Kk(t,e){const n=qk(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=c?c*s:l&&e.availableHeight)}return n}function Gk(t){const e=Vk(t),n=xs(e.filter(u=>u.box.fullSize),!0),r=xs(bs(e,"left"),!0),s=xs(bs(e,"right")),i=xs(bs(e,"top"),!0),o=xs(bs(e,"bottom")),a=ff(e,"x"),l=ff(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:bs(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function pf(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Gm(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Yk(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!X(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&Gm(o,i.getPadding());const a=Math.max(0,e.outerWidth-pf(o,t,"left","right")),l=Math.max(0,e.outerHeight-pf(o,t,"top","bottom")),u=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function Jk(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Xk(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function As(t,e,n,r){const s=[];let i,o,a,l,u,c;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,Xk(a.horizontal,e));const{same:h,other:d}=Yk(e,n,a,r);u|=h&&s.length,c=c||d,l.fullSize||s.push(a)}return u&&As(s,e,n,r)||c}function ho(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function gf(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*c,d=u.size||l.height;la(u.start)&&(o=u.start),l.fullSize?ho(l,s.left,o,n.outerWidth-s.right-s.left,d):ho(l,e.left+u.placed,o,h,d),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*c,d=u.size||l.width;la(u.start)&&(i=u.start),l.fullSize?ho(l,i,s.top,d,n.outerHeight-s.bottom-s.top):ho(l,i,e.top+u.placed,d,h),u.start=i,u.placed+=h,i=l.right}}e.x=i,e.y=o}var xn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=At(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=Gk(t.boxes),l=a.vertical,u=a.horizontal;Q(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const c=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},s);Gm(d,At(r));const f=Object.assign({maxPadding:d,w:i,h:o,x:s.left,y:s.top},s),g=Kk(l.concat(u),h);As(a.fullSize,f,h,g),As(l,f,h,g),As(u,f,h,g)&&As(l,f,h,g),Jk(f),gf(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,gf(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Q(a.chartArea,y=>{const w=y.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Ym{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Qk extends Ym{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const jo="$chartjs",Zk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mf=t=>t===null||t==="";function eS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[jo]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mf(s)){const i=tf(t,"width");i!==void 0&&(t.width=i)}if(mf(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=tf(t,"height");i!==void 0&&(t.height=i)}return t}const Jm=uk?{passive:!0}:!1;function tS(t,e,n){t&&t.addEventListener(e,n,Jm)}function nS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Jm)}function rS(t,e){const n=Zk[t.type]||t.type,{x:r,y:s}=Gn(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function da(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function sS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||da(a.addedNodes,r),o=o&&!da(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function iS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||da(a.removedNodes,r),o=o&&!da(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Oi=new Map;let yf=0;function Xm(){const t=window.devicePixelRatio;t!==yf&&(yf=t,Oi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function oS(t,e){Oi.size||window.addEventListener("resize",Xm),Oi.set(t,e)}function aS(t){Oi.delete(t),Oi.size||window.removeEventListener("resize",Xm)}function lS(t,e,n){const r=t.canvas,s=r&&nh(r);if(!s)return;const i=Nm((a,l)=>{const u=s.clientWidth;n(a,l),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||i(u,c)});return o.observe(s),oS(t,i),o}function Ol(t,e,n){n&&n.disconnect(),e==="resize"&&aS(t)}function uS(t,e,n){const r=t.canvas,s=Nm(i=>{t.ctx!==null&&n(rS(i,t))},t);return tS(r,e,s),s}class cS extends Ym{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(eS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[jo])return!1;const r=n[jo].initial;["height","width"].forEach(i=>{const o=r[i];se(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[jo],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:sS,detach:iS,resize:lS}[n]||uS;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Ol,detach:Ol,resize:Ol}[n]||nS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return lk(e,n,r,s)}isAttached(e){const n=e&&nh(e);return!!(n&&n.isConnected)}}function hS(t){return!th()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Qk:cS}class sn{constructor(){F(this,"x");F(this,"y");F(this,"active",!1);F(this,"options");F(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ei(this.x)&&Ei(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}F(sn,"defaults",{}),F(sn,"defaultRoutes");function dS(t,e){const n=t.options.ticks,r=fS(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?gS(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>s)return mS(e,u,i,o/s),u;const c=pS(i,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(fo(e,u,c,se(f)?0:a-f,a),h=0,d=o-1;h<d;h++)fo(e,u,c,i[h],i[h+1]);return fo(e,u,c,l,se(f)?e.length:l+f),u}return fo(e,u,c),u}function fS(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function pS(t,e,n){const r=yS(t),s=e.length/n;if(!r)return Math.max(s,1);const i=ix(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function gS(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function mS(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function fo(t,e,n,r,s){const i=Y(r,0),o=Math.min(Y(s,t.length),t.length);let a=0,l,u,c;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),c=i;c<0;)a++,c=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===c&&(e.push(t[u]),a++,c=Math.round(i+a*n))}function yS(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const vS=t=>t==="left"?"right":t==="right"?"left":t,vf=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,_f=(t,e)=>Math.min(e||t,t);function wf(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function _S(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(s-1))/2,l+=s<e?u:-u,l<i-a||l>o+a)))return l}function wS(t,e){Q(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ks(t){return t.drawTicks?t.tickLength:0}function bf(t,e){if(!t.display)return 0;const n=Ye(t.font,e),r=At(t.padding);return(je(t.text)?t.text.length:1)*n.lineHeight+r.height}function bS(t,e){return pr(t,{scale:e,type:"scale"})}function xS(t,e,n){return pr(t,{tick:n,index:e,type:"tick"})}function kS(t,e,n){let r=Im(t);return(n&&e!=="right"||!n&&e==="right")&&(r=vS(r)),r}function SS(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:c}=l;let h=0,d,f,g;const y=o-s,w=a-i;if(t.isHorizontal()){if(f=tt(r,i,a),X(n)){const p=Object.keys(n)[0],m=n[p];g=c[p].getPixelForValue(m)+y-e}else n==="center"?g=(u.bottom+u.top)/2+y-e:g=vf(t,n,e);d=a-i}else{if(X(n)){const p=Object.keys(n)[0],m=n[p];f=c[p].getPixelForValue(m)-w+e}else n==="center"?f=(u.left+u.right)/2-w+e:f=vf(t,n,e);g=tt(r,o,s),h=n==="left"?-ke:ke}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class hs extends sn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=It(e,Number.POSITIVE_INFINITY),n=It(n,Number.NEGATIVE_INFINITY),r=It(r,Number.POSITIVE_INFINITY),s=It(s,Number.NEGATIVE_INFINITY),{min:It(e,r),max:It(n,s),minDefined:wt(e),maxDefined:wt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:It(n,It(r,n)),max:It(r,It(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Fx(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?wf(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=dS(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=oe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=_f(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,f=Ue(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),h+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-ks(e.grid)-n.padding-bf(e.title,this.chart.options.font),u=Math.sqrt(h*h+d*d),o=ux(Math.min(Math.asin(Ue((c.highest.height+6)/a,-1,1)),Math.asin(Ue(l/u,-1,1))-Math.asin(Ue(d/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bf(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=ks(i)+l):(e.height=this.maxHeight,e.width=ks(i)+l),r.display&&this.ticks.length){const{first:u,last:c,widest:h,highest:d}=this._getLabelSizes(),f=r.padding*2,g=Qt(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(a){const p=r.mirror?0:w*h.width+y*d.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=r.mirror?0:y*h.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(u,c,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?u?(d=s*e.width,f=r*n.height):(d=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?d=e.width:i!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let c=n.height/2,h=e.height/2;i==="start"?(c=0,h=e.height):i==="end"&&(c=n.height,h=0),this.paddingTop=c+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)se(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=wf(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/_f(n,r));let u=0,c=0,h,d,f,g,y,w,p,m,_,b,x;for(h=0;h<n;h+=l){if(g=e[h].label,y=this._resolveTickFontOptions(h),s.font=w=y.string,p=i[w]=i[w]||{data:{},gc:[]},m=y.lineHeight,_=b=0,!se(g)&&!je(g))_=Jd(s,p.data,p.gc,_,g),b=m;else if(je(g))for(d=0,f=g.length;d<f;++d)x=g[d],!se(x)&&!je(x)&&(_=Jd(s,p.data,p.gc,_,x),b+=m);o.push(_),a.push(b),u=Math.max(_,u),c=Math.max(b,c)}wS(i,n);const k=o.indexOf(u),S=a.indexOf(c),E=P=>({width:o[P]||0,height:a[P]||0});return{first:E(0),last:E(n-1),widest:E(k),highest:E(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return hx(this._alignToPixels?Wn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=xS(this.getContext(),e,r))}return this.$context||(this.$context=bS(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Qt(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=ks(i),f=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,p=function(V){return Wn(r,V,y)};let m,_,b,x,k,S,E,P,C,T,D,j;if(o==="top")m=p(this.bottom),S=this.bottom-d,P=m-w,T=p(e.top)+w,j=e.bottom;else if(o==="bottom")m=p(this.top),T=e.top,j=p(e.bottom)-w,S=m+w,P=this.top+d;else if(o==="left")m=p(this.right),k=this.right-d,E=m-w,C=p(e.left)+w,D=e.right;else if(o==="right")m=p(this.left),C=e.left,D=p(e.right)-w,k=m+w,E=this.left+d;else if(n==="x"){if(o==="center")m=p((e.top+e.bottom)/2+.5);else if(X(o)){const V=Object.keys(o)[0],K=o[V];m=p(this.chart.scales[V].getPixelForValue(K))}T=e.top,j=e.bottom,S=m+w,P=S+d}else if(n==="y"){if(o==="center")m=p((e.left+e.right)/2);else if(X(o)){const V=Object.keys(o)[0],K=o[V];m=p(this.chart.scales[V].getPixelForValue(K))}k=m-w,E=k-d,C=e.left,D=e.right}const z=Y(s.ticks.maxTicksLimit,h),U=Math.max(1,Math.ceil(h/z));for(_=0;_<h;_+=U){const V=this.getContext(_),K=i.setContext(V),A=a.setContext(V),L=K.lineWidth,N=K.color,q=A.dash||[],ee=A.dashOffset,ct=K.tickWidth,Te=K.tickColor,ht=K.tickBorderDash||[],Se=K.tickBorderDashOffset;b=_S(this,_,l),b!==void 0&&(x=Wn(r,b,L),u?k=E=C=D=x:S=P=T=j=x,f.push({tx1:k,ty1:S,tx2:E,ty2:P,x1:C,y1:T,x2:D,y2:j,width:L,color:N,borderDash:q,borderDashOffset:ee,tickWidth:ct,tickColor:Te,tickBorderDash:ht,tickBorderDashOffset:Se}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=i,d=ks(r.grid),f=d+c,g=h?-c:f,y=-Qt(this.labelRotation),w=[];let p,m,_,b,x,k,S,E,P,C,T,D,j="middle";if(s==="top")k=this.bottom-g,S=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+g,S=this._getXAxisLabelAlignment();else if(s==="left"){const U=this._getYAxisLabelAlignment(d);S=U.textAlign,x=U.x}else if(s==="right"){const U=this._getYAxisLabelAlignment(d);S=U.textAlign,x=U.x}else if(n==="x"){if(s==="center")k=(e.top+e.bottom)/2+f;else if(X(s)){const U=Object.keys(s)[0],V=s[U];k=this.chart.scales[U].getPixelForValue(V)+f}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")x=(e.left+e.right)/2-f;else if(X(s)){const U=Object.keys(s)[0],V=s[U];x=this.chart.scales[U].getPixelForValue(V)}S=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const z=this._getLabelSizes();for(p=0,m=a.length;p<m;++p){_=a[p],b=_.label;const U=i.setContext(this.getContext(p));E=this.getPixelForTick(p)+i.labelOffset,P=this._resolveTickFontOptions(p),C=P.lineHeight,T=je(b)?b.length:1;const V=T/2,K=U.color,A=U.textStrokeColor,L=U.textStrokeWidth;let N=S;o?(x=E,S==="inner"&&(p===m-1?N=this.options.reverse?"left":"right":p===0?N=this.options.reverse?"right":"left":N="center"),s==="top"?u==="near"||y!==0?D=-T*C+C/2:u==="center"?D=-z.highest.height/2-V*C+C:D=-z.highest.height+C/2:u==="near"||y!==0?D=C/2:u==="center"?D=z.highest.height/2-V*C:D=z.highest.height-T*C,h&&(D*=-1),y!==0&&!U.showLabelBackdrop&&(x+=C/2*Math.sin(y))):(k=E,D=(1-T)*C/2);let q;if(U.showLabelBackdrop){const ee=At(U.backdropPadding),ct=z.heights[p],Te=z.widths[p];let ht=D-ee.top,Se=0-ee.left;switch(j){case"middle":ht-=ct/2;break;case"bottom":ht-=ct;break}switch(S){case"center":Se-=Te/2;break;case"right":Se-=Te;break;case"inner":p===m-1?Se-=Te:p>0&&(Se-=Te/2);break}q={left:Se,top:ht,width:Te+ee.width,height:ct+ee.height,color:U.backdropColor}}w.push({label:b,font:P,textOffset:D,options:{rotation:y,color:K,strokeColor:A,strokeWidth:L,textAlign:N,textBaseline:j,translation:[x,k],backdrop:q}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Qt(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,c;return n==="left"?s?(c=this.right+i,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?s?(c=this.left+i,r==="near"?u="right":r==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,r==="near"?u="left":r==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,h,d;this.isHorizontal()?(u=Wn(e,this.left,o)-o/2,c=Wn(e,this.right,a)+a/2,h=d=l):(h=Wn(e,this.top,o)-o/2,d=Wn(e,this.bottom,a)+a/2,u=c=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(c,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Yc(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,c=o.textOffset;ca(r,u,0,c,l,a)}s&&Jc(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Ye(r.font),o=At(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||X(n)?(l+=o.bottom,je(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:h,rotation:d}=SS(this,l,n,a);ca(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:d,textAlign:kS(a,n,s),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Y(e.grid&&e.grid.z,-1),s=Y(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==hs.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ye(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class po{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;TS(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,ES(e,o,r),this.override&&ye.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ye[s]&&(delete ye[s][r],this.override&&delete hr[r])}}function ES(t,e,n){const r=ki(Object.create(null),[n?ye.get(n):{},ye.get(e),t.defaults]);ye.set(e,r),t.defaultRoutes&&CS(e,t.defaultRoutes),t.descriptors&&ye.describe(e,t.descriptors)}function CS(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ye.route(i,s,l,a)})}function TS(t){return"id"in t&&"defaults"in t}class OS{constructor(){this.controllers=new po(Xr,"datasets",!0),this.elements=new po(sn,"elements"),this.plugins=new po(Object,"plugins"),this.scales=new po(hs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Q(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Vc(e);oe(r["before"+s],[],r),n[e](r),oe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Lt=new OS;class PS{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(oe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Y(r.options&&r.options.plugins,{}),i=RS(r);return s===!1&&!n?[]:AS(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function RS(t){const e={},n=[],r=Object.keys(Lt.plugins.items);for(let i=0;i<r.length;i++)n.push(Lt.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function jS(t,e){return!e&&t===!1?null:t===!0?{}:t}function AS(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=jS(r[l],s);u!==null&&i.push({plugin:a,options:NS(t.config,{plugin:a,local:n[l]},u,o)})}return i}function NS(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $u(t,e){const n=ye.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function IS(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function MS(t,e){return t===e?"_index_":"_value_"}function xf(t){if(t==="x"||t==="y"||t==="r")return t}function DS(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function zu(t,...e){if(xf(t))return t;for(const n of e){const r=n.axis||DS(n.position)||t.length>1&&xf(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kf(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function LS(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return kf(t,"x",n[0])||kf(t,"y",n[0])}return{}}function $S(t,e){const n=hr[t.type]||{scales:{}},r=e.scales||{},s=$u(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!X(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=zu(o,a,LS(o,t),ye.scales[a.type]),u=MS(l,s),c=n.scales||{};i[o]=qs(Object.create(null),[{axis:l},a,c[l],c[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||$u(a,e),c=(hr[a]||{}).scales||{};Object.keys(c).forEach(h=>{const d=IS(h,l),f=o[d+"AxisID"]||d;i[f]=i[f]||Object.create(null),qs(i[f],[{axis:d},r[f],c[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];qs(a,[ye.scales[a.type],ye.scale])}),i}function Qm(t){const e=t.options||(t.options={});e.plugins=Y(e.plugins,{}),e.scales=$S(t,e)}function Zm(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function zS(t){return t=t||{},t.data=Zm(t.data),Qm(t),t}const Sf=new Map,ey=new Set;function go(t,e){let n=Sf.get(t);return n||(n=e(),Sf.set(t,n),ey.add(n)),n}const Ss=(t,e,n)=>{const r=Si(e,n);r!==void 0&&t.add(r)};class FS{constructor(e){this._config=zS(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Zm(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qm(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return go(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return go(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return go(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return go(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(c=>{e&&(l.add(e),c.forEach(h=>Ss(l,e,h))),c.forEach(h=>Ss(l,s,h)),c.forEach(h=>Ss(l,hr[i]||{},h)),c.forEach(h=>Ss(l,ye,h)),c.forEach(h=>Ss(l,Iu,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),ey.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,hr[n]||{},ye.datasets[n]||{},{type:n},ye,Iu]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Ef(this._resolverCache,e,s);let l=o;if(BS(o,n)){i.$shared=!1,r=Mn(r)?r():r;const u=this.createResolver(e,r,a);l=os(o,r,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Ef(this._resolverCache,e,r);return X(n)?os(i,n,void 0,s):i}}function Ef(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Qc(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const US=t=>X(t)&&Object.getOwnPropertyNames(t).some(e=>Mn(t[e]));function BS(t,e){const{isScriptable:n,isIndexable:r}=Lm(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(Mn(a)||US(a))||o&&je(a))return!0}return!1}var WS="4.5.1";const HS=["top","bottom","left","right","chartArea"];function Cf(t,e){return t==="top"||t==="bottom"||HS.indexOf(t)===-1&&e==="x"}function Tf(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Of(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),oe(n&&n.onComplete,[t],e)}function VS(t){const e=t.chart,n=e.options.animation;oe(n&&n.onProgress,[t],e)}function ty(t){return th()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ao={},Pf=t=>{const e=ty(t);return Object.values(Ao).filter(n=>n.canvas===e).pop()};function qS(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function KS(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var hn;let Di=(hn=class{static register(...e){Lt.add(...e),Rf()}static unregister(...e){Lt.remove(...e),Rf()}constructor(e,n){const r=this.config=new FS(n),s=ty(e),i=Pf(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||hS(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=Jb(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mx(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Ao[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ht.listen(this,"complete",Of),Ht.listen(this,"progress",VS),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return se(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Lt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ef(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Xd(this.canvas,this.ctx),this}stop(){return Ht.stop(this),this}resize(e,n){Ht.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ef(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),oe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Q(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=zu(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),Q(i,o=>{const a=o.options,l=a.id,u=zu(l,a),c=Y(a.type,o.dtype);(a.position===void 0||Cf(a.position,u)!==Cf(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===c)h=r[l];else{const d=Lt.getScale(c);h=new d({id:l,type:c,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,e)}),Q(s,(o,a)=>{o||delete r[a]}),Q(r,o=>{xn.configure(this,o,o.options),xn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Tf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||$u(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Lt.getController(a),{datasetElementType:u,dataElementType:c}=ye.datasets[a];Object.assign(l,{dataElementType:Lt.getElement(c),datasetElementType:u&&Lt.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Q(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:h}=this.getDatasetMeta(u),d=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Q(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Tf("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Q(this.scales,e=>{xn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Ud(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;qS(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Ud(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Q(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Mn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ht.has(this)?this.attached&&!Ht.running(this)&&Ht.start(this):(this.draw(),Of({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=kk(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Yc(n,s),e.controller.draw(),s&&Jc(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ti(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Hk.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=pr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);la(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ht.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Xd(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ao[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Q(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},s=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Q(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Q(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!oa(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=nx(e),u=KS(e,this._lastEvent,r,l);r&&(this._lastEvent=null,oe(i.onHover,[e,a,this],this),l&&oe(i.onClick,[e,a,this],this));const c=!oa(a,s);return(c||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,c}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},F(hn,"defaults",ye),F(hn,"instances",Ao),F(hn,"overrides",hr),F(hn,"registry",Lt),F(hn,"version",WS),F(hn,"getChart",Pf),hn);function Rf(){return Q(Di.instances,t=>t._plugins.invalidate())}function GS(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:u,borderJoinStyle:c}=l,h=Math.min(u/o,Tt(r-n));if(t.beginPath(),t.arc(s,i,o-u/2,r+h/2,n-h/2),a>0){const d=Math.min(u/a,Tt(r-n));t.arc(s,i,a+u/2,n-d/2,r+d/2,!0)}else{const d=Math.min(u/2,o*Tt(r-n));if(c==="round")t.arc(s,i,d,n-te/2,r+te/2,!0);else if(c==="bevel"){const f=2*d*d,g=-f*Math.cos(n+te/2)+s,y=-f*Math.sin(n+te/2)+i,w=f*Math.cos(r+te/2)+s,p=f*Math.sin(r+te/2)+i;t.lineTo(g,y),t.lineTo(w,p)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function YS(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:a,innerRadius:l}=e;let u=s/a;t.beginPath(),t.arc(i,o,a,r-u,n+u),l>s?(u=s/l,t.arc(i,o,l,n+u,r-u,!0)):t.arc(i,o,s,n+ke,r-ke),t.closePath(),t.clip()}function JS(t){return Xc(t,["outerStart","outerEnd","innerStart","innerEnd"])}function XS(t,e,n,r){const s=JS(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,r*e/2),a=l=>{const u=(n-Math.min(i,l))*r/2;return Ue(l,0,Math.min(i,u))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ue(s.innerStart,0,o),innerEnd:Ue(s.innerEnd,0,o)}}function kr(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function fa(t,e,n,r,s,i){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,h=Math.max(e.outerRadius+r+n-u,0),d=c>0?c+r+n+u:0;let f=0;const g=s-l;if(r){const U=c>0?c-r:0,V=h>0?h-r:0,K=(U+V)/2,A=K!==0?g*K/(K+r):g;f=(g-A)/2}const y=Math.max(.001,g*h-n/te)/h,w=(g-y)/2,p=l+w+f,m=s-w-f,{outerStart:_,outerEnd:b,innerStart:x,innerEnd:k}=XS(e,d,h,m-p),S=h-_,E=h-b,P=p+_/S,C=m-b/E,T=d+x,D=d+k,j=p+x/T,z=m-k/D;if(t.beginPath(),i){const U=(P+C)/2;if(t.arc(o,a,h,P,U),t.arc(o,a,h,U,C),b>0){const L=kr(E,C,o,a);t.arc(L.x,L.y,b,C,m+ke)}const V=kr(D,m,o,a);if(t.lineTo(V.x,V.y),k>0){const L=kr(D,z,o,a);t.arc(L.x,L.y,k,m+ke,z+Math.PI)}const K=(m-k/d+(p+x/d))/2;if(t.arc(o,a,d,m-k/d,K,!0),t.arc(o,a,d,K,p+x/d,!0),x>0){const L=kr(T,j,o,a);t.arc(L.x,L.y,x,j+Math.PI,p-ke)}const A=kr(S,p,o,a);if(t.lineTo(A.x,A.y),_>0){const L=kr(S,P,o,a);t.arc(L.x,L.y,_,p-ke,P)}}else{t.moveTo(o,a);const U=Math.cos(P)*h+o,V=Math.sin(P)*h+a;t.lineTo(U,V);const K=Math.cos(C)*h+o,A=Math.sin(C)*h+a;t.lineTo(K,A)}t.closePath()}function QS(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){fa(t,e,n,r,l,s);for(let u=0;u<i;++u)t.fill();isNaN(a)||(l=o+(a%ge||ge))}return fa(t,e,n,r,l,s),t.fill(),l}function ZS(t,e,n,r,s){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:h,borderDashOffset:d,borderRadius:f}=l,g=l.borderAlign==="inner";if(!u)return;t.setLineDash(h||[]),t.lineDashOffset=d,g?(t.lineWidth=u*2,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel");let y=e.endAngle;if(i){fa(t,e,n,r,y,s);for(let w=0;w<i;++w)t.stroke();isNaN(a)||(y=o+(a%ge||ge))}g&&YS(t,e,y),l.selfJoin&&y-o>=te&&f===0&&c!=="miter"&&GS(t,e,y),i||(fa(t,e,n,r,y,s),t.stroke())}class Ns extends sn{constructor(n){super();F(this,"circumference");F(this,"endAngle");F(this,"fullCircles");F(this,"innerRadius");F(this,"outerRadius");F(this,"pixelMargin");F(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:a}=Rm(i,{x:n,y:r}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,g=Y(d,u-l),y=Ci(o,l,u)&&l!==u,w=g>=ge||y,p=Fr(a,c+f,h+f);return w&&p}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:c}=this.options,h=(i+o)/2,d=(a+l+c+u)/2;return{x:r+Math.cos(h)*d,y:s+Math.sin(h)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>ge?Math.floor(s/ge):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const u=1-Math.sin(Math.min(te,s||0)),c=i*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,QS(n,this,c,o,a),ZS(n,this,c,o,a),n.restore()}}F(Ns,"id","arc"),F(Ns,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),F(Ns,"defaultRoutes",{backgroundColor:"backgroundColor"}),F(Ns,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function ny(t,e,n=e){t.lineCap=Y(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Y(n.borderDash,e.borderDash)),t.lineDashOffset=Y(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Y(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Y(n.borderWidth,e.borderWidth),t.strokeStyle=Y(n.borderColor,e.borderColor)}function e1(t,e,n){t.lineTo(n.x,n.y)}function t1(t){return t.stepped?Rx:t.tension||t.cubicInterpolationMode==="monotone"?jx:e1}function ry(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),u=Math.min(i,a),c=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!c?r+u-l:u-l}}function n1(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:u}=ry(s,n,r),c=t1(i);let{move:h=!0,reverse:d}=r||{},f,g,y;for(f=0;f<=u;++f)g=s[(a+(d?u-f:f))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):c(t,y,g,d,i.stepped),y=g);return l&&(g=s[(a+(d?u:0))%o],c(t,y,g,d,i.stepped)),!!l}function r1(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=ry(s,n,r),{move:l=!0,reverse:u}=r||{};let c=0,h=0,d,f,g,y,w,p;const m=b=>(o+(u?a-b:b))%i,_=()=>{y!==w&&(t.lineTo(c,w),t.lineTo(c,y),t.lineTo(c,p))};for(l&&(f=s[m(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[m(d)],f.skip)continue;const b=f.x,x=f.y,k=b|0;k===g?(x<y?y=x:x>w&&(w=x),c=(h*c+b)/++h):(_(),t.lineTo(b,x),g=k,h=0,y=w=x),p=x}_()}function Fu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?r1:n1}function s1(t){return t.stepped?ck:t.tension||t.cubicInterpolationMode==="monotone"?hk:Yn}function i1(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),ny(t,e.options),t.stroke(s)}function o1(t,e,n,r){const{segments:s,options:i}=e,o=Fu(e);for(const a of s)ny(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const a1=typeof Path2D=="function";function l1(t,e,n,r){a1&&!e.options.segment?i1(t,e,n,r):o1(t,e,n,r)}class Ur extends sn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;nk(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_k(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=mk(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=s1(r);let u,c;for(u=0,c=o.length;u<c;++u){const{start:h,end:d}=o[u],f=i[h],g=i[d];if(f===g){a.push(f);continue}const y=Math.abs((s-f[n])/(g[n]-f[n])),w=l(f,g,y,r.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Fu(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Fu(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),l1(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}F(Ur,"id","line"),F(Ur,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),F(Ur,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),F(Ur,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function jf(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Xs extends sn{constructor(n){super();F(this,"parsed");F(this,"skip");F(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return jf(this,n,"x",r)}inYRange(n,r){return jf(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Ti(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Mu(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}F(Xs,"id","point"),F(Xs,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),F(Xs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Af=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},u1=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Nf extends sn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Ye(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Af(r,i);let u,c;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,i,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=s+a;let h=e;i.textAlign="left",i.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((g,y)=>{const w=r+n/2+i.measureText(g.text).width;(y===0||u[u.length-1]+w+2*a>o)&&(h+=c,u[u.length-(y>0?0:1)]=0,f+=c,d++),l[y]={left:0,top:f,row:d,width:w,height:s},u[u.length-1]+=w+a}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let h=a,d=0,f=0,g=0,y=0;return this.legendItems.forEach((w,p)=>{const{itemWidth:m,itemHeight:_}=c1(r,n,i,w,s);p>0&&f+_+2*a>c&&(h+=d+a,u.push({width:d,height:f}),g+=d+a,y++,d=f=0),l[p]={left:g,top:f,col:y,width:m,height:_},d=Math.max(d,m),f+=_+a}),h+=d,u.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Jr(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=tt(r,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=tt(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=tt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=tt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yc(e,this),this._draw(),Jc(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=ye.color,l=Jr(e.rtl,this.left,this.width),u=Ye(o.font),{padding:c}=o,h=u.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=Af(o,h),p=function(k,S,E){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;s.save();const P=Y(E.lineWidth,1);if(s.fillStyle=Y(E.fillStyle,a),s.lineCap=Y(E.lineCap,"butt"),s.lineDashOffset=Y(E.lineDashOffset,0),s.lineJoin=Y(E.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=Y(E.strokeStyle,a),s.setLineDash(Y(E.lineDash,[])),o.usePointStyle){const C={radius:y*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:P},T=l.xPlus(k,g/2),D=S+d;Dm(s,C,T,D,o.pointStyleWidth&&g)}else{const C=S+Math.max((h-y)/2,0),T=l.leftForLtr(k,g),D=Js(E.borderRadius);s.beginPath(),Object.values(D).some(j=>j!==0)?Du(s,{x:T,y:C,w:g,h:y,radius:D}):s.rect(T,C,g,y),s.fill(),P!==0&&s.stroke()}s.restore()},m=function(k,S,E){ca(s,E.text,k,S+w/2,u,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},_=this.isHorizontal(),b=this._computeTitleHeight();_?f={x:tt(i,this.left+c,this.right-r[0]),y:this.top+c+b,line:0}:f={x:this.left+c,y:tt(i,this.top+b+c,this.bottom-n[0].height),line:0},Bm(this.ctx,e.textDirection);const x=w+c;this.legendItems.forEach((k,S)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const E=s.measureText(k.text).width,P=l.textAlign(k.textAlign||(k.textAlign=o.textAlign)),C=g+d+E;let T=f.x,D=f.y;l.setWidth(this.width),_?S>0&&T+C+c>this.right&&(D=f.y+=x,f.line++,T=f.x=tt(i,this.left+c,this.right-r[f.line])):S>0&&D+x>this.bottom&&(T=f.x=T+n[f.line].width+c,f.line++,D=f.y=tt(i,this.top+b+c,this.bottom-n[f.line].height));const j=l.x(T);if(p(j,D,k),T=yx(P,T+g+d,_?T+C:this.right,e.rtl),m(l.x(T),D,k),_)f.x+=C+c;else if(typeof k.text!="string"){const z=u.lineHeight;f.y+=sy(k,z)+c}else f.y+=x}),Wm(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ye(n.font),s=At(n.padding);if(!n.display)return;const i=Jr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=s.top+l;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,h=tt(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);c=u+tt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=tt(a,h,h+d);o.textAlign=i.textAlign(Im(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ca(o,n.text,f,c,r)}_computeTitleHeight(){const e=this.options.title,n=Ye(e.font),r=At(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Fr(e,this.left,this.right)&&Fr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Fr(e,s.left,s.left+s.width)&&Fr(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!f1(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=u1(s,r);s&&!i&&oe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&oe(n.onHover,[e,r,this],this)}else r&&oe(n.onClick,[e,r,this],this)}}function c1(t,e,n,r,s){const i=h1(r,t,e,n),o=d1(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function h1(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function d1(t,e,n){let r=t;return typeof e.text!="string"&&(r=sy(e,n)),r}function sy(t,e){const n=t.text?t.text.length:0;return e*n}function f1(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var iy={id:"legend",_element:Nf,start(t,e,n){const r=t.legend=new Nf({ctx:t.ctx,options:n,chart:t});xn.configure(t,r,n),xn.addBox(t,r)},stop(t){xn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;xn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),c=At(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Is={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=Nu(e,u);c<s&&(s=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Mt(t,e){return e&&(je(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Vt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function p1(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function If(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Ye(e.bodyFont),u=Ye(e.titleFont),c=Ye(e.footerFont),h=i.length,d=s.length,f=r.length,g=At(e.padding);let y=g.height,w=0,p=r.reduce((b,x)=>b+x.before.length+x.lines.length+x.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),p){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*b+(p-f)*l.lineHeight+(p-1)*e.bodySpacing}d&&(y+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let m=0;const _=function(b){w=Math.max(w,n.measureText(b).width+m)};return n.save(),n.font=u.string,Q(t.title,_),n.font=l.string,Q(t.beforeBody.concat(t.afterBody),_),m=e.displayColors?o+2+e.boxPadding:0,Q(r,b=>{Q(b.before,_),Q(b.lines,_),Q(b.after,_)}),m=0,n.font=c.string,Q(t.footer,_),n.restore(),w+=g.width,{width:w,height:y}}function g1(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function m1(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function y1(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=s<=(a+l)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),m1(u,t,e,n)&&(u="center"),u}function Mf(t,e,n){const r=n.yAlign||e.yAlign||g1(t,n);return{xAlign:n.xAlign||e.xAlign||y1(t,e,n,r),yAlign:r}}function v1(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function _1(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Df(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=s+i,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=Js(o);let g=v1(e,a);const y=_1(e,l,u);return l==="center"?a==="left"?g+=u:a==="right"&&(g-=u):a==="left"?g-=Math.max(c,d)+s:a==="right"&&(g+=Math.max(h,f)+s),{x:Ue(g,0,r.width-e.width),y:Ue(y,0,r.height-e.height)}}function mo(t,e,n){const r=At(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Lf(t){return Mt([],Vt(t))}function w1(t,e,n){return pr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function $f(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const oy={beforeTitle:Wt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Wt,beforeBody:Wt,beforeLabel:Wt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wt,afterBody:Wt,beforeFooter:Wt,footer:Wt,afterFooter:Wt};function Ve(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?oy[e].call(n,r):s}class Uu extends sn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Vm(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=w1(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ve(r,"beforeTitle",this,e),i=Ve(r,"title",this,e),o=Ve(r,"afterTitle",this,e);let a=[];return a=Mt(a,Vt(s)),a=Mt(a,Vt(i)),a=Mt(a,Vt(o)),a}getBeforeBody(e,n){return Lf(Ve(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Q(e,i=>{const o={before:[],lines:[],after:[]},a=$f(r,i);Mt(o.before,Vt(Ve(a,"beforeLabel",this,i))),Mt(o.lines,Ve(a,"label",this,i)),Mt(o.after,Vt(Ve(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Lf(Ve(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ve(r,"beforeFooter",this,e),i=Ve(r,"footer",this,e),o=Ve(r,"afterFooter",this,e);let a=[];return a=Mt(a,Vt(s)),a=Mt(a,Vt(i)),a=Mt(a,Vt(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(p1(this.chart,n[l]));return e.filter&&(a=a.filter((c,h,d)=>e.filter(c,h,d,r))),e.itemSort&&(a=a.sort((c,h)=>e.itemSort(c,h,r))),Q(a,c=>{const h=$f(e.callbacks,c);s.push(Ve(h,"labelColor",this,c)),i.push(Ve(h,"labelPointStyle",this,c)),o.push(Ve(h,"labelTextColor",this,c))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Is[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=If(this,r),u=Object.assign({},a,l),c=Mf(this.chart,r,u),h=Df(r,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=Js(a),{x:d,y:f}=e,{width:g,height:y}=n;let w,p,m,_,b,x;return i==="center"?(b=f+y/2,s==="left"?(w=d,p=w-o,_=b+o,x=b-o):(w=d+g,p=w+o,_=b-o,x=b+o),m=w):(s==="left"?p=d+Math.max(l,c)+o:s==="right"?p=d+g-Math.max(u,h)-o:p=this.caretX,i==="top"?(_=f,b=_-o,w=p-o,m=p+o):(_=f+y,b=_+o,w=p+o,m=p-o),x=_),{x1:w,x2:p,x3:m,y1:_,y2:b,y3:x}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const u=Jr(r.rtl,this.x,this.width);for(e.x=mo(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=Ye(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=i,c=Ye(i.bodyFont),h=mo(this,"left",i),d=s.x(h),f=l<c.lineHeight?(c.lineHeight-l)/2:0,g=n.y+f;if(i.usePointStyle){const y={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=s.leftForLtr(d,u)+u/2,p=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Mu(e,y,w,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Mu(e,y,w,p)}else{e.lineWidth=X(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(d,u),w=s.leftForLtr(s.xPlus(d,1),u-2),p=Js(o.borderRadius);Object.values(p).some(m=>m!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Du(e,{x:y,y:g,w:u,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Du(e,{x:w,y:g+1,w:u-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,g,u,l),e.strokeRect(y,g,u,l),e.fillStyle=o.backgroundColor,e.fillRect(w,g+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=r,h=Ye(r.bodyFont);let d=h.lineHeight,f=0;const g=Jr(r.rtl,this.x,this.width),y=function(E){n.fillText(E,g.x(e.x+f),e.y+d/2),e.y+=d+i},w=g.textAlign(o);let p,m,_,b,x,k,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=mo(this,w,r),n.fillStyle=r.bodyColor,Q(this.beforeBody,y),f=a&&w!=="right"?o==="center"?u/2+c:u+2+c:0,b=0,k=s.length;b<k;++b){for(p=s[b],m=this.labelTextColors[b],n.fillStyle=m,Q(p.before,y),_=p.lines,a&&_.length&&(this._drawColorBox(n,e,b,g,r),d=Math.max(h.lineHeight,l)),x=0,S=_.length;x<S;++x)y(_[x]),d=h.lineHeight;Q(p.after,y)}f=0,d=h.lineHeight,Q(this.afterBody,y),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Jr(r.rtl,this.x,this.width);for(e.x=mo(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ye(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:c}=r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Js(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+u-d,l),n.quadraticCurveTo(a+u,l,a+u,l+d),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+u,l+c-g),n.quadraticCurveTo(a+u,l+c,a+u-g,l+c),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+c),n.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Is[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=If(this,e),l=Object.assign({},o,this._size),u=Mf(n,e,l),c=Df(e,l,u,n);(s._to!==c.x||i._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=At(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Bm(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Wm(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!oa(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!oa(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Is[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}F(Uu,"positioners",Is);var ay={id:"tooltip",_element:Uu,positioners:Is,afterInit(t,e,n){n&&(t.tooltip=new Uu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:oy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const b1=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function x1(t,e,n,r){const s=t.indexOf(e);if(s===-1)return b1(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const k1=(t,e)=>t===null?null:Ue(Math.round(t),0,e);function zf(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class pa extends hs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(se(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:x1(r,e,Y(n,e),this._addedLabels),k1(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return zf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}F(pa,"id","category"),F(pa,"defaults",{ticks:{callback:zf}});function S1(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:d}=t,f=i||1,g=c-1,{min:y,max:w}=e,p=!se(o),m=!se(a),_=!se(u),b=(w-y)/(h+1);let x=Wd((w-y)/g/f)*f,k,S,E,P;if(x<1e-14&&!p&&!m)return[{value:y},{value:w}];P=Math.ceil(w/x)-Math.floor(y/x),P>g&&(x=Wd(P*x/g/f)*f),se(l)||(k=Math.pow(10,l),x=Math.ceil(x*k)/k),s==="ticks"?(S=Math.floor(y/x)*x,E=Math.ceil(w/x)*x):(S=y,E=w),p&&m&&i&&ax((a-o)/i,x/1e3)?(P=Math.round(Math.min((a-o)/x,c)),x=(a-o)/P,S=o,E=a):_?(S=p?o:S,E=m?a:E,P=u-1,x=(E-S)/P):(P=(E-S)/x,Ks(P,Math.round(P),x/1e3)?P=Math.round(P):P=Math.ceil(P));const C=Math.max(Hd(x),Hd(S));k=Math.pow(10,se(l)?C:l),S=Math.round(S*k)/k,E=Math.round(E*k)/k;let T=0;for(p&&(d&&S!==o?(n.push({value:o}),S<o&&T++,Ks(Math.round((S+T*x)*k)/k,o,Ff(o,b,t))&&T++):S<o&&T++);T<P;++T){const D=Math.round((S+T*x)*k)/k;if(m&&D>a)break;n.push({value:D})}return m&&d&&E!==a?n.length&&Ks(n[n.length-1].value,a,Ff(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!m||E===a)&&n.push({value:E}),n}function Ff(t,e,{horizontal:n,minRotation:r}){const s=Qt(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class E1 extends hs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=is(s),u=is(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=S1(s,i);return e.bounds==="ticks"&&lx(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Gc(e,this.chart.options.locale,this.options.ticks.format)}}class ga extends E1{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=wt(e)?e:0,this.max=wt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Qt(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}F(ga,"id","linear"),F(ga,"defaults",{ticks:{callback:Mm.formatters.numeric}});const $a={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ke=Object.keys($a);function Uf(t,e){return t-e}function Bf(t,e){if(se(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),wt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ei(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Wf(t,e,n,r){const s=Ke.length;for(let i=Ke.indexOf(t);i<s-1;++i){const o=$a[Ke[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ke[i]}return Ke[s-1]}function C1(t,e,n,r,s){for(let i=Ke.length-1;i>=Ke.indexOf(n);i--){const o=Ke[i];if($a[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Ke[n?Ke.indexOf(n):0]}function T1(t){for(let e=Ke.indexOf(t)+1,n=Ke.length;e<n;++e)if($a[Ke[e]].common)return Ke[e]}function Hf(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=qc(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function O1(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Vf(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:O1(t,r,s,n)}class ma extends hs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new zk._date(e.adapters.date);s.init(n),qs(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Bf(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=wt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=wt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=fx(s,i,o);return this._unit=n.unit||(r.autoSkip?Wf(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):C1(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:T1(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Vf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ue(n,0,o),r=Ue(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Wf(i.minUnit,n,r,this._getLabelCapacity(n)),a=Y(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=Ei(l)||l===!0,c={};let h=n,d,f;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<r;d=+e.add(d,a,o),f++)Hf(c,d,g);return(d===r||s.bounds==="ticks"||f===1)&&Hf(c,d,g),Object.keys(c).sort(Uf).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return oe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],h=u&&a[u],d=r[n],f=u&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:c))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Qt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Vf(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Bf(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return gx(e.sort(Uf))}}F(ma,"id","time"),F(ma,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function yo(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=nr(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=nr(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class qf extends ma{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=yo(n,this.min),this._tableRange=yo(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)c=s[o+1],l=s[o-1],u=s[o],Math.round((c+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(yo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return yo(this._table,r*this._tableRange+this._minPos,!0)}}F(qf,"id","timeseries"),F(qf,"defaults",ma.defaults);const ly="label";function Kf(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function P1(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function uy(t,e){t.labels=e}function cy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ly;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function R1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ly;const n={labels:[],datasets:[]};return uy(n,t.labels),cy(n,t.datasets,e),n}function j1(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:u=[],fallbackContent:c,updateMode:h,...d}=t,f=R.useRef(null),g=R.useRef(),y=()=>{f.current&&(g.current=new Di(f.current,{type:o,data:R1(a,i),options:l&&{...l},plugins:u}),Kf(e,g.current))},w=()=>{Kf(e,null),g.current&&(g.current.destroy(),g.current=null)};return R.useEffect(()=>{!s&&g.current&&l&&P1(g.current,l)},[s,l]),R.useEffect(()=>{!s&&g.current&&uy(g.current.config.data,a.labels)},[s,a.labels]),R.useEffect(()=>{!s&&g.current&&a.datasets&&cy(g.current.config.data,a.datasets,i)},[s,a.datasets]),R.useEffect(()=>{g.current&&(s?(w(),setTimeout(y)):g.current.update(h))},[s,l,a.labels,a.datasets,h]),R.useEffect(()=>{g.current&&(w(),setTimeout(y))},[o]),R.useEffect(()=>(y(),()=>w()),[]),Qs.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:r},d),c)}const A1=R.forwardRef(j1);function hy(t,e){return Di.register(e),R.forwardRef((n,r)=>Qs.createElement(A1,Object.assign({},n,{ref:r,type:t})))}const Bu=hy("line",Ro),N1=hy("pie",Lu);Di.register(pa,ga,Xs,Ur,ay,iy);function I1({page:t="dashboard"}){const[e,n]=R.useState(null),[r,s]=R.useState(null),[i,o]=R.useState(null),[a,l]=R.useState(null),[u,c]=R.useState(()=>{const T=new Date;return T.setDate(T.getDate()-30),T.toISOString().slice(0,10)}),[h,d]=R.useState(()=>new Date().toISOString().slice(0,10)),[f,g]=R.useState([]),[y,w]=R.useState([]),[p,m]=R.useState([]),[_,b]=R.useState([]),[x,k]=R.useState(22);R.useEffect(()=>{async function T(){const{count:D}=await H.from("sup").select("id",{count:"exact"}).eq("status","available");n(D??0);const j=new Date;j.setHours(0,0,0,0);const z=new Date;z.setHours(23,59,59,999);const{count:U}=await H.from("booking").select("id",{count:"exact"}).gte("start_time",j.toISOString()).lte("start_time",z.toISOString());s(U??0);const{data:V}=await H.from("booking").select("price").gte("start_time",j.toISOString()).lte("start_time",z.toISOString()),K=(V||[]).reduce((N,q)=>N+Number(q.price||0),0);o(K);const{data:A}=await H.from("expense").select("amount").gte("date",j.toISOString().slice(0,10)).lte("date",z.toISOString().slice(0,10)),L=(A||[]).reduce((N,q)=>N+Number(q.amount||0),0);l(L);try{const{data:N}=await H.rpc("report_daily_revenue",{start_date:u,end_date:h});g(N??[])}catch{g([])}try{const{data:N}=await H.rpc("report_daily_orders",{start_date:u,end_date:h});w(N??[])}catch{w([])}try{const{data:N}=await H.rpc("report_revenue_by_equipment",{start_date:u,end_date:h});m(N??[])}catch{m([])}try{const{data:N}=await H.rpc("report_top_products",{start_date:u,end_date:h,p_limit:6});b(N??[])}catch{b([])}try{const{data:N}=await H.from("app_setting").select("value").eq("key","iva_percent").single(),q=N!=null&&N.value?Number(N.value):22;k(Number.isFinite(q)?q:22)}catch{k(22)}}T()},[u,h]);const S=typeof document<"u"&&document.documentElement.classList.contains("dark"),E=S?"#9CA3AF":"#374151",P=S?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",C={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:E}}},scales:{x:{ticks:{color:E},grid:{color:P}},y:{ticks:{color:E},grid:{color:P}}}};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-semibold",children:"Dashboard"}),v.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-300",children:"Panoramica attivit  accesso pubblico"})]})}),t==="dashboard"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2 -mx-2 px-2",children:[v.jsx(Ft,{title:"Entrate",value:Number(i??0).toFixed(2)+" ",color:"accent"}),v.jsx(Ft,{title:"Ordini",value:r??0,color:"neutral"}),v.jsx(Ft,{title:"Spese",value:Number(a??0).toFixed(2)+" ",color:"warning"}),v.jsx(Ft,{title:"IVA",value:(Number(i??0)*x/100).toFixed(2)+" ",color:"neutral"}),v.jsx(Ft,{title:"Profitto",value:(Number(i??0)-Number(a??0)-Number(i??0)*x/100).toFixed(2)+" ",color:"success"})]})}),v.jsxs("div",{className:"mb-4 flex items-center gap-2 flex-wrap",children:[v.jsx("label",{className:"text-sm",children:"Da"}),v.jsx("input",{type:"date",className:"border px-2 py-1 rounded",value:u,onChange:T=>c(T.target.value)}),v.jsx("label",{className:"text-sm",children:"A"}),v.jsx("input",{type:"date",className:"border px-2 py-1 rounded",value:h,onChange:T=>d(T.target.value)}),v.jsx("div",{className:"flex-1"}),v.jsx("button",{onClick:()=>{},className:"px-3 py-1 rounded bg-amber-500 text-white",children:"Applica"})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500 mb-2",children:"Incassi nel Periodo"}),v.jsx("div",{className:"h-56 bg-white/5 rounded p-3",children:v.jsx("div",{className:"h-full",children:v.jsx(Bu,{data:{labels:f.map(T=>T.day),datasets:[{label:"Entrate",data:f.map(T=>Number(T.revenue)),borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.1)"}]},options:C})})})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500 mb-2",children:"Ordini nel Periodo"}),v.jsx("div",{className:"h-56 bg-white/5 rounded p-3",children:v.jsx("div",{className:"h-full",children:v.jsx(Bu,{data:{labels:y.map(T=>T.day),datasets:[{label:"Ordini",data:y.map(T=>Number(T.orders)),borderColor:"#10b981",backgroundColor:"rgba(16,185,129,0.1)"}]},options:C})})})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500 mb-2",children:"Ripartizione per Attrezzatura"}),v.jsx("div",{className:"h-48 bg-white/5 rounded p-3",children:v.jsx("table",{className:"w-full text-sm",children:v.jsx("tbody",{children:p.map(T=>v.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[v.jsx("td",{className:"py-2",children:T.equipment}),v.jsx("td",{className:"py-2",children:T.bookings_count}),v.jsxs("td",{className:"py-2",children:[Number(T.revenue).toFixed(2)," "]})]},T.equipment))})})})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500 mb-2",children:"Prodotti pi venduti"}),v.jsx("div",{className:"h-48 bg-white/5 rounded p-3 overflow-auto",children:v.jsx("ol",{className:"list-decimal list-inside space-y-2",children:_.map((T,D)=>v.jsxs("li",{className:"flex items-center justify-between",children:[v.jsx("span",{children:T.name}),v.jsxs("span",{className:"text-sm text-neutral-400",children:[T.bookings_count,"  ",Number(T.revenue).toFixed(2)," "]})]},T.name||D))})})]})]})]}),t==="equipment"&&v.jsx(Tb,{}),t==="bookings"&&v.jsx(Eb,{}),t==="packages"&&v.jsx(Sb,{}),t==="expenses"&&v.jsx(Cb,{}),v.jsx("div",{className:"mt-6",children:v.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Usa la sidebar per navigare tra le sezioni."})})]})}const dy=R.createContext({theme:"light",toggle:()=>{}});function M1({children:t}){const[e,n]=R.useState(()=>{try{return localStorage.getItem("theme")||"light"}catch{return"light"}});return R.useEffect(()=>{const r=document.documentElement;e==="dark"?r.classList.add("dark"):r.classList.remove("dark");try{localStorage.setItem("theme",e)}catch{}},[e]),v.jsx(dy.Provider,{value:{theme:e,toggle:()=>n(r=>r==="light"?"dark":"light")},children:t})}function D1(){return R.useContext(dy)}function L1({onNav:t,currentPage:e}){const{theme:n,toggle:r}=D1(),[s,i]=Qs.useState(!1),[o,a]=Qs.useState(!1),l=[{id:"dashboard",label:"Dashboard"},{id:"equipment",label:"Attrezzatura"},{id:"bookings",label:"Prenotazioni"},{id:"packages",label:"Pacchetti"},{id:"expenses",label:"Spese"},{id:"reports",label:"Amministrazione e Report"},{id:"settings",label:"Impostazioni"}],u=({name:c})=>{switch(c){case"dashboard":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13h8V3H3v10zM13 21h8v-8h-8v8zM13 3v8h8V3h-8zM3 21h8v-8H3v8z"})});case"equipment":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M9 3h6v4H9V3zM4 8h16v13H4V8z"})});case"bookings":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h10M7 16h10M5 4h14v2H5V4z"})});case"packages":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l9 4.5v9L12 21 3 16.5v-9L12 3zM12 12v8"})});case"expenses":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-2 0-4 1-4 3s2 3 4 3 4-1 4-3-2-3-4-3zM4 19h16"})});case"reports":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v18h18"})});case"settings":return v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7zM19.4 15a1.98 1.98 0 0 0 .35 2.04l.04.04a2 2 0 0 1-2.83 2.83l-.04-.04a1.98 1.98 0 0 0-2.04-.35 2 2 0 0 1-1.17 1.17c-.7.28-1.47.28-2.17 0a2 2 0 0 1-1.17-1.17 1.98 1.98 0 0 0-2.04.35l-.04.04a2 2 0 0 1-2.83-2.83l.04-.04a1.98 1.98 0 0 0 .35-2.04 2 2 0 0 1-1.17-1.17c-.28-.7-.28-1.47 0-2.17A2 2 0 0 1 3 8.58 1.98 1.98 0 0 0 2.65 6.54L2.61 6.5A2 2 0 0 1 5.44 3.67l.04.04c.7.28 1.47.28 2.17 0a2 2 0 0 1 1.17-1.17c.7-.28 1.47-.28 2.17 0a2 2 0 0 1 1.17 1.17c.28.7.28 1.47 0 2.17A2 2 0 0 1 19.4 8.58c.35.35.7.7.99 1.06z"})});default:return null}};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"md:hidden flex items-center justify-between p-2 bg-white dark:bg-neutral-900 border-b dark:border-neutral-800",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:()=>a(c=>!c),"aria-label":"Apri menu",className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800",children:v.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),v.jsx("div",{className:"font-semibold",children:"Sup Manager"})]}),v.jsx("div",{children:v.jsx("button",{onClick:()=>r(),className:"px-3 py-1 rounded bg-sky-600 text-white",children:n==="light"?"Chiaro":"Scuro"})})]}),v.jsxs("aside",{className:`min-h-screen bg-neutral-50 dark:bg-neutral-900 border-r dark:border-neutral-800 p-4 transition-all duration-150 ${s?"w-16":"w-64"} ${o?"fixed z-40 left-0 top-0 h-full":"md:static"}`,children:[v.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h1",{className:`text-lg font-bold ${s?"sr-only":""}`,children:"Sup Manager"}),!s&&v.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Gestione prenotazioni e contabilit"})]}),v.jsx("div",{className:"hidden md:flex items-center gap-2",children:v.jsx("button",{onClick:()=>i(c=>!c),"aria-label":"Riduci sidebar",className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800",children:v.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:v.jsx("path",{strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})})]}),v.jsx("nav",{className:"space-y-1","aria-label":"Main navigation",children:l.map(c=>{const h=e===c.id;return v.jsxs("button",{onClick:()=>{t==null||t(c.id),a(!1)},"aria-current":h?"page":void 0,className:`w-full flex items-center gap-3 px-3 py-2 rounded transition-colors ${h?"bg-brand-500 text-white":"hover:bg-neutral-100 dark:hover:bg-neutral-800"}`,children:[v.jsx("span",{className:"flex-shrink-0 text-current",children:v.jsx(u,{name:c.id})}),v.jsx("span",{className:`${s?"hidden":"block"}`,children:c.label})]},c.id)})}),v.jsx("div",{className:`mt-6 ${s?"text-center":""}`,children:v.jsx("button",{onClick:()=>r(),className:"px-3 py-2 bg-sky-600 text-white rounded w-full",children:s?n==="light"?"C":"S":`Tema: ${n==="light"?"Chiaro":"Scuro"}`})})]})]})}Di.register(pa,ga,Xs,Ur,Ns,ay,iy);function $1(t,e){const n=s=>s==null?"":String(s).replace(/"/g,'""'),r=[e.join(",")];for(const s of t)r.push(e.map(i=>`"${n(s[i]??"")}"`).join(","));return r.join(`
`)}function z1(){var ht,Se,zn;const[t,e]=R.useState("reports"),[n,r]=R.useState(()=>{const I=new Date;return I.setDate(I.getDate()-30),I.toISOString().slice(0,10)}),[s,i]=R.useState(()=>new Date().toISOString().slice(0,10)),[o,a]=R.useState([]),[l,u]=R.useState([]),[c,h]=R.useState([]),[d,f]=R.useState(!1),[g,y]=R.useState(22),[w,p]=R.useState(0),[m,_]=R.useState([]),[b,x]=R.useState([]),[k,S]=R.useState(""),[E,P]=R.useState(""),[C,T]=R.useState(""),[D,j]=R.useState(null);R.useEffect(()=>{z();const I=()=>z();return window.addEventListener("settings:changed",I),()=>window.removeEventListener("settings:changed",I)},[]);async function z(){var dt;f(!0);const{data:I}=await H.rpc("report_revenue_by_equipment",{start_date:n,end_date:s});a(I??[]);const{data:$e}=await H.rpc("report_daily_revenue",{start_date:n,end_date:s});u($e??[]);const{data:ln}=await H.rpc("report_margin",{start_date:n,end_date:s});h(ln??[]);const{data:ze}=await H.from("app_setting").select("value").eq("key","iva_percent").single(),un=ze!=null&&ze.value?Number(ze.value):22;y(Number.isFinite(un)?un:22);try{const{data:Ze}=await H.rpc("report_counts",{start_date:n,end_date:s}),fy=((dt=Ze==null?void 0:Ze.find(py=>py.metric==="bookings"))==null?void 0:dt.value)??0;p(Number(fy))}catch{p(0)}try{const{data:Ze}=await H.rpc("report_top_products",{start_date:n,end_date:s,p_limit:10});_(Ze??[])}catch{_([])}f(!1)}async function U(){const{data:I}=await H.from("expense").select("*").order("date",{ascending:!1}).limit(100);x(I??[])}async function V(I){I.preventDefault();let $e=null;if(D)try{const ze=`receipts/${Date.now()}_${D.name}`,{data:un,error:dt}=await H.storage.from("receipts").upload(ze,D);if(dt)throw dt;const{data:Ze}=H.storage.from("receipts").getPublicUrl(ze);$e=Ze.publicUrl}catch(ze){alert("Errore upload ricevuta: "+(ze.message||ze));return}const{error:ln}=await H.from("expense").insert([{amount:Number(k),category:E,notes:C,date:new Date().toISOString().slice(0,10),receipt_url:$e}]);if(ln)return alert(ln.message);S(""),P(""),T(""),j(null),U()}function K(I,$e){if(!I||I.length===0)return alert("Nessun dato");const ln=Object.keys(I[0]),ze=$1(I,ln),un=new Blob([ze],{type:"text/csv;charset=utf-8;"}),dt=URL.createObjectURL(un),Ze=document.createElement("a");Ze.href=dt,Ze.download=$e,Ze.click(),URL.revokeObjectURL(dt)}const A={labels:l.map(I=>I.day),datasets:[{label:"Entrate",data:l.map(I=>Number(I.revenue)),borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.2)"}]},L={labels:o.map(I=>I.equipment),datasets:[{data:o.map(I=>Number(I.revenue)),backgroundColor:o.map((I,$e)=>["#60a5fa","#3b82f6","#2563eb","#1e3a8a","#93c5fd"][$e%5])}]},N=typeof document<"u"&&document.documentElement.classList.contains("dark"),q=N?"#9CA3AF":"#374151",ee=N?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",ct={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:q}}},scales:{x:{ticks:{color:q},grid:{color:ee}},y:{ticks:{color:q},grid:{color:ee}}}},Te={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:q}}}};return v.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{className:"text-2xl font-semibold",children:"Amministrazione e Report"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{className:`px-3 py-1 rounded ${t==="reports"?"bg-brand-500 text-white":"border"}`,onClick:()=>e("reports"),children:"Reports"}),v.jsx("button",{className:`px-3 py-1 rounded ${t==="admin"?"bg-brand-500 text-white":"border"}`,onClick:()=>{e("admin"),U()},children:"Amministrazione"})]})]}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2 -mx-2 px-2",children:[v.jsx(Ft,{title:"Entrate",value:Number(((ht=c.find(I=>I.metric==="revenue"))==null?void 0:ht.value)??0).toFixed(2)+" ",color:"accent"}),v.jsx(Ft,{title:"Ordini",value:w,color:"neutral"}),v.jsx(Ft,{title:"Spese",value:Number(((Se=c.find(I=>I.metric==="expenses"))==null?void 0:Se.value)??0).toFixed(2)+" ",color:"warning"}),v.jsx(Ft,{title:"IVA",value:(Number(((zn=c.find(I=>I.metric==="revenue"))==null?void 0:zn.value)??0)*g/100).toFixed(2)+" ",color:"neutral"}),v.jsx(Ft,{title:"Profitto",value:(()=>{var ze,un;const I=Number(((ze=c.find(dt=>dt.metric==="revenue"))==null?void 0:ze.value)??0),$e=Number(((un=c.find(dt=>dt.metric==="expenses"))==null?void 0:un.value)??0),ln=I*g/100;return(I-$e-ln).toFixed(2)+" "})(),color:"success"})]})}),t==="reports"&&v.jsxs(v.Fragment,{children:[v.jsxs(jn,{children:[v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[v.jsx("label",{children:"Da"}),v.jsx("input",{type:"date",value:n,onChange:I=>r(I.target.value),className:"border px-2 py-1 rounded"}),v.jsx("label",{children:"A"}),v.jsx("input",{type:"date",value:s,onChange:I=>i(I.target.value),className:"border px-2 py-1 rounded"}),v.jsx(zt,{onClick:z,children:"Aggiorna"}),v.jsx(zt,{onClick:()=>K(o,"revenue-by-equipment.csv"),children:"Export CSV"})]})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{className:"col-span-2",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"text-sm text-neutral-500",children:"Entrate giornaliere"}),v.jsx("div",{className:"h-48",children:v.jsx("div",{className:"h-full",children:v.jsx(Bu,{data:A,options:ct})})})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500",children:"Entrate per attrezzatura"}),v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-left text-neutral-500",children:[v.jsx("th",{children:"Attrezzatura"}),v.jsx("th",{children:"Prenotazioni"}),v.jsx("th",{children:"Incasso"})]})}),v.jsx("tbody",{children:o.map(I=>v.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[v.jsx("td",{className:"py-2",children:I.equipment}),v.jsx("td",{className:"py-2",children:I.bookings_count}),v.jsxs("td",{className:"py-2",children:[Number(I.revenue).toFixed(2)," "]})]},I.equipment))})]})]})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"text-sm text-neutral-500",children:"Ripartizione entrate"}),v.jsx("div",{className:"h-48",children:v.jsx("div",{className:"h-full",children:v.jsx(N1,{data:L,options:Te})})})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-neutral-500",children:"Riepilogo"}),v.jsx("ul",{className:"mt-2",children:c.map(I=>v.jsxs("li",{className:"py-1",children:[v.jsx("strong",{children:I.metric}),": ",Number(I.value).toFixed(2)," "]},I.metric))})]})]})]})]}),v.jsxs(jn,{children:[v.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[v.jsx("div",{className:"text-lg font-medium",children:"Prodotti pi richiesti"}),v.jsx("div",{children:v.jsx(zt,{onClick:()=>K(m,"top-products.csv"),children:"Esporta CSV"})})]}),v.jsx("div",{children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-left text-neutral-500",children:[v.jsx("th",{children:"Prodotto"}),v.jsx("th",{children:"Prenotazioni"}),v.jsx("th",{children:"Incasso"})]})}),v.jsx("tbody",{children:m.map((I,$e)=>v.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[v.jsx("td",{className:"py-2",children:I.name??""}),v.jsx("td",{children:I.bookings_count}),v.jsxs("td",{children:[Number(I.revenue).toFixed(2)," "]})]},I.name||$e))})]})})]})]}),t==="admin"&&v.jsxs(jn,{children:[v.jsx("h3",{className:"text-lg font-medium mb-3",children:"Gestione Spese"}),v.jsxs("form",{onSubmit:V,className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[v.jsx("input",{value:k,onChange:I=>S(I.target.value),placeholder:"Importo",className:"border px-2 py-1 rounded"}),v.jsx("input",{value:E,onChange:I=>P(I.target.value),placeholder:"Categoria",className:"border px-2 py-1 rounded"}),v.jsx("input",{value:C,onChange:I=>T(I.target.value),placeholder:"Note",className:"border px-2 py-1 rounded"}),v.jsx("input",{type:"file",onChange:I=>{var $e;return j((($e=I.target.files)==null?void 0:$e[0])??null)},className:"col-span-1 md:col-span-3"}),v.jsxs("div",{className:"md:col-span-3 flex gap-2",children:[v.jsx(zt,{children:" Aggiungi spesa "}),v.jsx(zt,{onClick:U,className:"bg-gray-600",children:"Ricarica"})]})]}),v.jsx("div",{className:"mt-4",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-left text-neutral-500",children:[v.jsx("th",{children:"Data"}),v.jsx("th",{children:"Categoria"}),v.jsx("th",{children:"Importo"}),v.jsx("th",{children:"Ricevuta"})]})}),v.jsx("tbody",{children:b.map(I=>v.jsxs("tr",{className:"border-t border-neutral-100 dark:border-neutral-800",children:[v.jsx("td",{className:"py-2",children:I.date}),v.jsx("td",{children:I.category}),v.jsxs("td",{children:[Number(I.amount).toFixed(2)," "]}),v.jsx("td",{children:I.receipt_url?v.jsx("a",{href:I.receipt_url,target:"_blank",rel:"noreferrer",children:"Ricevuta"}):""})]},I.id))})]})})]})]})}function F1(){const[t,e]=R.useState(null),[n,r]=R.useState(!1);R.useEffect(()=>{s()},[]);async function s(){const{data:o}=await H.from("app_setting").select("value").eq("key","iva_percent").single(),a=o!=null&&o.value?Number(o.value):22;e(Number.isFinite(a)?a:22)}async function i(o){if(o.preventDefault(),t===null)return;r(!0);const{error:a}=await H.from("app_setting").upsert({key:"iva_percent",value:String(t)});if(r(!1),a)return alert(a.message);window.dispatchEvent(new CustomEvent("settings:changed",{detail:{key:"iva_percent",value:t}})),alert("Impostazioni salvate")}return v.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[v.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Impostazioni"}),v.jsx(jn,{children:v.jsxs("form",{onSubmit:i,className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{className:"text-sm block mb-1",children:"IVA (%)"}),v.jsx("input",{type:"number",value:t??"",onChange:o=>e(Number(o.target.value)),className:"border px-2 py-1 rounded w-32"}),v.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Valore IVA applicato alle statistiche e al calcolo del profitto."})]}),v.jsx("div",{children:v.jsx(zt,{type:"submit",children:n?"Salvo...":"Salva"})})]})})]})}function U1(){const[t,e]=R.useState("dashboard"),n=R.useCallback(r=>e(r),[]);return v.jsxs("div",{className:"min-h-screen bg-sky-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 flex",children:[v.jsx(L1,{onNav:n,currentPage:t}),v.jsx("main",{className:"flex-1 p-4",children:t==="reports"?v.jsx(z1,{}):t==="settings"?v.jsx(F1,{}):v.jsx(I1,{page:t})})]})}om(document.getElementById("root")).render(v.jsx(Qs.StrictMode,{children:v.jsx(M1,{children:v.jsx(U1,{})})}));
