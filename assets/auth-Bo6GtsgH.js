import{s as a}from"./index-kEs-99Gz.js";import"./vendor-react-CLub8Mor.js";import"./vendor-DwskwR46.js";import"./vendor-charts-BCrMCkTm.js";let r=null;async function p(){var n;if(r)return r;try{const e=await a.auth.getUser(),i=(n=e==null?void 0:e.data)==null?void 0:n.user;if(!i)return null;const{data:o,error:s}=await a.from("app_user").select("id").limit(1).maybeSingle();if(!s&&!o)return r="admin",r;const{data:t,error:l}=await a.from("app_user").select("role").eq("id",i.id).single();return l?(r="staff",r):(r=(t==null?void 0:t.role)??"staff",r)}catch{return null}}export{p as getCurrentUserRole};
